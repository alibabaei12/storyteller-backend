2025-06-08 15:19:29,830 - google.auth.compute_engine._metadata - WARNING - Compute Engine Metadata server unavailable on attempt 1 of 3. Reason: timed out
2025-06-08 15:19:33,762 - google.auth.compute_engine._metadata - WARNING - Compute Engine Metadata server unavailable on attempt 2 of 3. Reason: timed out
2025-06-08 15:19:35,911 - google.auth.compute_engine._metadata - WARNING - Compute Engine Metadata server unavailable on attempt 3 of 3. Reason: [Errno 64] Host is down
2025-06-08 15:19:35,912 - google.auth._default - WARNING - Authentication failed using Compute Engine authentication due to unavailable metadata server.
2025-06-08 15:19:35,912 - app.services.firebase_service - ERROR - Error initializing: Your default credentials were not found. To set up Application Default Credentials, see https://cloud.google.com/docs/authentication/external/set-up-adc for more information.
2025-06-08 15:19:35,912 - app.services.firebase_service - ERROR - Make sure Firebase Admin SDK is properly configured
2025-06-08 15:19:35,912 - app.services.firebase_service - ERROR - GOOGLE_APPLICATION_CREDENTIALS: None
2025-06-08 15:19:35,912 - app.services.firebase_service - ERROR - File exists: False
2025-06-08 15:23:32,579 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-08 15:24:31,136 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-08 15:27:08,614 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-08 15:28:48,206 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-08 15:29:05,327 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-08 15:29:40,726 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-08 15:34:33,840 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-08 15:35:32,295 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-08 15:37:41,265 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-08 15:37:41,400 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-08 15:37:41,400 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-08 15:37:41,404 - root - INFO - Starting StoryTeller API development server...
2025-06-08 15:37:41,404 - root - INFO - API will be available at http://localhost:8000
2025-06-08 15:37:43,732 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8000
 * Running on http://10.0.0.243:8000
2025-06-08 15:37:43,732 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-08 15:37:43,755 - werkzeug - INFO -  * Restarting with watchdog (fsevents)
2025-06-08 15:37:44,156 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-08 15:37:44,252 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-08 15:37:44,252 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-08 15:37:44,255 - root - INFO - Starting StoryTeller API development server...
2025-06-08 15:37:44,255 - root - INFO - API will be available at http://localhost:8000
2025-06-08 15:37:44,257 - werkzeug - WARNING -  * Debugger is active!
2025-06-08 15:37:44,265 - werkzeug - INFO -  * Debugger PIN: 770-745-223
2025-06-08 15:37:56,873 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-08 15:38:17,269 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-08 15:38:37,445 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-08 15:39:18,791 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-08 15:40:13,294 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-08 15:40:24,217 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-08 15:42:43,416 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-08 15:42:43,511 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-08 15:42:43,511 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-08 15:42:43,515 - root - INFO - Starting StoryTeller API development server...
2025-06-08 15:42:43,515 - root - INFO - API will be available at http://localhost:8000
2025-06-08 15:42:43,524 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5001
 * Running on http://10.0.0.243:5001
2025-06-08 15:42:43,524 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-08 15:42:43,524 - werkzeug - INFO -  * Restarting with stat
2025-06-08 15:42:43,925 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-08 15:42:43,992 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-08 15:42:43,993 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-08 15:42:43,996 - root - INFO - Starting StoryTeller API development server...
2025-06-08 15:42:43,996 - root - INFO - API will be available at http://localhost:8000
2025-06-08 15:42:43,998 - werkzeug - WARNING -  * Debugger is active!
2025-06-08 15:42:44,006 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-08 15:42:49,389 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-08 15:42:49,458 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-08 15:42:49,458 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-08 15:42:49,461 - root - INFO - Starting StoryTeller API development server...
2025-06-08 15:42:49,461 - root - INFO - API will be available at http://localhost:8000
2025-06-08 15:42:49,467 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5001
 * Running on http://10.0.0.243:5001
2025-06-08 15:42:49,467 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-08 15:42:49,468 - werkzeug - INFO -  * Restarting with stat
2025-06-08 15:42:49,872 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-08 15:42:49,939 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-08 15:42:49,940 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-08 15:42:49,943 - root - INFO - Starting StoryTeller API development server...
2025-06-08 15:42:49,943 - root - INFO - API will be available at http://localhost:8000
2025-06-08 15:42:49,945 - werkzeug - WARNING -  * Debugger is active!
2025-06-08 15:42:49,950 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-08 15:42:57,342 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 15:42:57] "OPTIONS /api/status HTTP/1.1" 200 -
2025-06-08 15:42:57,344 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 15:42:57] "OPTIONS /api/status HTTP/1.1" 200 -
2025-06-08 15:42:57,346 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 15:42:57] "GET /api/status HTTP/1.1" 200 -
2025-06-08 15:42:57,348 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 15:42:57] "GET /api/status HTTP/1.1" 200 -
2025-06-08 15:43:16,316 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 15:43:16] "OPTIONS /api/status HTTP/1.1" 200 -
2025-06-08 15:43:16,317 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 15:43:16] "OPTIONS /api/status HTTP/1.1" 200 -
2025-06-08 15:43:16,319 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 15:43:16] "GET /api/status HTTP/1.1" 200 -
2025-06-08 15:43:16,321 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 15:43:16] "GET /api/status HTTP/1.1" 200 -
2025-06-08 15:43:17,281 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 15:43:17] "GET /api/status HTTP/1.1" 200 -
2025-06-08 15:43:17,283 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 15:43:17] "GET /api/status HTTP/1.1" 200 -
2025-06-08 15:43:28,087 - app.services.firebase_service - INFO - Retrieved 8 stories
2025-06-08 15:43:28,088 - app.storage.storage - INFO - Retrieved 8 stories
2025-06-08 15:43:28,090 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 15:43:28] "OPTIONS /api/stories HTTP/1.1" 200 -
2025-06-08 15:43:28,094 - app.auth - INFO - Authentication successful for user: Qbml4uDBe0O6YlYHLO4CuXFnXuu2
2025-06-08 15:43:28,227 - app.services.firebase_service - INFO - Retrieved 3 stories for user Qbml4uDBe0O6YlYHLO4CuXFnXuu2
2025-06-08 15:43:28,227 - app.storage.storage - INFO - Retrieved 3 stories for user Qbml4uDBe0O6YlYHLO4CuXFnXuu2
2025-06-08 15:43:28,518 - app.services.ai_service_simple - INFO - Using cultivation_progression genre for initial story
2025-06-08 15:43:28,519 - app.services.ai_service_simple - ERROR - Error generating initial story: No module named 'app.ai_service'
2025-06-08 15:43:28,693 - app.services.firebase_service - INFO - Saved story story_1749422608_3c16ff2b: Ali's Cultivation Story
2025-06-08 15:43:28,693 - app.storage.storage - INFO - Saved story story_1749422608_3c16ff2b: Ali's Cultivation Story
2025-06-08 15:43:28,693 - app.storage.storage - INFO - Created new story: story_1749422608_3c16ff2b: Ali's Cultivation Story
2025-06-08 15:43:28,987 - app.services.usage_service - INFO - Updated usage for user: Qbml4uDBe0O6YlYHLO4CuXFnXuu2
2025-06-08 15:43:29,385 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 15:43:29] "POST /api/stories HTTP/1.1" 200 -
2025-06-08 15:43:29,591 - app.services.firebase_service - INFO - Retrieved story story_1749422608_3c16ff2b: Ali's Cultivation Story
2025-06-08 15:43:29,592 - app.storage.storage - INFO - Retrieved story story_1749422608_3c16ff2b: Ali's Cultivation Story
2025-06-08 15:43:29,593 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 15:43:29] "OPTIONS /api/stories/story_1749422608_3c16ff2b HTTP/1.1" 200 -
2025-06-08 15:43:29,750 - app.services.firebase_service - INFO - Retrieved story story_1749422608_3c16ff2b: Ali's Cultivation Story
2025-06-08 15:43:29,751 - app.storage.storage - INFO - Retrieved story story_1749422608_3c16ff2b: Ali's Cultivation Story
2025-06-08 15:43:29,753 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 15:43:29] "OPTIONS /api/stories/story_1749422608_3c16ff2b HTTP/1.1" 200 -
2025-06-08 15:43:29,818 - app.services.firebase_service - INFO - Retrieved story story_1749422608_3c16ff2b: Ali's Cultivation Story
2025-06-08 15:43:29,819 - app.storage.storage - INFO - Retrieved story story_1749422608_3c16ff2b: Ali's Cultivation Story
2025-06-08 15:43:29,821 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 15:43:29] "GET /api/stories/story_1749422608_3c16ff2b HTTP/1.1" 200 -
2025-06-08 15:43:29,919 - app.services.firebase_service - INFO - Retrieved story story_1749422608_3c16ff2b: Ali's Cultivation Story
2025-06-08 15:43:29,919 - app.storage.storage - INFO - Retrieved story story_1749422608_3c16ff2b: Ali's Cultivation Story
2025-06-08 15:43:29,920 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 15:43:29] "GET /api/stories/story_1749422608_3c16ff2b HTTP/1.1" 200 -
2025-06-08 15:46:53,458 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-08 15:46:53,585 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-08 15:46:53,585 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-08 15:46:53,590 - root - INFO - Starting StoryTeller API server...
2025-06-08 15:46:53,590 - root - INFO - Host: 0.0.0.0
2025-06-08 15:46:53,590 - root - INFO - Port: 5001
2025-06-08 15:46:53,590 - root - INFO - Debug mode: True
2025-06-08 15:46:53,598 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5001
 * Running on http://10.0.0.243:5001
2025-06-08 15:46:53,598 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-08 15:46:53,603 - werkzeug - INFO -  * Restarting with watchdog (fsevents)
2025-06-08 15:46:53,994 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-08 15:46:54,084 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-08 15:46:54,084 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-08 15:46:54,088 - root - INFO - Starting StoryTeller API server...
2025-06-08 15:46:54,088 - root - INFO - Host: 0.0.0.0
2025-06-08 15:46:54,088 - root - INFO - Port: 5001
2025-06-08 15:46:54,088 - root - INFO - Debug mode: True
2025-06-08 15:46:54,089 - werkzeug - WARNING -  * Debugger is active!
2025-06-08 15:46:54,099 - werkzeug - INFO -  * Debugger PIN: 770-745-223
2025-06-08 15:47:05,468 - app.services.firebase_service - INFO - Retrieved story story_1749422608_3c16ff2b: Ali's Cultivation Story
2025-06-08 15:47:05,469 - app.services.firebase_service - INFO - Retrieved story story_1749422608_3c16ff2b: Ali's Cultivation Story
2025-06-08 15:47:05,470 - app.storage.storage - INFO - Retrieved story story_1749422608_3c16ff2b: Ali's Cultivation Story
2025-06-08 15:47:05,471 - app.storage.storage - INFO - Retrieved story story_1749422608_3c16ff2b: Ali's Cultivation Story
2025-06-08 15:47:05,472 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 15:47:05] "OPTIONS /api/stories/story_1749422608_3c16ff2b HTTP/1.1" 200 -
2025-06-08 15:47:05,473 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 15:47:05] "OPTIONS /api/stories/story_1749422608_3c16ff2b HTTP/1.1" 200 -
2025-06-08 15:47:05,684 - app.services.firebase_service - INFO - Retrieved story story_1749422608_3c16ff2b: Ali's Cultivation Story
2025-06-08 15:47:05,685 - app.storage.storage - INFO - Retrieved story story_1749422608_3c16ff2b: Ali's Cultivation Story
2025-06-08 15:47:05,686 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 15:47:05] "GET /api/stories/story_1749422608_3c16ff2b HTTP/1.1" 200 -
2025-06-08 15:47:05,809 - app.services.firebase_service - INFO - Retrieved story story_1749422608_3c16ff2b: Ali's Cultivation Story
2025-06-08 15:47:05,810 - app.storage.storage - INFO - Retrieved story story_1749422608_3c16ff2b: Ali's Cultivation Story
2025-06-08 15:47:05,811 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 15:47:05] "GET /api/stories/story_1749422608_3c16ff2b HTTP/1.1" 200 -
2025-06-08 15:47:07,495 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 15:47:07] "OPTIONS /api/status HTTP/1.1" 200 -
2025-06-08 15:47:07,497 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 15:47:07] "GET /api/status HTTP/1.1" 200 -
2025-06-08 15:47:07,499 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 15:47:07] "GET /api/status HTTP/1.1" 200 -
2025-06-08 15:47:17,802 - app.services.firebase_service - INFO - Retrieved 9 stories
2025-06-08 15:47:17,804 - app.storage.storage - INFO - Retrieved 9 stories
2025-06-08 15:47:17,805 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 15:47:17] "OPTIONS /api/stories HTTP/1.1" 200 -
2025-06-08 15:47:17,808 - app.auth - INFO - Authentication successful for user: Qbml4uDBe0O6YlYHLO4CuXFnXuu2
2025-06-08 15:47:17,992 - app.services.firebase_service - INFO - Retrieved 4 stories for user Qbml4uDBe0O6YlYHLO4CuXFnXuu2
2025-06-08 15:47:17,995 - app.storage.storage - INFO - Retrieved 4 stories for user Qbml4uDBe0O6YlYHLO4CuXFnXuu2
2025-06-08 15:47:18,323 - app.services.ai_service_simple - INFO - Using cultivation_progression genre for initial story
2025-06-08 15:47:18,323 - app.services.ai_service_simple - ERROR - Error generating initial story: No module named 'app.ai_service'
2025-06-08 15:47:18,496 - app.services.firebase_service - INFO - Saved story story_1749422838_9de66469: Ali's Cultivation Story
2025-06-08 15:47:18,496 - app.storage.storage - INFO - Saved story story_1749422838_9de66469: Ali's Cultivation Story
2025-06-08 15:47:18,496 - app.storage.storage - INFO - Created new story: story_1749422838_9de66469: Ali's Cultivation Story
2025-06-08 15:47:18,842 - app.services.usage_service - INFO - Updated usage for user: Qbml4uDBe0O6YlYHLO4CuXFnXuu2
2025-06-08 15:47:19,377 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 15:47:19] "POST /api/stories HTTP/1.1" 200 -
2025-06-08 15:47:19,574 - app.services.firebase_service - INFO - Retrieved story story_1749422838_9de66469: Ali's Cultivation Story
2025-06-08 15:47:19,574 - app.storage.storage - INFO - Retrieved story story_1749422838_9de66469: Ali's Cultivation Story
2025-06-08 15:47:19,575 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 15:47:19] "OPTIONS /api/stories/story_1749422838_9de66469 HTTP/1.1" 200 -
2025-06-08 15:47:19,789 - app.services.firebase_service - INFO - Retrieved story story_1749422838_9de66469: Ali's Cultivation Story
2025-06-08 15:47:19,790 - app.storage.storage - INFO - Retrieved story story_1749422838_9de66469: Ali's Cultivation Story
2025-06-08 15:47:19,792 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 15:47:19] "OPTIONS /api/stories/story_1749422838_9de66469 HTTP/1.1" 200 -
2025-06-08 15:47:19,909 - app.services.firebase_service - INFO - Retrieved story story_1749422838_9de66469: Ali's Cultivation Story
2025-06-08 15:47:19,910 - app.storage.storage - INFO - Retrieved story story_1749422838_9de66469: Ali's Cultivation Story
2025-06-08 15:47:19,911 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 15:47:19] "GET /api/stories/story_1749422838_9de66469 HTTP/1.1" 200 -
2025-06-08 15:47:20,024 - app.services.firebase_service - INFO - Retrieved story story_1749422838_9de66469: Ali's Cultivation Story
2025-06-08 15:47:20,025 - app.storage.storage - INFO - Retrieved story story_1749422838_9de66469: Ali's Cultivation Story
2025-06-08 15:47:20,026 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 15:47:20] "GET /api/stories/story_1749422838_9de66469 HTTP/1.1" 200 -
2025-06-08 15:52:28,375 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/api.py', reloading
2025-06-08 15:52:30,791 - werkzeug - INFO -  * Restarting with watchdog (fsevents)
2025-06-08 15:52:31,394 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-08 15:52:31,529 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-08 15:52:31,529 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-08 15:52:31,533 - root - INFO - Starting StoryTeller API server...
2025-06-08 15:52:31,533 - root - INFO - Host: 0.0.0.0
2025-06-08 15:52:31,533 - root - INFO - Port: 5001
2025-06-08 15:52:31,533 - root - INFO - Debug mode: True
2025-06-08 15:52:31,536 - werkzeug - WARNING -  * Debugger is active!
2025-06-08 15:52:31,543 - werkzeug - INFO -  * Debugger PIN: 770-745-223
2025-06-08 15:52:37,358 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/api.py', reloading
2025-06-08 15:52:37,667 - werkzeug - INFO -  * Restarting with watchdog (fsevents)
2025-06-08 15:52:38,034 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-08 15:52:38,121 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-08 15:52:38,121 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-08 15:52:38,125 - root - INFO - Starting StoryTeller API server...
2025-06-08 15:52:38,125 - root - INFO - Host: 0.0.0.0
2025-06-08 15:52:38,125 - root - INFO - Port: 5001
2025-06-08 15:52:38,125 - root - INFO - Debug mode: True
2025-06-08 15:52:38,127 - werkzeug - WARNING -  * Debugger is active!
2025-06-08 15:52:38,133 - werkzeug - INFO -  * Debugger PIN: 770-745-223
2025-06-08 15:52:51,543 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/models/cultivation_progression.py', reloading
2025-06-08 15:52:51,557 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/models/cultivation_progression.py', reloading
2025-06-08 15:52:52,306 - werkzeug - INFO -  * Restarting with watchdog (fsevents)
2025-06-08 15:52:52,821 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-08 15:56:08,094 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-08 15:59:09,805 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-08 15:59:09,969 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-08 15:59:09,969 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-08 15:59:09,973 - root - INFO - Starting StoryTeller API server...
2025-06-08 15:59:09,974 - root - INFO - Host: 0.0.0.0
2025-06-08 15:59:09,974 - root - INFO - Port: 5001
2025-06-08 15:59:09,974 - root - INFO - Debug mode: True
2025-06-08 15:59:09,981 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5001
 * Running on http://10.0.0.243:5001
2025-06-08 15:59:09,981 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-08 15:59:09,985 - werkzeug - INFO -  * Restarting with watchdog (fsevents)
2025-06-08 15:59:10,390 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-08 15:59:10,482 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-08 15:59:10,482 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-08 15:59:10,486 - root - INFO - Starting StoryTeller API server...
2025-06-08 15:59:10,486 - root - INFO - Host: 0.0.0.0
2025-06-08 15:59:10,486 - root - INFO - Port: 5001
2025-06-08 15:59:10,486 - root - INFO - Debug mode: True
2025-06-08 15:59:10,487 - werkzeug - WARNING -  * Debugger is active!
2025-06-08 15:59:10,494 - werkzeug - INFO -  * Debugger PIN: 770-745-223
2025-06-08 15:59:12,966 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 15:59:12] "GET /status HTTP/1.1" 200 -
2025-06-08 15:59:19,297 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 15:59:19] "[31m[1mPOST /stories HTTP/1.1[0m" 401 -
2025-06-08 15:59:33,558 - app.auth - INFO - Authentication successful for user: test-user-123
2025-06-08 15:59:33,558 - app.auth - INFO - Authentication successful for user: test-user-123
2025-06-08 15:59:33,997 - app.services.firebase_service - INFO - Retrieved 0 stories for user test-user-123
2025-06-08 15:59:33,997 - app.storage.storage - INFO - Retrieved 0 stories for user test-user-123
2025-06-08 15:59:34,412 - app.services.usage_service - INFO - Created new usage record
2025-06-08 15:59:34,412 - app.services.ai_service - INFO - Using cultivation_progression genre for initial story
2025-06-08 15:59:34,412 - app.models.cultivation_progression - INFO - Generating cultivation progression story for Ali
2025-06-08 15:59:34,412 - app.models.base_genre - INFO - Generating story for Ali
2025-06-08 15:59:37,445 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-08 15:59:37,451 - app.models.base_genre - INFO - ðŸŽ­ GENRE GPT RESPONSE (1868 chars):
2025-06-08 15:59:37,451 - app.models.base_genre - INFO - ============================================================
2025-06-08 15:59:37,451 - app.models.base_genre - INFO - [STORY]
Panel 1:
Setting: A desolate village surrounded by misty mountains. Ali, a young man with a determined expression, is seen struggling to lift heavy buckets of water, his muscles straining.
Narration: "In the remote village of Mistwood, Ali toiled under the weight of his meager existence."

Panel 2:
Ali overhears villagers gossiping about a nearby cultivation school rumored to accept even the weakest disciples. Determination flashes in Ali's eyes.

Panel 3:
Scene transition: Ali embarks on a treacherous journey through the misty mountains, determined to reach the cultivation school.

Panel 4:
Ali arrives at the entrance of the school, facing a formidable gatekeeper. The gatekeeper eyes Ali skeptically.

Panel 5:
Conflict: The gatekeeper challenges Ali to prove his worth by crossing a narrow rope bridge over a chasm filled with roaring waterfalls below.

Panel 6:
Ali, trembling with fear, steadies himself and starts crossing the bridge, showcasing his determination and resilience.

Panel 7:
Cultivation Technique: As Ali reaches the middle of the bridge, he channels his Qi, using the "Flowing River Step" technique. His Qi manifests as shimmering blue patterns around his feet, aiding his balance.

Panel 8:
Consequence: Ali successfully crosses the bridge, impressing the gatekeeper. The gatekeeper welcomes him inside the school, intrigued by Ali's potential.

[CHOICES]
1. Ali decides to explore the school grounds and observe other disciples, hoping to learn from their techniques and experiences.
2. Feeling emboldened by his success, Ali seeks out the headmaster to request special training, eager to accelerate his cultivation progress.
3. Overhearing whispers about a forbidden cave with ancient cultivation secrets, Ali decides to sneak away from the school in search of the cave, driven by curiosity and the desire for power.
[/CHOICES]
2025-06-08 15:59:37,451 - app.models.base_genre - INFO - ============================================================
2025-06-08 15:59:37,452 - app.models.base_genre - INFO - Successfully parsed genre response: story=1386 chars, choices=3
2025-06-08 15:59:37,581 - app.services.firebase_service - INFO - Saved story story_1749423577_b6b87171: Ali's Cultivation Story
2025-06-08 15:59:37,581 - app.storage.storage - INFO - Saved story story_1749423577_b6b87171: Ali's Cultivation Story
2025-06-08 15:59:37,581 - app.storage.storage - INFO - Created new story: story_1749423577_b6b87171: Ali's Cultivation Story
2025-06-08 15:59:37,825 - app.services.usage_service - INFO - Updated usage for user: test-user-123
2025-06-08 15:59:38,189 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 15:59:38] "POST /stories HTTP/1.1" 200 -
2025-06-08 15:59:45,578 - app.auth - INFO - Authentication successful for user: test-user-123
2025-06-08 15:59:45,578 - app.auth - INFO - Authentication successful for user: test-user-123
2025-06-08 15:59:45,686 - app.services.firebase_service - INFO - Retrieved story story_1749423577_b6b87171: Ali's Cultivation Story
2025-06-08 15:59:45,686 - app.storage.storage - INFO - Retrieved story story_1749423577_b6b87171: Ali's Cultivation Story
2025-06-08 15:59:46,025 - app.services.usage_service - INFO - Updated usage for user: test-user-123
2025-06-08 15:59:46,136 - app.services.firebase_service - INFO - Retrieved story story_1749423577_b6b87171: Ali's Cultivation Story
2025-06-08 15:59:46,137 - app.storage.storage - INFO - Retrieved story story_1749423577_b6b87171: Ali's Cultivation Story
2025-06-08 15:59:46,256 - app.services.firebase_service - INFO - Saved story story_1749423577_b6b87171: Ali's Cultivation Story
2025-06-08 15:59:46,256 - app.storage.storage - INFO - Saved story story_1749423577_b6b87171: Ali's Cultivation Story
2025-06-08 15:59:46,256 - app.storage.storage - INFO - Saved choice 1 for node initial in story story_1749423577_b6b87171
2025-06-08 15:59:46,257 - app.services.ai_service - INFO - Using cultivation_progression genre for story continuation
2025-06-08 15:59:46,257 - app.models.cultivation_progression - INFO - Continuing cultivation progression story for Ali
2025-06-08 15:59:46,257 - app.models.base_genre - INFO - Generating story for Ali
2025-06-08 15:59:49,427 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-08 15:59:49,428 - app.models.base_genre - INFO - ðŸŽ­ GENRE GPT RESPONSE (2098 chars):
2025-06-08 15:59:49,429 - app.models.base_genre - INFO - ============================================================
2025-06-08 15:59:49,429 - app.models.base_genre - INFO - [STORY]
Panel 1:
Setting: Inside the cultivation school, Ali observes a group of disciples sparring in the courtyard. He watches with keen interest, noting their techniques and movements.
Panel 2:
As Ali continues to observe, he notices a disciple effortlessly using the "Thunder Palm" technique, unleashing crackling bolts of lightning with each strike.
Panel 3:
Character Development: Ali's eyes widen with awe and determination, realizing the vast potential of cultivation techniques. He resolves to push his limits and learn new techniques.
Panel 4:
Fresh Challenge: Suddenly, a senior disciple approaches Ali, a smirk playing on his lips. "You there, new kid. Let's see if you can handle a simple sparring match," he challenges, eyes gleaming with mischief.
Panel 5:
Conflict: Ali accepts the challenge, bracing himself as the senior disciple unleashes a flurry of powerful strikes, each one sending shockwaves through the air.
Panel 6:
Cultivation Technique: Drawing upon his determination, Ali focuses his Qi and activates the "Steel Body Refinement" technique. His Qi forms a protective barrier around him, absorbing the impact of the senior disciple's attacks.
Panel 7:
Emotional Journey: Ali grits his teeth, feeling the strain of the powerful strikes but standing his ground with unwavering resolve, determination shining in his eyes.
Panel 8:
Consequence: Impressed by Ali's resilience and determination, the senior disciple nods in approval. "Not bad, kid. Keep honing your skills," he acknowledges before walking away, leaving Ali with a newfound sense of confidence and purpose.
[/STORY]

[CHOICES]
1. Encouraged by the senior disciple's words, Ali seeks out a secluded training ground to practice the "Steel Body Refinement" technique further.
2. Intrigued by the "Thunder Palm" technique, Ali approaches the disciple who demonstrated it, hoping to learn more about mastering lightning-based techniques.
3. Feeling a newfound determination, Ali decides to explore the school library to research ancient cultivation texts in search of new techniques to enhance his skills.
[/CHOICES]
2025-06-08 15:59:49,429 - app.models.base_genre - INFO - ============================================================
2025-06-08 15:59:49,429 - app.models.base_genre - INFO - Successfully parsed genre response: story=1585 chars, choices=3
2025-06-08 15:59:49,522 - app.services.firebase_service - INFO - Retrieved story story_1749423577_b6b87171: Ali's Cultivation Story
2025-06-08 15:59:49,522 - app.storage.storage - INFO - Retrieved story story_1749423577_b6b87171: Ali's Cultivation Story
2025-06-08 15:59:49,654 - app.services.firebase_service - INFO - Saved story story_1749423577_b6b87171: Ali's Cultivation Story
2025-06-08 15:59:49,654 - app.storage.storage - INFO - Saved story story_1749423577_b6b87171: Ali's Cultivation Story
2025-06-08 15:59:49,654 - app.storage.storage - INFO - Added node node_3009496327 to story story_1749423577_b6b87171
2025-06-08 15:59:49,845 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 15:59:49] "POST /stories/story_1749423577_b6b87171/choices/1 HTTP/1.1" 200 -
2025-06-08 16:01:39,293 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-08 16:01:39,403 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-08 16:01:39,403 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-08 16:01:39,407 - root - INFO - Starting StoryTeller API server...
2025-06-08 16:01:39,407 - root - INFO - Host: 0.0.0.0
2025-06-08 16:01:39,407 - root - INFO - Port: 5001
2025-06-08 16:01:39,407 - root - INFO - Debug mode: True
2025-06-08 16:01:39,413 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5001
 * Running on http://10.0.0.243:5001
2025-06-08 16:01:39,413 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-08 16:01:39,417 - werkzeug - INFO -  * Restarting with watchdog (fsevents)
2025-06-08 16:01:39,790 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-08 16:01:39,879 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-08 16:01:39,879 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-08 16:01:39,883 - root - INFO - Starting StoryTeller API server...
2025-06-08 16:01:39,883 - root - INFO - Host: 0.0.0.0
2025-06-08 16:01:39,883 - root - INFO - Port: 5001
2025-06-08 16:01:39,883 - root - INFO - Debug mode: True
2025-06-08 16:01:39,884 - werkzeug - WARNING -  * Debugger is active!
2025-06-08 16:01:39,891 - werkzeug - INFO -  * Debugger PIN: 770-745-223
2025-06-08 16:01:47,748 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 16:01:47] "OPTIONS /api/status HTTP/1.1" 200 -
2025-06-08 16:01:47,750 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 16:01:47] "OPTIONS /api/status HTTP/1.1" 200 -
2025-06-08 16:01:47,754 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 16:01:47] "GET /api/status HTTP/1.1" 200 -
2025-06-08 16:01:47,755 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 16:01:47] "GET /api/status HTTP/1.1" 200 -
2025-06-08 16:01:51,291 - app.services.firebase_service - INFO - Retrieved 11 stories
2025-06-08 16:01:51,296 - app.storage.storage - INFO - Retrieved 11 stories
2025-06-08 16:01:51,296 - app.services.firebase_service - INFO - Retrieved 11 stories
2025-06-08 16:01:51,297 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 16:01:51] "OPTIONS /api/stories HTTP/1.1" 200 -
2025-06-08 16:01:51,298 - app.storage.storage - INFO - Retrieved 11 stories
2025-06-08 16:01:51,299 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 16:01:51] "OPTIONS /api/stories HTTP/1.1" 200 -
2025-06-08 16:01:51,489 - app.services.firebase_service - INFO - Retrieved 5 stories for user Qbml4uDBe0O6YlYHLO4CuXFnXuu2
2025-06-08 16:01:51,490 - app.storage.storage - INFO - Retrieved 5 stories for user Qbml4uDBe0O6YlYHLO4CuXFnXuu2
2025-06-08 16:01:51,491 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 16:01:51] "GET /api/stories HTTP/1.1" 200 -
2025-06-08 16:01:51,704 - app.services.firebase_service - INFO - Retrieved 5 stories for user Qbml4uDBe0O6YlYHLO4CuXFnXuu2
2025-06-08 16:01:51,705 - app.storage.storage - INFO - Retrieved 5 stories for user Qbml4uDBe0O6YlYHLO4CuXFnXuu2
2025-06-08 16:01:51,706 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 16:01:51] "GET /api/stories HTTP/1.1" 200 -
2025-06-08 16:01:55,398 - app.services.firebase_service - INFO - Retrieved story story_1749422838_9de66469: Ali's Cultivation Story
2025-06-08 16:01:55,398 - app.storage.storage - INFO - Retrieved story story_1749422838_9de66469: Ali's Cultivation Story
2025-06-08 16:01:55,399 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 16:01:55] "OPTIONS /api/stories/story_1749422838_9de66469 HTTP/1.1" 200 -
2025-06-08 16:01:55,401 - app.auth - INFO - Authentication successful for user: Qbml4uDBe0O6YlYHLO4CuXFnXuu2
2025-06-08 16:01:55,608 - app.services.firebase_service - INFO - Retrieved story story_1749422838_9de66469: Ali's Cultivation Story
2025-06-08 16:01:55,608 - app.storage.storage - INFO - Retrieved story story_1749422838_9de66469: Ali's Cultivation Story
2025-06-08 16:01:55,753 - app.services.firebase_service - INFO - Deleted story story_1749422838_9de66469
2025-06-08 16:01:55,753 - app.storage.storage - INFO - Deleted story story_1749422838_9de66469
2025-06-08 16:01:56,108 - app.services.usage_service - INFO - Updated usage for user: Qbml4uDBe0O6YlYHLO4CuXFnXuu2
2025-06-08 16:01:56,108 - app.services.usage_service - INFO - Decremented stories created for user Qbml4uDBe0O6YlYHLO4CuXFnXuu2: 4
2025-06-08 16:01:56,109 - root - INFO - [API] Decremented usage count for user Qbml4uDBe0O6YlYHLO4CuXFnXuu2
2025-06-08 16:01:56,109 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 16:01:56] "DELETE /api/stories/story_1749422838_9de66469 HTTP/1.1" 200 -
2025-06-08 16:01:57,448 - app.services.firebase_service - INFO - Retrieved story story_1749422608_3c16ff2b: Ali's Cultivation Story
2025-06-08 16:01:57,448 - app.storage.storage - INFO - Retrieved story story_1749422608_3c16ff2b: Ali's Cultivation Story
2025-06-08 16:01:57,449 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 16:01:57] "OPTIONS /api/stories/story_1749422608_3c16ff2b HTTP/1.1" 200 -
2025-06-08 16:01:57,459 - app.auth - INFO - Authentication successful for user: Qbml4uDBe0O6YlYHLO4CuXFnXuu2
2025-06-08 16:01:57,733 - app.services.firebase_service - INFO - Retrieved story story_1749422608_3c16ff2b: Ali's Cultivation Story
2025-06-08 16:01:57,734 - app.storage.storage - INFO - Retrieved story story_1749422608_3c16ff2b: Ali's Cultivation Story
2025-06-08 16:01:57,864 - app.services.firebase_service - INFO - Deleted story story_1749422608_3c16ff2b
2025-06-08 16:01:57,864 - app.storage.storage - INFO - Deleted story story_1749422608_3c16ff2b
2025-06-08 16:01:58,264 - app.services.usage_service - INFO - Updated usage for user: Qbml4uDBe0O6YlYHLO4CuXFnXuu2
2025-06-08 16:01:58,265 - app.services.usage_service - INFO - Decremented stories created for user Qbml4uDBe0O6YlYHLO4CuXFnXuu2: 3
2025-06-08 16:01:58,265 - root - INFO - [API] Decremented usage count for user Qbml4uDBe0O6YlYHLO4CuXFnXuu2
2025-06-08 16:01:58,266 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 16:01:58] "DELETE /api/stories/story_1749422608_3c16ff2b HTTP/1.1" 200 -
2025-06-08 16:01:59,639 - app.services.firebase_service - INFO - Retrieved story story_1749410338_d6e9bafd: Ali's Cultivation Story
2025-06-08 16:01:59,639 - app.storage.storage - INFO - Retrieved story story_1749410338_d6e9bafd: Ali's Cultivation Story
2025-06-08 16:01:59,640 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 16:01:59] "OPTIONS /api/stories/story_1749410338_d6e9bafd HTTP/1.1" 200 -
2025-06-08 16:01:59,660 - app.auth - INFO - Authentication successful for user: Qbml4uDBe0O6YlYHLO4CuXFnXuu2
2025-06-08 16:01:59,875 - app.services.firebase_service - INFO - Retrieved story story_1749410338_d6e9bafd: Ali's Cultivation Story
2025-06-08 16:01:59,875 - app.storage.storage - INFO - Retrieved story story_1749410338_d6e9bafd: Ali's Cultivation Story
2025-06-08 16:02:00,018 - app.services.firebase_service - INFO - Deleted story story_1749410338_d6e9bafd
2025-06-08 16:02:00,019 - app.storage.storage - INFO - Deleted story story_1749410338_d6e9bafd
2025-06-08 16:02:00,377 - app.services.usage_service - INFO - Updated usage for user: Qbml4uDBe0O6YlYHLO4CuXFnXuu2
2025-06-08 16:02:00,377 - app.services.usage_service - INFO - Decremented stories created for user Qbml4uDBe0O6YlYHLO4CuXFnXuu2: 2
2025-06-08 16:02:00,377 - root - INFO - [API] Decremented usage count for user Qbml4uDBe0O6YlYHLO4CuXFnXuu2
2025-06-08 16:02:00,378 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 16:02:00] "DELETE /api/stories/story_1749410338_d6e9bafd HTTP/1.1" 200 -
2025-06-08 16:02:01,872 - app.services.firebase_service - INFO - Retrieved story story_1749408785_87b24ce6: Ali's Cultivation Story
2025-06-08 16:02:01,873 - app.storage.storage - INFO - Retrieved story story_1749408785_87b24ce6: Ali's Cultivation Story
2025-06-08 16:02:01,874 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 16:02:01] "OPTIONS /api/stories/story_1749408785_87b24ce6 HTTP/1.1" 200 -
2025-06-08 16:02:01,877 - app.auth - INFO - Authentication successful for user: Qbml4uDBe0O6YlYHLO4CuXFnXuu2
2025-06-08 16:02:02,095 - app.services.firebase_service - INFO - Retrieved story story_1749408785_87b24ce6: Ali's Cultivation Story
2025-06-08 16:02:02,096 - app.storage.storage - INFO - Retrieved story story_1749408785_87b24ce6: Ali's Cultivation Story
2025-06-08 16:02:02,224 - app.services.firebase_service - INFO - Deleted story story_1749408785_87b24ce6
2025-06-08 16:02:02,224 - app.storage.storage - INFO - Deleted story story_1749408785_87b24ce6
2025-06-08 16:02:02,569 - app.services.usage_service - INFO - Updated usage for user: Qbml4uDBe0O6YlYHLO4CuXFnXuu2
2025-06-08 16:02:02,570 - app.services.usage_service - INFO - Decremented stories created for user Qbml4uDBe0O6YlYHLO4CuXFnXuu2: 1
2025-06-08 16:02:02,570 - root - INFO - [API] Decremented usage count for user Qbml4uDBe0O6YlYHLO4CuXFnXuu2
2025-06-08 16:02:02,571 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 16:02:02] "DELETE /api/stories/story_1749408785_87b24ce6 HTTP/1.1" 200 -
2025-06-08 16:02:04,224 - app.services.firebase_service - INFO - Retrieved story story_1749405427_33a55291: Ali's Cultivation Story
2025-06-08 16:02:04,225 - app.storage.storage - INFO - Retrieved story story_1749405427_33a55291: Ali's Cultivation Story
2025-06-08 16:02:04,226 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 16:02:04] "OPTIONS /api/stories/story_1749405427_33a55291 HTTP/1.1" 200 -
2025-06-08 16:02:04,229 - app.auth - INFO - Authentication successful for user: Qbml4uDBe0O6YlYHLO4CuXFnXuu2
2025-06-08 16:02:04,451 - app.services.firebase_service - INFO - Retrieved story story_1749405427_33a55291: Ali's Cultivation Story
2025-06-08 16:02:04,451 - app.storage.storage - INFO - Retrieved story story_1749405427_33a55291: Ali's Cultivation Story
2025-06-08 16:02:04,577 - app.services.firebase_service - INFO - Deleted story story_1749405427_33a55291
2025-06-08 16:02:04,578 - app.storage.storage - INFO - Deleted story story_1749405427_33a55291
2025-06-08 16:02:04,918 - app.services.usage_service - INFO - Updated usage for user: Qbml4uDBe0O6YlYHLO4CuXFnXuu2
2025-06-08 16:02:04,918 - app.services.usage_service - INFO - Decremented stories created for user Qbml4uDBe0O6YlYHLO4CuXFnXuu2: 0
2025-06-08 16:02:04,919 - root - INFO - [API] Decremented usage count for user Qbml4uDBe0O6YlYHLO4CuXFnXuu2
2025-06-08 16:02:04,920 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 16:02:04] "DELETE /api/stories/story_1749405427_33a55291 HTTP/1.1" 200 -
2025-06-08 16:02:17,865 - app.services.firebase_service - INFO - Retrieved 6 stories
2025-06-08 16:02:17,867 - app.storage.storage - INFO - Retrieved 6 stories
2025-06-08 16:02:17,868 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 16:02:17] "OPTIONS /api/stories HTTP/1.1" 200 -
2025-06-08 16:02:17,872 - app.auth - INFO - Authentication successful for user: Qbml4uDBe0O6YlYHLO4CuXFnXuu2
2025-06-08 16:02:18,053 - app.services.firebase_service - INFO - Retrieved 0 stories for user Qbml4uDBe0O6YlYHLO4CuXFnXuu2
2025-06-08 16:02:18,054 - app.storage.storage - INFO - Retrieved 0 stories for user Qbml4uDBe0O6YlYHLO4CuXFnXuu2
2025-06-08 16:02:18,386 - app.services.ai_service - INFO - Using cultivation_progression genre for initial story
2025-06-08 16:02:18,386 - app.models.cultivation_progression - INFO - Generating cultivation progression story for Ali
2025-06-08 16:02:18,387 - app.models.base_genre - INFO - Generating story for Ali
2025-06-08 16:02:21,597 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-08 16:02:21,603 - app.models.base_genre - INFO - ðŸŽ­ GENRE GPT RESPONSE (1768 chars):
2025-06-08 16:02:21,604 - app.models.base_genre - INFO - ============================================================
2025-06-08 16:02:21,604 - app.models.base_genre - INFO - [STORY]
Panel 1:
A sprawling ancient forest bathed in golden sunlight. Ali, a young man with determination in his eyes, stands at the edge, feeling a surge of energy from the vibrant surroundings.

Panel 2:
Ali closes his eyes, focusing his Qi. A shimmering wave of emerald green Qi flows around him, intertwining with the flora around, showcasing his connection to nature.

Panel 3:
A sudden rustling alerts Ali as a massive, shadowy figure emerges from the dense foliage. It's a colossal beast with glowing red eyes, its fur crackling with lightning Qi.

Panel 4:
Ali readies himself, his expression calm yet resolute. The beast charges, its lightning-infused claws aimed at him.

Panel 5:
Ali swiftly dodges the beast's attack, showcasing his agility and quick thinking. His movements are fluid, his Qi responding to his every command.

Panel 6:
As Ali lands a counterattack, a new technique emerges. "Heaven's Dance: Storm Fist!" A surge of azure Qi engulfs his fist, delivering a powerful blow that sends the beast staggering back.

Panel 7:
The beast roars in pain, but Ali remains composed. "I must understand its Qi to overcome it," he mutters, analyzing the lightning Qi patterns around the beast.

Panel 8:
With a newfound insight, Ali channels his own Qi in harmony with the lightning Qi, creating a dazzling fusion. The beast's eyes widen in surprise as Ali's technique overwhelms its defenses.

[CHOICES]
1. Channel the lightning Qi into a defensive shield, seeking to absorb and redirect the beast's attacks.
2. Utilize the forest's energy to enhance your speed and agility, aiming to outmaneuver the beast with swift strikes.
3. Dive deeper into the beast's Qi patterns, attempting to unravel its source and weakness to exploit in the battle.
[/CHOICES]
2025-06-08 16:02:21,604 - app.models.base_genre - INFO - ============================================================
2025-06-08 16:02:21,606 - app.models.base_genre - INFO - Successfully parsed genre response: story=1409 chars, choices=3
2025-06-08 16:02:21,724 - app.services.firebase_service - INFO - Saved story story_1749423741_9cdc5997: Ali's Cultivation Story
2025-06-08 16:02:21,724 - app.storage.storage - INFO - Saved story story_1749423741_9cdc5997: Ali's Cultivation Story
2025-06-08 16:02:21,725 - app.storage.storage - INFO - Created new story: story_1749423741_9cdc5997: Ali's Cultivation Story
2025-06-08 16:02:22,124 - app.services.usage_service - INFO - Updated usage for user: Qbml4uDBe0O6YlYHLO4CuXFnXuu2
2025-06-08 16:02:22,656 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 16:02:22] "POST /api/stories HTTP/1.1" 200 -
2025-06-08 16:02:22,847 - app.services.firebase_service - INFO - Retrieved story story_1749423741_9cdc5997: Ali's Cultivation Story
2025-06-08 16:02:22,847 - app.storage.storage - INFO - Retrieved story story_1749423741_9cdc5997: Ali's Cultivation Story
2025-06-08 16:02:22,848 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 16:02:22] "OPTIONS /api/stories/story_1749423741_9cdc5997 HTTP/1.1" 200 -
2025-06-08 16:02:23,072 - app.services.firebase_service - INFO - Retrieved story story_1749423741_9cdc5997: Ali's Cultivation Story
2025-06-08 16:02:23,073 - app.storage.storage - INFO - Retrieved story story_1749423741_9cdc5997: Ali's Cultivation Story
2025-06-08 16:02:23,075 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 16:02:23] "OPTIONS /api/stories/story_1749423741_9cdc5997 HTTP/1.1" 200 -
2025-06-08 16:02:23,077 - app.services.firebase_service - INFO - Retrieved story story_1749423741_9cdc5997: Ali's Cultivation Story
2025-06-08 16:02:23,077 - app.storage.storage - INFO - Retrieved story story_1749423741_9cdc5997: Ali's Cultivation Story
2025-06-08 16:02:23,078 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 16:02:23] "GET /api/stories/story_1749423741_9cdc5997 HTTP/1.1" 200 -
2025-06-08 16:02:23,175 - app.services.firebase_service - INFO - Retrieved story story_1749423741_9cdc5997: Ali's Cultivation Story
2025-06-08 16:02:23,175 - app.storage.storage - INFO - Retrieved story story_1749423741_9cdc5997: Ali's Cultivation Story
2025-06-08 16:02:23,176 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 16:02:23] "GET /api/stories/story_1749423741_9cdc5997 HTTP/1.1" 200 -
2025-06-08 16:02:29,123 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 16:02:29] "OPTIONS /api/stories/story_1749423741_9cdc5997/choices/1 HTTP/1.1" 200 -
2025-06-08 16:02:29,125 - app.auth - INFO - Authentication successful for user: Qbml4uDBe0O6YlYHLO4CuXFnXuu2
2025-06-08 16:02:29,221 - app.services.firebase_service - INFO - Retrieved story story_1749423741_9cdc5997: Ali's Cultivation Story
2025-06-08 16:02:29,222 - app.storage.storage - INFO - Retrieved story story_1749423741_9cdc5997: Ali's Cultivation Story
2025-06-08 16:02:29,825 - app.services.usage_service - INFO - Updated usage for user: Qbml4uDBe0O6YlYHLO4CuXFnXuu2
2025-06-08 16:02:29,937 - app.services.firebase_service - INFO - Retrieved story story_1749423741_9cdc5997: Ali's Cultivation Story
2025-06-08 16:02:29,937 - app.storage.storage - INFO - Retrieved story story_1749423741_9cdc5997: Ali's Cultivation Story
2025-06-08 16:02:30,300 - app.services.firebase_service - INFO - Saved story story_1749423741_9cdc5997: Ali's Cultivation Story
2025-06-08 16:02:30,300 - app.storage.storage - INFO - Saved story story_1749423741_9cdc5997: Ali's Cultivation Story
2025-06-08 16:02:30,301 - app.storage.storage - INFO - Saved choice 1 for node initial in story story_1749423741_9cdc5997
2025-06-08 16:02:30,301 - app.services.ai_service - INFO - Using cultivation_progression genre for story continuation
2025-06-08 16:02:30,301 - app.models.cultivation_progression - INFO - Continuing cultivation progression story for Ali
2025-06-08 16:02:30,301 - app.models.base_genre - INFO - Generating story for Ali
2025-06-08 16:02:33,454 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-08 16:02:33,459 - app.models.base_genre - INFO - ðŸŽ­ GENRE GPT RESPONSE (1792 chars):
2025-06-08 16:02:33,459 - app.models.base_genre - INFO - ============================================================
2025-06-08 16:02:33,460 - app.models.base_genre - INFO - [STORY]
Panel 1:
Ali concentrates, drawing in the crackling lightning Qi surrounding the beast. His aura shimmers as he forms a glowing shield in front of him, ready to absorb the incoming attack.
Panel 2:
The beast lashes out with a barrage of lightning strikes, each one crashing against Ali's shield. The shield vibrates with each impact, but Ali stands firm, determination etched on his face.
Panel 3:
As the last lightning strike hits the shield, Ali channels the absorbed energy through his veins. His eyes glow with determination as he redirects the energy back towards the beast.
Panel 4:
The redirected lightning surges towards the beast, enveloping it in a blinding flash of light. The creature howls in pain, its fur singed and smoking from the overwhelming power.
Panel 5:
Ali takes a step forward, his confidence growing. "I can control the power of lightning," he realizes, feeling a surge of exhilaration at this newfound ability.
Panel 6:
The beast, weakened but not defeated, glares at Ali with newfound respect. "You are unlike any cultivator I have faced," it growls, a hint of admiration in its tone.
Panel 7:
Ali nods, acknowledging the beast's words. "We must coexist in this world, finding balance between us," he replies, extending a hand towards the beast in a gesture of peace.
Panel 8:
The beast hesitates, then gently touches Ali's outstretched hand with its massive paw. A bond of understanding forms between them, a connection that transcends mere conflict.
[/STORY]

[CHOICES]
1. Offer to teach the beast about cultivation techniques, fostering a new alliance.
2. Meditate together with the beast to deepen the understanding of each other's Qi.
3. Propose a joint exploration of the forest to uncover hidden secrets about their intertwined destinies.
[/CHOICES]
2025-06-08 16:02:33,460 - app.models.base_genre - INFO - ============================================================
2025-06-08 16:02:33,460 - app.models.base_genre - INFO - Successfully parsed genre response: story=1479 chars, choices=3
2025-06-08 16:02:33,547 - app.services.firebase_service - INFO - Retrieved story story_1749423741_9cdc5997: Ali's Cultivation Story
2025-06-08 16:02:33,548 - app.storage.storage - INFO - Retrieved story story_1749423741_9cdc5997: Ali's Cultivation Story
2025-06-08 16:02:33,882 - app.services.firebase_service - INFO - Saved story story_1749423741_9cdc5997: Ali's Cultivation Story
2025-06-08 16:02:33,882 - app.storage.storage - INFO - Saved story story_1749423741_9cdc5997: Ali's Cultivation Story
2025-06-08 16:02:33,882 - app.storage.storage - INFO - Added node node_2461549984 to story story_1749423741_9cdc5997
2025-06-08 16:02:34,295 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 16:02:34] "POST /api/stories/story_1749423741_9cdc5997/choices/1 HTTP/1.1" 200 -
2025-06-08 16:12:07,720 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/academy_magic.py', reloading
2025-06-08 16:12:07,721 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/academy_magic.py', reloading
2025-06-08 16:12:10,723 - werkzeug - INFO -  * Restarting with watchdog (fsevents)
2025-06-08 16:12:11,339 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-08 16:12:11,466 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-08 16:12:11,466 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-08 16:12:11,470 - root - INFO - Starting StoryTeller API server...
2025-06-08 16:12:11,470 - root - INFO - Host: 0.0.0.0
2025-06-08 16:12:11,470 - root - INFO - Port: 5001
2025-06-08 16:12:11,470 - root - INFO - Debug mode: True
2025-06-08 16:12:11,473 - werkzeug - WARNING -  * Debugger is active!
2025-06-08 16:12:11,481 - werkzeug - INFO -  * Debugger PIN: 770-745-223
2025-06-08 16:14:27,568 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/models/academy_magic.py', reloading
2025-06-08 16:14:27,568 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/academy_magic.py', reloading
2025-06-08 16:14:28,565 - werkzeug - INFO -  * Restarting with watchdog (fsevents)
2025-06-08 16:14:29,157 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-08 16:19:30,441 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-08 16:22:15,756 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-08 16:22:15,907 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-08 16:22:15,908 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-08 16:22:15,911 - root - INFO - Starting StoryTeller API server...
2025-06-08 16:22:15,911 - root - INFO - Host: 0.0.0.0
2025-06-08 16:22:15,911 - root - INFO - Port: 5001
2025-06-08 16:22:15,911 - root - INFO - Debug mode: True
2025-06-08 16:22:15,917 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5001
 * Running on http://10.0.0.243:5001
2025-06-08 16:22:15,917 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-08 16:22:15,923 - werkzeug - INFO -  * Restarting with watchdog (fsevents)
2025-06-08 16:22:16,304 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-08 16:22:16,395 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-08 16:22:16,395 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-08 16:22:16,400 - root - INFO - Starting StoryTeller API server...
2025-06-08 16:22:16,400 - root - INFO - Host: 0.0.0.0
2025-06-08 16:22:16,400 - root - INFO - Port: 5001
2025-06-08 16:22:16,400 - root - INFO - Debug mode: True
2025-06-08 16:22:16,402 - werkzeug - WARNING -  * Debugger is active!
2025-06-08 16:22:16,409 - werkzeug - INFO -  * Debugger PIN: 770-745-223
2025-06-08 16:22:27,312 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-08 16:22:27,402 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-08 16:22:27,402 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-08 16:22:27,405 - root - INFO - Starting StoryTeller API server...
2025-06-08 16:22:27,405 - root - INFO - Host: 0.0.0.0
2025-06-08 16:22:27,405 - root - INFO - Port: 5001
2025-06-08 16:22:27,405 - root - INFO - Debug mode: True
2025-06-08 16:22:27,411 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5001
 * Running on http://10.0.0.243:5001
2025-06-08 16:22:27,411 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-08 16:22:27,413 - werkzeug - INFO -  * Restarting with watchdog (fsevents)
2025-06-08 16:22:27,780 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-08 16:22:27,871 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-08 16:22:27,871 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-08 16:22:27,875 - root - INFO - Starting StoryTeller API server...
2025-06-08 16:22:27,875 - root - INFO - Host: 0.0.0.0
2025-06-08 16:22:27,875 - root - INFO - Port: 5001
2025-06-08 16:22:27,875 - root - INFO - Debug mode: True
2025-06-08 16:22:27,877 - werkzeug - WARNING -  * Debugger is active!
2025-06-08 16:22:27,884 - werkzeug - INFO -  * Debugger PIN: 770-745-223
2025-06-08 16:22:29,259 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 16:22:29] "GET /api/status HTTP/1.1" 200 -
2025-06-08 16:26:06,931 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/services/ai_service_old.py', reloading
2025-06-08 16:26:07,601 - werkzeug - INFO -  * Restarting with watchdog (fsevents)
2025-06-08 16:26:08,150 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-08 16:48:57,524 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-08 16:48:57,622 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-08 16:48:57,622 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-08 16:48:57,641 - root - INFO - Starting StoryTeller API server...
2025-06-08 16:48:57,641 - root - INFO - Host: 0.0.0.0
2025-06-08 16:48:57,641 - root - INFO - Port: 5001
2025-06-08 16:48:57,642 - root - INFO - Debug mode: True
2025-06-08 16:48:57,648 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5001
 * Running on http://10.0.0.243:5001
2025-06-08 16:48:57,648 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-08 16:48:57,653 - werkzeug - INFO -  * Restarting with watchdog (fsevents)
2025-06-08 16:48:58,014 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-08 16:48:58,072 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-08 16:48:58,072 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-08 16:48:58,090 - root - INFO - Starting StoryTeller API server...
2025-06-08 16:48:58,090 - root - INFO - Host: 0.0.0.0
2025-06-08 16:48:58,090 - root - INFO - Port: 5001
2025-06-08 16:48:58,090 - root - INFO - Debug mode: True
2025-06-08 16:48:58,092 - werkzeug - WARNING -  * Debugger is active!
2025-06-08 16:48:58,100 - werkzeug - INFO -  * Debugger PIN: 770-745-223
2025-06-08 16:50:22,841 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/models/models.py', reloading
2025-06-08 16:50:23,782 - werkzeug - INFO -  * Restarting with watchdog (fsevents)
2025-06-08 16:50:24,380 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-08 16:50:24,478 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-08 16:50:24,478 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-08 16:50:24,505 - root - INFO - Starting StoryTeller API server...
2025-06-08 16:50:24,505 - root - INFO - Host: 0.0.0.0
2025-06-08 16:50:24,505 - root - INFO - Port: 5001
2025-06-08 16:50:24,506 - root - INFO - Debug mode: True
2025-06-08 16:50:24,510 - werkzeug - WARNING -  * Debugger is active!
2025-06-08 16:50:24,518 - werkzeug - INFO -  * Debugger PIN: 770-745-223
2025-06-08 16:50:32,135 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/models/models.py', reloading
2025-06-08 16:50:32,138 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/models/models.py', reloading
2025-06-08 16:50:32,636 - werkzeug - INFO -  * Restarting with watchdog (fsevents)
2025-06-08 16:50:33,078 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-08 16:50:33,167 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-08 16:50:33,167 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-08 16:50:33,171 - root - INFO - Starting StoryTeller API server...
2025-06-08 16:50:33,171 - root - INFO - Host: 0.0.0.0
2025-06-08 16:50:33,171 - root - INFO - Port: 5001
2025-06-08 16:50:33,171 - root - INFO - Debug mode: True
2025-06-08 16:50:33,173 - werkzeug - WARNING -  * Debugger is active!
2025-06-08 16:50:33,180 - werkzeug - INFO -  * Debugger PIN: 770-745-223
2025-06-08 16:51:08,514 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/models/models.py', reloading
2025-06-08 16:51:08,523 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/models/models.py', reloading
2025-06-08 16:51:09,466 - werkzeug - INFO -  * Restarting with watchdog (fsevents)
2025-06-08 16:51:09,904 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-08 16:51:09,965 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-08 16:51:09,965 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-08 16:51:09,982 - root - INFO - Starting StoryTeller API server...
2025-06-08 16:51:09,982 - root - INFO - Host: 0.0.0.0
2025-06-08 16:51:09,982 - root - INFO - Port: 5001
2025-06-08 16:51:09,982 - root - INFO - Debug mode: True
2025-06-08 16:51:09,984 - werkzeug - WARNING -  * Debugger is active!
2025-06-08 16:51:09,991 - werkzeug - INFO -  * Debugger PIN: 770-745-223
2025-06-08 16:51:23,390 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/services/story_planner.py', reloading
2025-06-08 16:51:23,390 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/services/story_planner.py', reloading
2025-06-08 16:51:24,165 - werkzeug - INFO -  * Restarting with watchdog (fsevents)
2025-06-08 16:51:24,651 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-08 16:51:24,908 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-08 16:51:24,908 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-08 16:51:24,937 - root - INFO - Starting StoryTeller API server...
2025-06-08 16:51:24,938 - root - INFO - Host: 0.0.0.0
2025-06-08 16:51:24,938 - root - INFO - Port: 5001
2025-06-08 16:51:24,938 - root - INFO - Debug mode: True
2025-06-08 16:51:24,942 - werkzeug - WARNING -  * Debugger is active!
2025-06-08 16:51:24,950 - werkzeug - INFO -  * Debugger PIN: 770-745-223
2025-06-08 16:56:15,605 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/services/story_planner.py', reloading
2025-06-08 16:56:16,117 - werkzeug - INFO -  * Restarting with watchdog (fsevents)
2025-06-08 16:56:16,699 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-08 16:56:16,790 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-08 16:56:16,790 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-08 16:56:16,807 - root - INFO - Starting StoryTeller API server...
2025-06-08 16:56:16,807 - root - INFO - Host: 0.0.0.0
2025-06-08 16:56:16,807 - root - INFO - Port: 5001
2025-06-08 16:56:16,807 - root - INFO - Debug mode: True
2025-06-08 16:56:16,810 - werkzeug - WARNING -  * Debugger is active!
2025-06-08 16:56:16,817 - werkzeug - INFO -  * Debugger PIN: 770-745-223
2025-06-08 16:56:46,388 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/services/ai_service.py', reloading
2025-06-08 16:56:46,398 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/services/ai_service.py', reloading
2025-06-08 16:56:47,109 - werkzeug - INFO -  * Restarting with watchdog (fsevents)
2025-06-08 16:56:47,649 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-08 16:56:47,734 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-08 16:56:47,734 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-08 16:56:47,752 - root - INFO - Starting StoryTeller API server...
2025-06-08 16:56:47,752 - root - INFO - Host: 0.0.0.0
2025-06-08 16:56:47,752 - root - INFO - Port: 5001
2025-06-08 16:56:47,752 - root - INFO - Debug mode: True
2025-06-08 16:56:47,755 - werkzeug - WARNING -  * Debugger is active!
2025-06-08 16:56:47,761 - werkzeug - INFO -  * Debugger PIN: 770-745-223
2025-06-08 16:56:55,413 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/services/ai_service.py', reloading
2025-06-08 16:56:55,881 - werkzeug - INFO -  * Restarting with watchdog (fsevents)
2025-06-08 16:56:56,411 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-08 16:56:56,499 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-08 16:56:56,500 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-08 16:56:56,519 - root - INFO - Starting StoryTeller API server...
2025-06-08 16:56:56,519 - root - INFO - Host: 0.0.0.0
2025-06-08 16:56:56,519 - root - INFO - Port: 5001
2025-06-08 16:56:56,519 - root - INFO - Debug mode: True
2025-06-08 16:56:56,521 - werkzeug - WARNING -  * Debugger is active!
2025-06-08 16:56:56,528 - werkzeug - INFO -  * Debugger PIN: 770-745-223
2025-06-08 17:00:06,885 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/ai_service_temp.py', reloading
2025-06-08 17:00:06,885 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/ai_service_temp.py', reloading
2025-06-08 17:00:07,005 - werkzeug - INFO -  * Restarting with watchdog (fsevents)
2025-06-08 17:00:07,620 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-08 17:00:07,714 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-08 17:00:07,714 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-08 17:00:07,733 - root - INFO - Starting StoryTeller API server...
2025-06-08 17:00:07,733 - root - INFO - Host: 0.0.0.0
2025-06-08 17:00:07,733 - root - INFO - Port: 5001
2025-06-08 17:00:07,733 - root - INFO - Debug mode: True
2025-06-08 17:00:07,736 - werkzeug - WARNING -  * Debugger is active!
2025-06-08 17:00:07,743 - werkzeug - INFO -  * Debugger PIN: 770-745-223
2025-06-08 17:01:53,446 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/services/ai_service.py', reloading
2025-06-08 17:01:53,584 - werkzeug - INFO -  * Restarting with watchdog (fsevents)
2025-06-08 17:01:53,978 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-08 17:01:54,040 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-08 17:01:54,040 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-08 17:01:54,058 - root - INFO - Starting StoryTeller API server...
2025-06-08 17:01:54,058 - root - INFO - Host: 0.0.0.0
2025-06-08 17:01:54,058 - root - INFO - Port: 5001
2025-06-08 17:01:54,058 - root - INFO - Debug mode: True
2025-06-08 17:01:54,060 - werkzeug - WARNING -  * Debugger is active!
2025-06-08 17:01:54,066 - werkzeug - INFO -  * Debugger PIN: 770-745-223
2025-06-08 17:05:00,551 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/services/story_planner.py', reloading
2025-06-08 17:05:01,618 - werkzeug - INFO -  * Restarting with watchdog (fsevents)
2025-06-08 17:05:02,192 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-08 17:05:02,286 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-08 17:05:02,286 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-08 17:05:02,306 - root - INFO - Starting StoryTeller API server...
2025-06-08 17:05:02,306 - root - INFO - Host: 0.0.0.0
2025-06-08 17:05:02,306 - root - INFO - Port: 5001
2025-06-08 17:05:02,306 - root - INFO - Debug mode: True
2025-06-08 17:05:02,309 - werkzeug - WARNING -  * Debugger is active!
2025-06-08 17:05:02,317 - werkzeug - INFO -  * Debugger PIN: 770-745-223
2025-06-08 17:08:39,330 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_progression.py', reloading
2025-06-08 17:08:40,021 - werkzeug - INFO -  * Restarting with watchdog (fsevents)
2025-06-08 17:08:40,687 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-08 17:08:40,788 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-08 17:08:40,788 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-08 17:08:40,807 - root - INFO - Starting StoryTeller API server...
2025-06-08 17:08:40,807 - root - INFO - Host: 0.0.0.0
2025-06-08 17:08:40,807 - root - INFO - Port: 5001
2025-06-08 17:08:40,807 - root - INFO - Debug mode: True
2025-06-08 17:08:40,810 - werkzeug - WARNING -  * Debugger is active!
2025-06-08 17:08:40,819 - werkzeug - INFO -  * Debugger PIN: 770-745-223
2025-06-08 17:11:33,044 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/fantasy_adventure.py', reloading
2025-06-08 17:11:33,170 - werkzeug - INFO -  * Restarting with watchdog (fsevents)
2025-06-08 17:11:33,981 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-08 17:11:34,084 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-08 17:11:34,084 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-08 17:11:34,104 - root - INFO - Starting StoryTeller API server...
2025-06-08 17:11:34,104 - root - INFO - Host: 0.0.0.0
2025-06-08 17:11:34,104 - root - INFO - Port: 5001
2025-06-08 17:11:34,104 - root - INFO - Debug mode: True
2025-06-08 17:11:34,107 - werkzeug - WARNING -  * Debugger is active!
2025-06-08 17:11:34,115 - werkzeug - INFO -  * Debugger PIN: 770-745-223
2025-06-08 17:12:38,477 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/fantasy_adventure.py', reloading
2025-06-08 17:12:38,591 - werkzeug - INFO -  * Restarting with watchdog (fsevents)
2025-06-08 17:12:39,092 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-08 17:12:39,155 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-08 17:12:39,155 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-08 17:12:39,175 - root - INFO - Starting StoryTeller API server...
2025-06-08 17:12:39,175 - root - INFO - Host: 0.0.0.0
2025-06-08 17:12:39,175 - root - INFO - Port: 5001
2025-06-08 17:12:39,175 - root - INFO - Debug mode: True
2025-06-08 17:12:39,177 - werkzeug - WARNING -  * Debugger is active!
2025-06-08 17:12:39,183 - werkzeug - INFO -  * Debugger PIN: 770-745-223
2025-06-08 17:12:47,459 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/.!72795!academy_magic.py', reloading
2025-06-08 17:12:47,459 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/.!72795!academy_magic.py', reloading
2025-06-08 17:12:47,459 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/.!72795!academy_magic.py', reloading
2025-06-08 17:12:47,459 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/academy_magic.py', reloading
2025-06-08 17:12:48,328 - werkzeug - INFO -  * Restarting with watchdog (fsevents)
2025-06-08 17:12:48,805 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-08 20:30:54,539 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-08 20:30:54,918 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-08 20:30:54,918 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-08 20:30:54,922 - root - INFO - Starting StoryTeller API server...
2025-06-08 20:30:54,922 - root - INFO - Host: 0.0.0.0
2025-06-08 20:30:54,922 - root - INFO - Port: 5001
2025-06-08 20:30:54,922 - root - INFO - Debug mode: True
2025-06-08 20:30:54,934 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5001
 * Running on http://10.0.0.243:5001
2025-06-08 20:30:54,934 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-08 20:30:54,939 - werkzeug - INFO -  * Restarting with watchdog (fsevents)
2025-06-08 20:30:55,342 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-08 20:30:55,413 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-08 20:30:55,413 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-08 20:30:55,416 - root - INFO - Starting StoryTeller API server...
2025-06-08 20:30:55,416 - root - INFO - Host: 0.0.0.0
2025-06-08 20:30:55,416 - root - INFO - Port: 5001
2025-06-08 20:30:55,416 - root - INFO - Debug mode: True
2025-06-08 20:30:55,418 - werkzeug - WARNING -  * Debugger is active!
2025-06-08 20:30:55,427 - werkzeug - INFO -  * Debugger PIN: 770-745-223
2025-06-08 20:31:00,198 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 20:31:00] "OPTIONS /api/status HTTP/1.1" 200 -
2025-06-08 20:31:00,199 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 20:31:00] "OPTIONS /api/status HTTP/1.1" 200 -
2025-06-08 20:31:00,201 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 20:31:00] "GET /api/status HTTP/1.1" 200 -
2025-06-08 20:31:00,202 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 20:31:00] "GET /api/status HTTP/1.1" 200 -
2025-06-08 20:31:03,662 - app.services.firebase_service - INFO - Retrieved 7 stories
2025-06-08 20:31:03,664 - app.storage.storage - INFO - Retrieved 7 stories
2025-06-08 20:31:03,665 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 20:31:03] "OPTIONS /api/stories HTTP/1.1" 200 -
2025-06-08 20:31:03,759 - app.services.firebase_service - INFO - Retrieved 7 stories
2025-06-08 20:31:03,759 - app.storage.storage - INFO - Retrieved 7 stories
2025-06-08 20:31:03,760 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 20:31:03] "OPTIONS /api/stories HTTP/1.1" 200 -
2025-06-08 20:31:03,824 - app.services.firebase_service - INFO - Retrieved 1 stories for user Qbml4uDBe0O6YlYHLO4CuXFnXuu2
2025-06-08 20:31:03,825 - app.storage.storage - INFO - Retrieved 1 stories for user Qbml4uDBe0O6YlYHLO4CuXFnXuu2
2025-06-08 20:31:03,826 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 20:31:03] "GET /api/stories HTTP/1.1" 200 -
2025-06-08 20:31:03,955 - app.services.firebase_service - INFO - Retrieved 1 stories for user Qbml4uDBe0O6YlYHLO4CuXFnXuu2
2025-06-08 20:31:03,955 - app.storage.storage - INFO - Retrieved 1 stories for user Qbml4uDBe0O6YlYHLO4CuXFnXuu2
2025-06-08 20:31:03,956 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 20:31:03] "GET /api/stories HTTP/1.1" 200 -
2025-06-08 20:31:20,303 - app.services.firebase_service - INFO - Retrieved 7 stories
2025-06-08 20:31:20,303 - app.storage.storage - INFO - Retrieved 7 stories
2025-06-08 20:31:20,304 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 20:31:20] "OPTIONS /api/stories HTTP/1.1" 200 -
2025-06-08 20:31:20,308 - app.auth - INFO - Authentication successful for user: Qbml4uDBe0O6YlYHLO4CuXFnXuu2
2025-06-08 20:31:20,447 - app.services.firebase_service - INFO - Retrieved 1 stories for user Qbml4uDBe0O6YlYHLO4CuXFnXuu2
2025-06-08 20:31:20,448 - app.storage.storage - INFO - Retrieved 1 stories for user Qbml4uDBe0O6YlYHLO4CuXFnXuu2
2025-06-08 20:31:20,677 - app.services.ai_service - INFO - Generated big story goal: Unite the fractured martial clans under one rule.
2025-06-08 20:31:20,678 - app.services.ai_service - INFO - Using cultivation_progression genre for initial story
2025-06-08 20:31:20,678 - app.services.story_planner - INFO - Generated new arc goal: 'Survive assassination attempts from rival clans.' for theme: 'unite_martial_clans'
2025-06-08 20:31:20,678 - app.genres.cultivation_progression - ERROR - Error generating initial arc goal: "CultivationProgression" object has no field "initial_arc_goal"
2025-06-08 20:31:20,678 - app.services.ai_service - ERROR - Error generating initial story: "CultivationProgression" object has no field "initial_arc_goal"
2025-06-08 20:31:20,679 - app.services.story_planner - INFO - Generated new arc goal: 'Gain the title of Core Disciple.' for theme: 'revenge'
2025-06-08 20:31:20,679 - app.storage.storage - INFO - Initialized memory with big goal: 'Revenge on the Sect Leader who betrayed their family.' and arc goal: 'Gain the title of Core Disciple.'
2025-06-08 20:31:20,815 - app.services.firebase_service - INFO - Saved story story_1749439880_9d598f64: Ali's Cultivation Story
2025-06-08 20:31:20,815 - app.storage.storage - INFO - Saved story story_1749439880_9d598f64: Ali's Cultivation Story
2025-06-08 20:31:20,815 - app.storage.storage - INFO - Created new story: story_1749439880_9d598f64: Ali's Cultivation Story
2025-06-08 20:31:21,061 - app.services.usage_service - INFO - Updated usage for user: Qbml4uDBe0O6YlYHLO4CuXFnXuu2
2025-06-08 20:31:21,388 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 20:31:21] "POST /api/stories HTTP/1.1" 200 -
2025-06-08 20:31:21,572 - app.services.firebase_service - INFO - Retrieved story story_1749439880_9d598f64: Ali's Cultivation Story
2025-06-08 20:31:21,572 - app.storage.storage - INFO - Retrieved story story_1749439880_9d598f64: Ali's Cultivation Story
2025-06-08 20:31:21,574 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 20:31:21] "OPTIONS /api/stories/story_1749439880_9d598f64 HTTP/1.1" 200 -
2025-06-08 20:31:21,585 - app.services.firebase_service - INFO - Retrieved story story_1749439880_9d598f64: Ali's Cultivation Story
2025-06-08 20:31:21,586 - app.storage.storage - INFO - Retrieved story story_1749439880_9d598f64: Ali's Cultivation Story
2025-06-08 20:31:21,587 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 20:31:21] "OPTIONS /api/stories/story_1749439880_9d598f64 HTTP/1.1" 200 -
2025-06-08 20:31:21,674 - app.services.firebase_service - INFO - Retrieved story story_1749439880_9d598f64: Ali's Cultivation Story
2025-06-08 20:31:21,675 - app.storage.storage - INFO - Retrieved story story_1749439880_9d598f64: Ali's Cultivation Story
2025-06-08 20:31:21,676 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 20:31:21] "GET /api/stories/story_1749439880_9d598f64 HTTP/1.1" 200 -
2025-06-08 20:31:21,776 - app.services.firebase_service - INFO - Retrieved story story_1749439880_9d598f64: Ali's Cultivation Story
2025-06-08 20:31:21,777 - app.storage.storage - INFO - Retrieved story story_1749439880_9d598f64: Ali's Cultivation Story
2025-06-08 20:31:21,778 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 20:31:21] "GET /api/stories/story_1749439880_9d598f64 HTTP/1.1" 200 -
2025-06-08 20:35:08,080 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_progression.py', reloading
2025-06-08 20:35:10,481 - werkzeug - INFO -  * Restarting with watchdog (fsevents)
2025-06-08 20:35:11,064 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-08 20:35:11,179 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-08 20:35:11,179 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-08 20:35:11,182 - root - INFO - Starting StoryTeller API server...
2025-06-08 20:35:11,182 - root - INFO - Host: 0.0.0.0
2025-06-08 20:35:11,182 - root - INFO - Port: 5001
2025-06-08 20:35:11,182 - root - INFO - Debug mode: True
2025-06-08 20:35:11,185 - werkzeug - WARNING -  * Debugger is active!
2025-06-08 20:35:11,195 - werkzeug - INFO -  * Debugger PIN: 770-745-223
2025-06-08 20:35:20,488 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_progression.py', reloading
2025-06-08 20:35:20,491 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_progression.py', reloading
2025-06-08 20:35:21,328 - werkzeug - INFO -  * Restarting with watchdog (fsevents)
2025-06-08 20:35:21,859 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-08 20:35:21,958 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-08 20:35:21,958 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-08 20:35:21,962 - root - INFO - Starting StoryTeller API server...
2025-06-08 20:35:21,962 - root - INFO - Host: 0.0.0.0
2025-06-08 20:35:21,962 - root - INFO - Port: 5001
2025-06-08 20:35:21,962 - root - INFO - Debug mode: True
2025-06-08 20:35:21,964 - werkzeug - WARNING -  * Debugger is active!
2025-06-08 20:35:21,971 - werkzeug - INFO -  * Debugger PIN: 770-745-223
2025-06-08 20:35:30,785 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/storage/storage.py', reloading
2025-06-08 20:35:30,795 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/storage/storage.py', reloading
2025-06-08 20:35:31,103 - werkzeug - INFO -  * Restarting with watchdog (fsevents)
2025-06-08 20:35:31,555 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-08 20:35:31,635 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-08 20:35:31,635 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-08 20:35:31,638 - root - INFO - Starting StoryTeller API server...
2025-06-08 20:35:31,638 - root - INFO - Host: 0.0.0.0
2025-06-08 20:35:31,638 - root - INFO - Port: 5001
2025-06-08 20:35:31,638 - root - INFO - Debug mode: True
2025-06-08 20:35:31,640 - werkzeug - WARNING -  * Debugger is active!
2025-06-08 20:35:31,647 - werkzeug - INFO -  * Debugger PIN: 770-745-223
2025-06-08 20:35:45,196 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/services/ai_service.py', reloading
2025-06-08 20:35:45,207 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/services/ai_service.py', reloading
2025-06-08 20:35:45,816 - werkzeug - INFO -  * Restarting with watchdog (fsevents)
2025-06-08 20:35:46,204 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-08 20:35:46,281 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-08 20:35:46,281 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-08 20:35:46,284 - root - INFO - Starting StoryTeller API server...
2025-06-08 20:35:46,284 - root - INFO - Host: 0.0.0.0
2025-06-08 20:35:46,284 - root - INFO - Port: 5001
2025-06-08 20:35:46,284 - root - INFO - Debug mode: True
2025-06-08 20:35:46,286 - werkzeug - WARNING -  * Debugger is active!
2025-06-08 20:35:46,292 - werkzeug - INFO -  * Debugger PIN: 770-745-223
2025-06-08 20:35:57,645 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/services/ai_service.py', reloading
2025-06-08 20:35:58,453 - werkzeug - INFO -  * Restarting with watchdog (fsevents)
2025-06-08 20:35:58,816 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-08 20:35:58,889 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-08 20:35:58,890 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-08 20:35:58,893 - root - INFO - Starting StoryTeller API server...
2025-06-08 20:35:58,893 - root - INFO - Host: 0.0.0.0
2025-06-08 20:35:58,893 - root - INFO - Port: 5001
2025-06-08 20:35:58,893 - root - INFO - Debug mode: True
2025-06-08 20:35:58,895 - werkzeug - WARNING -  * Debugger is active!
2025-06-08 20:35:58,901 - werkzeug - INFO -  * Debugger PIN: 770-745-223
2025-06-08 20:37:31,184 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 20:37:31] "OPTIONS /api/status HTTP/1.1" 200 -
2025-06-08 20:37:31,185 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 20:37:31] "OPTIONS /api/status HTTP/1.1" 200 -
2025-06-08 20:37:31,189 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 20:37:31] "GET /api/status HTTP/1.1" 200 -
2025-06-08 20:37:31,191 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 20:37:31] "GET /api/status HTTP/1.1" 200 -
2025-06-08 20:37:42,021 - app.services.firebase_service - INFO - Retrieved 8 stories
2025-06-08 20:37:42,022 - app.storage.storage - INFO - Retrieved 8 stories
2025-06-08 20:37:42,023 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 20:37:42] "OPTIONS /api/stories HTTP/1.1" 200 -
2025-06-08 20:37:42,027 - app.auth - INFO - Authentication successful for user: Qbml4uDBe0O6YlYHLO4CuXFnXuu2
2025-06-08 20:37:42,184 - app.services.firebase_service - INFO - Retrieved 2 stories for user Qbml4uDBe0O6YlYHLO4CuXFnXuu2
2025-06-08 20:37:42,184 - app.storage.storage - INFO - Retrieved 2 stories for user Qbml4uDBe0O6YlYHLO4CuXFnXuu2
2025-06-08 20:37:42,531 - app.services.ai_service - INFO - Generated big story goal: Recover the legendary artifact sealed by ancient cultivators.
2025-06-08 20:37:42,531 - app.services.ai_service - ERROR - Error generating initial story: "CultivationProgression" object has no field "initial_arc_goal"
2025-06-08 20:37:42,532 - app.storage.storage - ERROR - Error initializing arc goal: "CultivationProgression" object has no field "initial_arc_goal"
2025-06-08 20:37:42,532 - app.storage.storage - INFO - Set fallback arc goal: Survive the sect's brutal outer disciple training.
2025-06-08 20:37:42,731 - app.services.firebase_service - INFO - Saved story story_1749440262_0ff29d30: Ali's Cultivation Story
2025-06-08 20:37:42,731 - app.storage.storage - INFO - Saved story story_1749440262_0ff29d30: Ali's Cultivation Story
2025-06-08 20:37:42,731 - app.storage.storage - INFO - Created new story: story_1749440262_0ff29d30: Ali's Cultivation Story
2025-06-08 20:37:43,085 - app.services.usage_service - INFO - Updated usage for user: Qbml4uDBe0O6YlYHLO4CuXFnXuu2
2025-06-08 20:37:43,520 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 20:37:43] "POST /api/stories HTTP/1.1" 200 -
2025-06-08 20:37:43,734 - app.services.firebase_service - INFO - Retrieved story story_1749440262_0ff29d30: Ali's Cultivation Story
2025-06-08 20:37:43,735 - app.storage.storage - INFO - Retrieved story story_1749440262_0ff29d30: Ali's Cultivation Story
2025-06-08 20:37:43,736 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 20:37:43] "OPTIONS /api/stories/story_1749440262_0ff29d30 HTTP/1.1" 200 -
2025-06-08 20:37:43,938 - app.services.firebase_service - INFO - Retrieved story story_1749440262_0ff29d30: Ali's Cultivation Story
2025-06-08 20:37:43,940 - app.storage.storage - INFO - Retrieved story story_1749440262_0ff29d30: Ali's Cultivation Story
2025-06-08 20:37:43,941 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 20:37:43] "OPTIONS /api/stories/story_1749440262_0ff29d30 HTTP/1.1" 200 -
2025-06-08 20:37:43,950 - app.services.firebase_service - INFO - Retrieved story story_1749440262_0ff29d30: Ali's Cultivation Story
2025-06-08 20:37:43,951 - app.storage.storage - INFO - Retrieved story story_1749440262_0ff29d30: Ali's Cultivation Story
2025-06-08 20:37:43,952 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 20:37:43] "GET /api/stories/story_1749440262_0ff29d30 HTTP/1.1" 200 -
2025-06-08 20:37:44,064 - app.services.firebase_service - INFO - Retrieved story story_1749440262_0ff29d30: Ali's Cultivation Story
2025-06-08 20:37:44,064 - app.storage.storage - INFO - Retrieved story story_1749440262_0ff29d30: Ali's Cultivation Story
2025-06-08 20:37:44,065 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 20:37:44] "GET /api/stories/story_1749440262_0ff29d30 HTTP/1.1" 200 -
2025-06-08 20:40:19,305 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_progression.py', reloading
2025-06-08 20:40:22,000 - werkzeug - INFO -  * Restarting with watchdog (fsevents)
2025-06-08 20:40:22,580 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-08 20:40:22,683 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-08 20:40:22,683 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-08 20:40:22,687 - root - INFO - Starting StoryTeller API server...
2025-06-08 20:40:22,687 - root - INFO - Host: 0.0.0.0
2025-06-08 20:40:22,687 - root - INFO - Port: 5001
2025-06-08 20:40:22,687 - root - INFO - Debug mode: True
2025-06-08 20:40:22,689 - werkzeug - WARNING -  * Debugger is active!
2025-06-08 20:40:22,696 - werkzeug - INFO -  * Debugger PIN: 770-745-223
2025-06-08 20:40:30,717 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_progression.py', reloading
2025-06-08 20:40:30,829 - werkzeug - INFO -  * Restarting with watchdog (fsevents)
2025-06-08 20:40:31,227 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-08 20:40:31,303 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-08 20:40:31,303 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-08 20:40:31,306 - root - INFO - Starting StoryTeller API server...
2025-06-08 20:40:31,307 - root - INFO - Host: 0.0.0.0
2025-06-08 20:40:31,307 - root - INFO - Port: 5001
2025-06-08 20:40:31,307 - root - INFO - Debug mode: True
2025-06-08 20:40:31,308 - werkzeug - WARNING -  * Debugger is active!
2025-06-08 20:40:31,315 - werkzeug - INFO -  * Debugger PIN: 770-745-223
2025-06-08 20:40:48,511 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/services/ai_service.py', reloading
2025-06-08 20:40:49,501 - werkzeug - INFO -  * Restarting with watchdog (fsevents)
2025-06-08 20:40:49,865 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-08 20:40:49,938 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-08 20:40:49,938 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-08 20:40:49,941 - root - INFO - Starting StoryTeller API server...
2025-06-08 20:40:49,941 - root - INFO - Host: 0.0.0.0
2025-06-08 20:40:49,941 - root - INFO - Port: 5001
2025-06-08 20:40:49,941 - root - INFO - Debug mode: True
2025-06-08 20:40:49,943 - werkzeug - WARNING -  * Debugger is active!
2025-06-08 20:40:49,950 - werkzeug - INFO -  * Debugger PIN: 770-745-223
2025-06-08 20:41:03,946 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/services/ai_service.py', reloading
2025-06-08 20:41:04,127 - werkzeug - INFO -  * Restarting with watchdog (fsevents)
2025-06-08 20:41:04,645 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-08 20:41:04,729 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-08 20:41:04,729 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-08 20:41:04,732 - root - INFO - Starting StoryTeller API server...
2025-06-08 20:41:04,732 - root - INFO - Host: 0.0.0.0
2025-06-08 20:41:04,732 - root - INFO - Port: 5001
2025-06-08 20:41:04,732 - root - INFO - Debug mode: True
2025-06-08 20:41:04,734 - werkzeug - WARNING -  * Debugger is active!
2025-06-08 20:41:04,740 - werkzeug - INFO -  * Debugger PIN: 770-745-223
2025-06-08 20:41:13,353 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/services/ai_service.py', reloading
2025-06-08 20:41:13,875 - werkzeug - INFO -  * Restarting with watchdog (fsevents)
2025-06-08 20:41:14,415 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-08 20:41:14,509 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-08 20:41:14,509 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-08 20:41:14,512 - root - INFO - Starting StoryTeller API server...
2025-06-08 20:41:14,512 - root - INFO - Host: 0.0.0.0
2025-06-08 20:41:14,512 - root - INFO - Port: 5001
2025-06-08 20:41:14,512 - root - INFO - Debug mode: True
2025-06-08 20:41:14,514 - werkzeug - WARNING -  * Debugger is active!
2025-06-08 20:41:14,520 - werkzeug - INFO -  * Debugger PIN: 770-745-223
2025-06-08 20:41:24,124 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/api.py', reloading
2025-06-08 20:41:24,665 - werkzeug - INFO -  * Restarting with watchdog (fsevents)
2025-06-08 20:41:25,211 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-08 20:41:25,301 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-08 20:41:25,302 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-08 20:41:25,305 - root - INFO - Starting StoryTeller API server...
2025-06-08 20:41:25,305 - root - INFO - Host: 0.0.0.0
2025-06-08 20:41:25,305 - root - INFO - Port: 5001
2025-06-08 20:41:25,305 - root - INFO - Debug mode: True
2025-06-08 20:41:25,307 - werkzeug - WARNING -  * Debugger is active!
2025-06-08 20:41:25,314 - werkzeug - INFO -  * Debugger PIN: 770-745-223
2025-06-08 20:41:47,382 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/storage/storage.py', reloading
2025-06-08 20:41:47,562 - werkzeug - INFO -  * Restarting with watchdog (fsevents)
2025-06-08 20:41:48,073 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-08 20:41:48,333 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-08 20:41:48,333 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-08 20:41:48,336 - root - INFO - Starting StoryTeller API server...
2025-06-08 20:41:48,336 - root - INFO - Host: 0.0.0.0
2025-06-08 20:41:48,336 - root - INFO - Port: 5001
2025-06-08 20:41:48,336 - root - INFO - Debug mode: True
2025-06-08 20:41:48,338 - werkzeug - WARNING -  * Debugger is active!
2025-06-08 20:41:48,345 - werkzeug - INFO -  * Debugger PIN: 770-745-223
2025-06-08 20:42:30,861 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 20:42:30] "OPTIONS /api/status HTTP/1.1" 200 -
2025-06-08 20:42:30,864 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 20:42:30] "OPTIONS /api/status HTTP/1.1" 200 -
2025-06-08 20:42:30,865 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 20:42:30] "GET /api/status HTTP/1.1" 200 -
2025-06-08 20:42:30,867 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 20:42:30] "GET /api/status HTTP/1.1" 200 -
2025-06-08 20:42:42,237 - app.services.firebase_service - INFO - Retrieved 9 stories
2025-06-08 20:42:42,237 - app.storage.storage - INFO - Retrieved 9 stories
2025-06-08 20:42:42,238 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 20:42:42] "OPTIONS /api/stories HTTP/1.1" 200 -
2025-06-08 20:42:42,241 - app.auth - INFO - Authentication successful for user: Qbml4uDBe0O6YlYHLO4CuXFnXuu2
2025-06-08 20:42:42,403 - app.services.firebase_service - INFO - Retrieved 3 stories for user Qbml4uDBe0O6YlYHLO4CuXFnXuu2
2025-06-08 20:42:42,403 - app.storage.storage - INFO - Retrieved 3 stories for user Qbml4uDBe0O6YlYHLO4CuXFnXuu2
2025-06-08 20:42:42,741 - app.services.ai_service - INFO - Generated big story goal: Seek immortality and uncover ancient cultivation secrets.
2025-06-08 20:42:42,742 - app.services.ai_service - INFO - Using cultivation_progression genre for initial story
2025-06-08 20:42:42,742 - app.services.story_planner - INFO - Generated new arc goal: 'Find and decode ancient cultivation manuals.' for theme: 'immortality'
2025-06-08 20:42:42,742 - app.genres.cultivation_progression - INFO - Generated initial arc goal: Find and decode ancient cultivation manuals.
2025-06-08 20:42:42,743 - app.genres.cultivation_progression - INFO - Generating cultivation progression story for Ali
2025-06-08 20:42:42,743 - app.models.base_genre - INFO - Generating story for Ali
2025-06-08 20:42:46,654 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-08 20:42:46,664 - app.models.base_genre - INFO - ðŸŽ­ GENRE GPT RESPONSE (2755 chars):
2025-06-08 20:42:46,665 - app.models.base_genre - INFO - ============================================================
2025-06-08 20:42:46,665 - app.models.base_genre - INFO - [STORY]
Panel 1:
Setting: A dense forest with ancient trees and glowing flora.
Action: Ali, a young man with determined eyes and a mysterious aura, examines a glowing plant emitting blue qi.

Panel 2:
Action: Ali carefully plucks a leaf from the glowing plant, absorbing its essence. His eyes widen as he senses the energy flowing within him.
Dialogue (Ali): "This plant's qi is potent. It resonates with ancient power."

Panel 3:
Setting: A clearing in the forest with a serene pond reflecting the moonlight.
Action: A shadowy figure emerges, cloaked in darkness, wielding a sword crackling with dark qi.
Dialogue (Shadowy Figure): "You dare disturb the harmony of this sacred forest, intruder!"

Panel 4:
Conflict: The Shadowy Figure attacks Ali with swift, powerful strikes, aiming to test his strength and determination.
Action: Ali dodges the attacks, showcasing his agility and quick reflexes.
Dialogue (Ali): "I seek only to understand this world's cultivation. I mean no harm."

Panel 5:
Action: Ali counterattacks with a burst of qi-infused energy, his own sword glowing with a bright, golden light.
Cultivation Technique: Radiant Sunstrike - A technique that channels solar energy into a devastating sword attack.
Dialogue (Ali): "Radiant Sunstrike!"

Panel 6:
Action: The Radiant Sunstrike clashes with the Shadowy Figure's dark qi, creating a dazzling explosion of contrasting energies.
Consequence: The Shadowy Figure is momentarily stunned by Ali's unexpected power.
Dialogue (Shadowy Figure): "Impressive, you possess the light's strength within you."

Panel 7:
Action: The Shadowy Figure reveals himself as a guardian spirit of the forest, impressed by Ali's respect for nature and his determination to learn cultivation.
Dialogue (Guardian Spirit): "You have passed the trial. I shall guide you in your cultivation journey, Seeker of ancient secrets."
Reward: Guardian Spirit offers to teach Ali a forbidden technique - Celestial Harmony, a technique that balances light and dark qi for harmonious cultivation.

Panel 8:
Ending:
Ali bows respectfully to the Guardian Spirit, accepting his guidance and the knowledge of Celestial Harmony.
Intriguing Ending: The Guardian Spirit leads Ali deeper into the forest, hinting at the hidden wonders and challenges awaiting him.
[/STORY]

[CHOICES]
1. Accept the Guardian Spirit's offer and begin training in Celestial Harmony, seeking to balance light and dark energies within yourself.
2. Express gratitude to the Guardian Spirit but request to explore the forest alone, eager to uncover cultivation secrets independently.
3. Question the Guardian Spirit about the origins of the glowing plant and its significance, hoping to gain more insights into the world's cultivation mysteries.
[/CHOICES]
2025-06-08 20:42:46,665 - app.models.base_genre - INFO - ============================================================
2025-06-08 20:42:46,666 - app.models.base_genre - INFO - Successfully parsed genre response: story=2278 chars, choices=3
2025-06-08 20:42:46,666 - app.storage.storage - INFO - Using provided arc goal: Find and decode ancient cultivation manuals.
2025-06-08 20:42:46,667 - app.storage.storage - INFO - Initialized memory with big goal: 'Recover the legendary artifact sealed by ancient cultivators.' and arc goal: 'Find and decode ancient cultivation manuals.'
2025-06-08 20:42:46,797 - app.services.firebase_service - INFO - Saved story story_1749440566_79d694d5: Ali's Cultivation Story
2025-06-08 20:42:46,797 - app.storage.storage - INFO - Saved story story_1749440566_79d694d5: Ali's Cultivation Story
2025-06-08 20:42:46,797 - app.storage.storage - INFO - Created new story: story_1749440566_79d694d5: Ali's Cultivation Story
2025-06-08 20:42:47,159 - app.services.usage_service - INFO - Updated usage for user: Qbml4uDBe0O6YlYHLO4CuXFnXuu2
2025-06-08 20:42:47,793 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 20:42:47] "POST /api/stories HTTP/1.1" 200 -
2025-06-08 20:42:47,982 - app.services.firebase_service - INFO - Retrieved story story_1749440566_79d694d5: Ali's Cultivation Story
2025-06-08 20:42:47,982 - app.storage.storage - INFO - Retrieved story story_1749440566_79d694d5: Ali's Cultivation Story
2025-06-08 20:42:47,983 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 20:42:47] "OPTIONS /api/stories/story_1749440566_79d694d5 HTTP/1.1" 200 -
2025-06-08 20:42:48,221 - app.services.firebase_service - INFO - Retrieved story story_1749440566_79d694d5: Ali's Cultivation Story
2025-06-08 20:42:48,222 - app.storage.storage - INFO - Retrieved story story_1749440566_79d694d5: Ali's Cultivation Story
2025-06-08 20:42:48,223 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 20:42:48] "OPTIONS /api/stories/story_1749440566_79d694d5 HTTP/1.1" 200 -
2025-06-08 20:42:48,224 - app.services.firebase_service - INFO - Retrieved story story_1749440566_79d694d5: Ali's Cultivation Story
2025-06-08 20:42:48,225 - app.storage.storage - INFO - Retrieved story story_1749440566_79d694d5: Ali's Cultivation Story
2025-06-08 20:42:48,226 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 20:42:48] "GET /api/stories/story_1749440566_79d694d5 HTTP/1.1" 200 -
2025-06-08 20:42:48,319 - app.services.firebase_service - INFO - Retrieved story story_1749440566_79d694d5: Ali's Cultivation Story
2025-06-08 20:42:48,319 - app.storage.storage - INFO - Retrieved story story_1749440566_79d694d5: Ali's Cultivation Story
2025-06-08 20:42:48,320 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 20:42:48] "GET /api/stories/story_1749440566_79d694d5 HTTP/1.1" 200 -
2025-06-08 20:50:08,371 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 20:50:08] "OPTIONS /api/stories/story_1749440566_79d694d5/choices/3 HTTP/1.1" 200 -
2025-06-08 20:50:08,376 - app.auth - INFO - Authentication successful for user: Qbml4uDBe0O6YlYHLO4CuXFnXuu2
2025-06-08 20:50:08,564 - app.services.firebase_service - INFO - Retrieved story story_1749440566_79d694d5: Ali's Cultivation Story
2025-06-08 20:50:08,564 - app.storage.storage - INFO - Retrieved story story_1749440566_79d694d5: Ali's Cultivation Story
2025-06-08 20:50:09,191 - app.services.usage_service - INFO - Updated usage for user: Qbml4uDBe0O6YlYHLO4CuXFnXuu2
2025-06-08 20:50:09,294 - app.services.firebase_service - INFO - Retrieved story story_1749440566_79d694d5: Ali's Cultivation Story
2025-06-08 20:50:09,294 - app.storage.storage - INFO - Retrieved story story_1749440566_79d694d5: Ali's Cultivation Story
2025-06-08 20:50:09,552 - app.services.firebase_service - INFO - Saved story story_1749440566_79d694d5: Ali's Cultivation Story
2025-06-08 20:50:09,552 - app.storage.storage - INFO - Saved story story_1749440566_79d694d5: Ali's Cultivation Story
2025-06-08 20:50:09,552 - app.storage.storage - INFO - Saved choice 3 for node initial in story story_1749440566_79d694d5
2025-06-08 20:50:09,552 - app.services.ai_service - INFO - Using cultivation_progression genre for story continuation
2025-06-08 20:50:09,553 - app.services.ai_service - INFO - Using big story goal for cultivation continuation: Recover the legendary artifact sealed by ancient cultivators.
2025-06-08 20:50:09,553 - app.genres.cultivation_progression - INFO - Continuing cultivation progression story for Ali
2025-06-08 20:50:09,553 - app.models.base_genre - INFO - Generating story for Ali
2025-06-08 20:50:15,595 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-08 20:50:15,601 - app.models.base_genre - INFO - ðŸŽ­ GENRE GPT RESPONSE (3626 chars):
2025-06-08 20:50:15,602 - app.models.base_genre - INFO - ============================================================
2025-06-08 20:50:15,602 - app.models.base_genre - INFO - [STORY]
Panel 1:
Setting: Inside a mystical cave hidden deep within the forest, illuminated by glowing crystals.
Action: Ali stands before the Guardian Spirit, his eyes filled with curiosity and determination, ready to delve into the secrets of cultivation.
Dialogue (Ali): "Guardian Spirit, can you tell me about the origins of the glowing plant? How does it connect to the world's cultivation?"

Panel 2:
Action: The Guardian Spirit, surrounded by an aura of ancient wisdom, gestures towards a mural depicting the plant's history.
Dialogue (Guardian Spirit): "Long ago, this plant was a gift from the Celestial Dragons, imbued with the essence of balance and growth. Its qi holds the key to unlocking hidden potential."

Panel 3:
Action: The mural shimmers, revealing hidden symbols and cryptic writings detailing the cultivation techniques associated with the glowing plant.
Cultivation Technique: Dragon's Essence Meditation - A method to harmonize one's qi with the Celestial Dragons' energy, unlocking dormant power within.
Dialogue (Guardian Spirit): "To understand the plant's significance, you must master the Dragon's Essence Meditation."

Panel 4:
Action: Ali closes his eyes, focusing his qi as he attempts the Dragon's Essence Meditation technique, feeling the ancient power of the Celestial Dragons flowing through him.
Emotional Reaction: A mix of awe and determination fills Ali's expression as he delves into the depths of cultivation knowledge.
Dialogue (Ali): "The Celestial Dragons' energy is potent. I must master this technique to uncover the plant's true potential."

Panel 5:
Action: As Ali delves deeper into the meditation, a vision of a celestial dragon manifests before him, its majestic form radiating with divine light.
Consequence: The celestial dragon's presence signifies Ali's connection to ancient powers and the potential for great cultivation advancement.
Dialogue (Celestial Dragon): "Seeker of balance, embrace the essence of the Celestial Dragons and unlock the plant's true potential."

Panel 6:
Action: The celestial dragon bestows a shimmering scale, a symbol of the dragon's blessing and a key to unlocking the plant's hidden powers.
Reward: Dragon Scale - Enhances qi control and unlocks the plant's dormant abilities for Ali's cultivation.
Emotional Moment: Ali is filled with gratitude and determination, humbled by the dragon's blessing.
Dialogue (Ali): "I am honored by your gift, Celestial Dragon. I will use it wisely in my cultivation journey."

Panel 7:
Setting: The mystical cave resonates with a harmonious energy, echoing the balance between light and dark qi.
Action: The Guardian Spirit smiles, witnessing Ali's progress and newfound connection to the celestial dragon's energy.
Dialogue (Guardian Spirit): "You have taken the first step towards unlocking the ancient powers within you. The path to enlightenment awaits, Seeker of balance."

Panel 8:
Ending:
Ali bows respectfully to the Celestial Dragon and the Guardian Spirit, ready to embark on his journey to uncover the plant's hidden potential and master the Dragon's Essence Meditation.
Intriguing Ending: The cave rumbles with a newfound energy, hinting at the challenges and revelations awaiting Ali as he progresses on his cultivation path.

[CHOICES]
1. Meditate further to strengthen the connection with the Celestial Dragon and unlock more of the plant's secrets.
2. Explore the depths of the mystical cave to uncover additional ancient cultivation techniques and artifacts.
3. Seek guidance from the Guardian Spirit on how to integrate the Dragon Scale into his cultivation practice for optimal results.
2025-06-08 20:50:15,602 - app.models.base_genre - INFO - ============================================================
2025-06-08 20:50:15,604 - app.models.base_genre - INFO - Successfully parsed genre response: story=3262 chars, choices=3
2025-06-08 20:50:15,712 - app.services.firebase_service - INFO - Retrieved story story_1749440566_79d694d5: Ali's Cultivation Story
2025-06-08 20:50:15,712 - app.storage.storage - INFO - Retrieved story story_1749440566_79d694d5: Ali's Cultivation Story
2025-06-08 20:50:15,997 - app.services.firebase_service - INFO - Saved story story_1749440566_79d694d5: Ali's Cultivation Story
2025-06-08 20:50:15,997 - app.storage.storage - INFO - Saved story story_1749440566_79d694d5: Ali's Cultivation Story
2025-06-08 20:50:15,997 - app.storage.storage - INFO - Added node node_4000501720 to story story_1749440566_79d694d5
2025-06-08 20:50:16,517 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 20:50:16] "POST /api/stories/story_1749440566_79d694d5/choices/3 HTTP/1.1" 200 -
2025-06-08 20:52:11,559 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 20:52:11] "OPTIONS /api/stories/story_1749440566_79d694d5/choices/2 HTTP/1.1" 200 -
2025-06-08 20:52:11,562 - app.auth - INFO - Authentication successful for user: Qbml4uDBe0O6YlYHLO4CuXFnXuu2
2025-06-08 20:52:11,778 - app.services.firebase_service - INFO - Retrieved story story_1749440566_79d694d5: Ali's Cultivation Story
2025-06-08 20:52:11,779 - app.storage.storage - INFO - Retrieved story story_1749440566_79d694d5: Ali's Cultivation Story
2025-06-08 20:52:12,326 - app.services.usage_service - INFO - Updated usage for user: Qbml4uDBe0O6YlYHLO4CuXFnXuu2
2025-06-08 20:52:12,458 - app.services.firebase_service - INFO - Retrieved story story_1749440566_79d694d5: Ali's Cultivation Story
2025-06-08 20:52:12,459 - app.storage.storage - INFO - Retrieved story story_1749440566_79d694d5: Ali's Cultivation Story
2025-06-08 20:52:12,711 - app.services.firebase_service - INFO - Saved story story_1749440566_79d694d5: Ali's Cultivation Story
2025-06-08 20:52:12,711 - app.storage.storage - INFO - Saved story story_1749440566_79d694d5: Ali's Cultivation Story
2025-06-08 20:52:12,711 - app.storage.storage - INFO - Saved choice 2 for node node_4000501720 in story story_1749440566_79d694d5
2025-06-08 20:52:12,711 - app.services.ai_service - INFO - Using cultivation_progression genre for story continuation
2025-06-08 20:52:12,711 - app.services.ai_service - INFO - Using big story goal for cultivation continuation: Regain lost memories from a past life.
2025-06-08 20:52:12,711 - app.genres.cultivation_progression - INFO - Continuing cultivation progression story for Ali
2025-06-08 20:52:12,711 - app.models.base_genre - INFO - Generating story for Ali
2025-06-08 20:52:18,996 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-08 20:52:19,000 - app.models.base_genre - INFO - ðŸŽ­ GENRE GPT RESPONSE (2899 chars):
2025-06-08 20:52:19,000 - app.models.base_genre - INFO - ============================================================
2025-06-08 20:52:19,001 - app.models.base_genre - INFO - [STORY]
Panel 1:
Setting: Deep within the mystical cave, Ali walks cautiously, his hand brushing against ancient runes etched into the walls.
Action: Ali's curiosity drives him to search for more hidden knowledge, his eyes gleaming with determination.
Panel 2:
Action: A soft glow emanates from a hidden alcove, revealing a dusty tome covered in intricate symbols and diagrams.
Discovery: Ancient Cultivation Manual - Whisper of the Elements, a forbidden technique said to harness the power of nature's elements.
Panel 3:
Action: Ali carefully opens the manual, feeling a surge of elemental qi swirling around him as the pages come to life with vibrant colors.
Cultivation Technique: Elemental Harmony Stance - A technique that allows the user to attune to and manipulate the elements around them.
Panel 4:
Action: Ali adopts the Elemental Harmony Stance, his body surrounded by swirling wind, crackling lightning, and flowing water.
Emotional Reaction: A mix of excitement and focus fills Ali as he connects with the elemental energies, feeling a newfound sense of power.
Dialogue (Ali): "The elements respond to my will. This technique is truly remarkable."
Panel 5:
Action: Suddenly, the elemental energies surge out of control, creating a chaotic vortex that threatens to engulf Ali.
Conflict: The unbridled power of the elements presents a dangerous challenge, testing Ali's control and mastery.
Panel 6:
Action: With quick thinking, Ali channels his qi with precision, calming the elemental energies and bringing harmony back to the cave.
Consequence: Ali's quick thinking and control over the elements showcase his growing cultivation skills and adaptability.
Dialogue (Guardian Spirit): "Balance is key, Seeker. Embrace the harmony of the elements to unlock their true potential."
Panel 7:
Action: The Guardian Spirit appears, observing Ali with a knowing gaze, impressed by his handling of the elemental challenge.
Character Development: Ali's resilience and quick thinking earn him the respect of the Guardian Spirit, deepening their bond.
Dialogue (Guardian Spirit): "You wield the elements with grace, a rare trait among cultivators. Your journey is filled with promise."
Panel 8:
Ending:
Ali gazes at the Ancient Cultivation Manual with newfound determination, ready to delve deeper into the forbidden techniques and unlock the secrets of Whisper of the Elements.
Intriguing Ending: The cave rumbles once more, hinting at the trials and revelations that lie ahead on Ali's path to recovering his lost memories.
[CHOICES]
1. Meditate further to attune to the elemental energies and unlock hidden insights within the Ancient Cultivation Manual.
2. Seek guidance from the Guardian Spirit on how to navigate the dangers of mastering the Whisper of the Elements technique.
3. Venture deeper into the cave in search of artifacts that can aid in mastering the elemental cultivation techniques.
2025-06-08 20:52:19,001 - app.models.base_genre - INFO - ============================================================
2025-06-08 20:52:19,001 - app.models.base_genre - INFO - Successfully parsed genre response: story=2533 chars, choices=3
2025-06-08 20:52:19,108 - app.services.firebase_service - INFO - Retrieved story story_1749440566_79d694d5: Ali's Cultivation Story
2025-06-08 20:52:19,109 - app.storage.storage - INFO - Retrieved story story_1749440566_79d694d5: Ali's Cultivation Story
2025-06-08 20:52:19,452 - app.services.firebase_service - INFO - Saved story story_1749440566_79d694d5: Ali's Cultivation Story
2025-06-08 20:52:19,453 - app.storage.storage - INFO - Saved story story_1749440566_79d694d5: Ali's Cultivation Story
2025-06-08 20:52:19,453 - app.storage.storage - INFO - Added node node_2548334051 to story story_1749440566_79d694d5
2025-06-08 20:52:19,777 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 20:52:19] "POST /api/stories/story_1749440566_79d694d5/choices/2 HTTP/1.1" 200 -
2025-06-08 20:52:41,684 - app.services.firebase_service - INFO - Retrieved story story_1749440566_79d694d5: Ali's Cultivation Story
2025-06-08 20:52:41,685 - app.storage.storage - INFO - Retrieved story story_1749440566_79d694d5: Ali's Cultivation Story
2025-06-08 20:52:41,686 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 20:52:41] "OPTIONS /api/stories/story_1749440566_79d694d5 HTTP/1.1" 200 -
2025-06-08 20:52:42,031 - app.services.firebase_service - INFO - Retrieved story story_1749440566_79d694d5: Ali's Cultivation Story
2025-06-08 20:52:42,031 - app.services.firebase_service - INFO - Retrieved story story_1749440566_79d694d5: Ali's Cultivation Story
2025-06-08 20:52:42,032 - app.storage.storage - INFO - Retrieved story story_1749440566_79d694d5: Ali's Cultivation Story
2025-06-08 20:52:42,032 - app.storage.storage - INFO - Retrieved story story_1749440566_79d694d5: Ali's Cultivation Story
2025-06-08 20:52:42,033 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 20:52:42] "GET /api/stories/story_1749440566_79d694d5 HTTP/1.1" 200 -
2025-06-08 20:52:42,034 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 20:52:42] "OPTIONS /api/stories/story_1749440566_79d694d5 HTTP/1.1" 200 -
2025-06-08 20:52:42,170 - app.services.firebase_service - INFO - Retrieved story story_1749440566_79d694d5: Ali's Cultivation Story
2025-06-08 20:52:42,171 - app.storage.storage - INFO - Retrieved story story_1749440566_79d694d5: Ali's Cultivation Story
2025-06-08 20:52:42,172 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 20:52:42] "GET /api/stories/story_1749440566_79d694d5 HTTP/1.1" 200 -
2025-06-08 20:53:44,134 - app.services.firebase_service - INFO - Retrieved story story_1749440566_79d694d5: Ali's Cultivation Story
2025-06-08 20:53:44,134 - app.storage.storage - INFO - Retrieved story story_1749440566_79d694d5: Ali's Cultivation Story
2025-06-08 20:53:44,136 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 20:53:44] "OPTIONS /api/stories/story_1749440566_79d694d5 HTTP/1.1" 200 -
2025-06-08 20:53:44,258 - app.services.firebase_service - INFO - Retrieved story story_1749440566_79d694d5: Ali's Cultivation Story
2025-06-08 20:53:44,258 - app.storage.storage - INFO - Retrieved story story_1749440566_79d694d5: Ali's Cultivation Story
2025-06-08 20:53:44,260 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 20:53:44] "OPTIONS /api/stories/story_1749440566_79d694d5 HTTP/1.1" 200 -
2025-06-08 20:53:44,264 - app.services.firebase_service - INFO - Retrieved story story_1749440566_79d694d5: Ali's Cultivation Story
2025-06-08 20:53:44,265 - app.storage.storage - INFO - Retrieved story story_1749440566_79d694d5: Ali's Cultivation Story
2025-06-08 20:53:44,265 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 20:53:44] "GET /api/stories/story_1749440566_79d694d5 HTTP/1.1" 200 -
2025-06-08 20:53:44,383 - app.services.firebase_service - INFO - Retrieved story story_1749440566_79d694d5: Ali's Cultivation Story
2025-06-08 20:53:44,384 - app.storage.storage - INFO - Retrieved story story_1749440566_79d694d5: Ali's Cultivation Story
2025-06-08 20:53:44,385 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 20:53:44] "GET /api/stories/story_1749440566_79d694d5 HTTP/1.1" 200 -
2025-06-08 20:54:20,959 - app.services.firebase_service - INFO - Retrieved story story_1749440566_79d694d5: Ali's Cultivation Story
2025-06-08 20:54:20,960 - app.storage.storage - INFO - Retrieved story story_1749440566_79d694d5: Ali's Cultivation Story
2025-06-08 20:54:20,962 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 20:54:20] "OPTIONS /api/stories/story_1749440566_79d694d5 HTTP/1.1" 200 -
2025-06-08 20:54:21,074 - app.services.firebase_service - INFO - Retrieved story story_1749440566_79d694d5: Ali's Cultivation Story
2025-06-08 20:54:21,075 - app.storage.storage - INFO - Retrieved story story_1749440566_79d694d5: Ali's Cultivation Story
2025-06-08 20:54:21,076 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 20:54:21] "OPTIONS /api/stories/story_1749440566_79d694d5 HTTP/1.1" 200 -
2025-06-08 20:54:21,176 - app.services.firebase_service - INFO - Retrieved story story_1749440566_79d694d5: Ali's Cultivation Story
2025-06-08 20:54:21,177 - app.storage.storage - INFO - Retrieved story story_1749440566_79d694d5: Ali's Cultivation Story
2025-06-08 20:54:21,178 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 20:54:21] "GET /api/stories/story_1749440566_79d694d5 HTTP/1.1" 200 -
2025-06-08 20:54:21,308 - app.services.firebase_service - INFO - Retrieved story story_1749440566_79d694d5: Ali's Cultivation Story
2025-06-08 20:54:21,308 - app.storage.storage - INFO - Retrieved story story_1749440566_79d694d5: Ali's Cultivation Story
2025-06-08 20:54:21,309 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 20:54:21] "GET /api/stories/story_1749440566_79d694d5 HTTP/1.1" 200 -
2025-06-08 20:54:25,444 - app.services.firebase_service - INFO - Retrieved 10 stories
2025-06-08 20:54:25,444 - app.storage.storage - INFO - Retrieved 10 stories
2025-06-08 20:54:25,446 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 20:54:25] "OPTIONS /api/stories HTTP/1.1" 200 -
2025-06-08 20:54:25,471 - app.services.firebase_service - INFO - Retrieved 10 stories
2025-06-08 20:54:25,472 - app.storage.storage - INFO - Retrieved 10 stories
2025-06-08 20:54:25,473 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 20:54:25] "OPTIONS /api/stories HTTP/1.1" 200 -
2025-06-08 20:54:25,629 - app.services.firebase_service - INFO - Retrieved 4 stories for user Qbml4uDBe0O6YlYHLO4CuXFnXuu2
2025-06-08 20:54:25,629 - app.storage.storage - INFO - Retrieved 4 stories for user Qbml4uDBe0O6YlYHLO4CuXFnXuu2
2025-06-08 20:54:25,630 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 20:54:25] "GET /api/stories HTTP/1.1" 200 -
2025-06-08 20:54:25,864 - app.services.firebase_service - INFO - Retrieved 4 stories for user Qbml4uDBe0O6YlYHLO4CuXFnXuu2
2025-06-08 20:54:25,864 - app.storage.storage - INFO - Retrieved 4 stories for user Qbml4uDBe0O6YlYHLO4CuXFnXuu2
2025-06-08 20:54:25,865 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 20:54:25] "GET /api/stories HTTP/1.1" 200 -
2025-06-08 20:55:35,500 - app.services.firebase_service - INFO - Retrieved story story_1749440566_79d694d5: Ali's Cultivation Story
2025-06-08 20:55:35,502 - app.storage.storage - INFO - Retrieved story story_1749440566_79d694d5: Ali's Cultivation Story
2025-06-08 20:55:35,503 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 20:55:35] "OPTIONS /api/stories/story_1749440566_79d694d5 HTTP/1.1" 200 -
2025-06-08 20:55:35,730 - app.services.firebase_service - INFO - Retrieved story story_1749440566_79d694d5: Ali's Cultivation Story
2025-06-08 20:55:35,730 - app.storage.storage - INFO - Retrieved story story_1749440566_79d694d5: Ali's Cultivation Story
2025-06-08 20:55:35,732 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 20:55:35] "OPTIONS /api/stories/story_1749440566_79d694d5 HTTP/1.1" 200 -
2025-06-08 20:55:35,733 - app.services.firebase_service - INFO - Retrieved story story_1749440566_79d694d5: Ali's Cultivation Story
2025-06-08 20:55:35,733 - app.storage.storage - INFO - Retrieved story story_1749440566_79d694d5: Ali's Cultivation Story
2025-06-08 20:55:35,734 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 20:55:35] "GET /api/stories/story_1749440566_79d694d5 HTTP/1.1" 200 -
2025-06-08 20:55:35,860 - app.services.firebase_service - INFO - Retrieved story story_1749440566_79d694d5: Ali's Cultivation Story
2025-06-08 20:55:35,860 - app.storage.storage - INFO - Retrieved story story_1749440566_79d694d5: Ali's Cultivation Story
2025-06-08 20:55:35,861 - werkzeug - INFO - 127.0.0.1 - - [08/Jun/2025 20:55:35] "GET /api/stories/story_1749440566_79d694d5 HTTP/1.1" 200 -
2025-06-09 20:33:18,176 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-09 20:33:18,290 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-09 20:33:18,290 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-09 20:33:18,297 - root - INFO - Starting StoryTeller API server...
2025-06-09 20:33:18,297 - root - INFO - Host: 0.0.0.0
2025-06-09 20:33:18,297 - root - INFO - Port: 5001
2025-06-09 20:33:18,297 - root - INFO - Debug mode: True
2025-06-09 20:33:18,309 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5001
 * Running on http://10.0.0.243:5001
2025-06-09 20:33:18,309 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-09 20:33:18,310 - werkzeug - INFO -  * Restarting with stat
2025-06-09 20:33:18,893 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-09 20:33:18,976 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-09 20:33:18,976 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-09 20:33:18,982 - root - INFO - Starting StoryTeller API server...
2025-06-09 20:33:18,982 - root - INFO - Host: 0.0.0.0
2025-06-09 20:33:18,982 - root - INFO - Port: 5001
2025-06-09 20:33:18,982 - root - INFO - Debug mode: True
2025-06-09 20:33:18,984 - werkzeug - WARNING -  * Debugger is active!
2025-06-09 20:33:19,135 - werkzeug - INFO -  * Debugger PIN: 904-451-859
2025-06-09 20:33:32,954 - app.services.firebase_service - INFO - Retrieved 1 stories
2025-06-09 20:33:32,955 - app.storage.storage - INFO - Retrieved 1 stories
2025-06-09 20:33:32,959 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 20:33:32] "OPTIONS /api/stories HTTP/1.1" 200 -
2025-06-09 20:33:33,047 - app.services.firebase_service - INFO - Retrieved 1 stories
2025-06-09 20:33:33,048 - app.storage.storage - INFO - Retrieved 1 stories
2025-06-09 20:33:33,050 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 20:33:33] "OPTIONS /api/stories HTTP/1.1" 200 -
2025-06-09 20:33:33,172 - app.services.firebase_service - INFO - Retrieved 1 stories for user sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-09 20:33:33,173 - app.storage.storage - INFO - Retrieved 1 stories for user sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-09 20:33:33,175 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 20:33:33] "GET /api/stories HTTP/1.1" 200 -
2025-06-09 20:33:33,312 - app.services.firebase_service - INFO - Retrieved 1 stories for user sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-09 20:33:33,313 - app.storage.storage - INFO - Retrieved 1 stories for user sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-09 20:33:33,313 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 20:33:33] "GET /api/stories HTTP/1.1" 200 -
2025-06-09 20:33:34,940 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 20:33:34] "OPTIONS /api/status HTTP/1.1" 200 -
2025-06-09 20:33:34,943 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 20:33:34] "GET /api/status HTTP/1.1" 200 -
2025-06-09 20:33:35,003 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 20:33:35] "GET /api/status HTTP/1.1" 200 -
2025-06-09 20:33:47,930 - app.services.firebase_service - INFO - Retrieved 1 stories
2025-06-09 20:33:47,931 - app.storage.storage - INFO - Retrieved 1 stories
2025-06-09 20:33:47,933 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 20:33:47] "OPTIONS /api/stories HTTP/1.1" 200 -
2025-06-09 20:33:47,938 - app.auth - INFO - Authentication successful for user: sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-09 20:33:48,159 - app.services.firebase_service - INFO - Retrieved 1 stories for user sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-09 20:33:48,162 - app.storage.storage - INFO - Retrieved 1 stories for user sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-09 20:33:48,514 - app.services.ai_service - INFO - Generated big story goal: Revenge on the Sect Leader who betrayed their family.
2025-06-09 20:33:48,515 - app.services.ai_service - INFO - Using cultivation_progression genre for initial story
2025-06-09 20:33:48,515 - app.services.story_planner - INFO - Generated new arc goal: 'Rescue a captured ally from a rival sect.' for theme: 'revenge'
2025-06-09 20:33:48,515 - app.genres.cultivation_progression - INFO - Generated initial arc goal: Rescue a captured ally from a rival sect.
2025-06-09 20:33:48,515 - app.genres.cultivation_progression - INFO - Generating cultivation progression story for Ali
2025-06-09 20:33:48,516 - app.models.base_genre - INFO - Generating story for Ali
2025-06-09 20:33:54,452 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-09 20:33:54,466 - app.models.base_genre - INFO - ðŸŽ­ GENRE GPT RESPONSE (2480 chars):
2025-06-09 20:33:54,467 - app.models.base_genre - INFO - ============================================================
2025-06-09 20:33:54,467 - app.models.base_genre - INFO - [STORY]
Panel 1:
A vibrant sunset illuminates a dense bamboo forest as Ali, a determined and sharp-eyed young cultivator, walks through the serene setting. His eyes reflect a mix of determination and a hint of hidden pain, hinting at his reincarnated past.

Panel 2:
Suddenly, a massive shadow looms overhead, casting a dark silhouette over Ali. He looks up, startled, to see a colossal ancient tree beginning to fall towards him, its branches cracking with a deafening roar.

Panel 3:
With lightning speed, Ali dives to the side, narrowly avoiding being crushed by the falling tree. His hands glow with a soft blue light as he channels his cultivation energy to enhance his speed and agility.

Panel 4:
As the dust settles, Ali stands up, panting slightly but unharmed. His eyes flicker with a mix of relief and determination, showcasing his quick thinking and resilience in the face of unexpected danger.

Panel 5:
A voice echoes through the forest, revealing itself to be an elderly cultivator stepping out from the shadows. His eyes scrutinize Ali with a mix of curiosity and approval, recognizing the potential within the young cultivator.

Panel 6:
The elderly cultivator introduces himself as Master Wu, a renowned expert in the cultivation world. He offers to take Ali under his wing, sensing a unique aura of power and determination radiating from the young man.

Panel 7:
Master Wu begins to explain a rare cultivation technique known as the "Blazing Phoenix Fist," a powerful technique that harnesses the energy of fire to unleash devastating strikes. He demonstrates the technique, the flames dancing around his fists in a mesmerizing display of power.

Panel 8:
As Ali absorbs Master Wu's teachings, the qi in the air shimmers with vibrant red and orange hues, resonating with the fiery nature of the Blazing Phoenix Fist technique. The atmosphere crackles with energy, hinting at the untapped potential within Ali waiting to be unleashed.

[/STORY]

[CHOICES]
1. Ali decides to challenge Master Wu to a friendly sparring match to test his newfound knowledge of the Blazing Phoenix Fist technique.
2. Ali expresses gratitude to Master Wu for his guidance and asks for further training to master the intricacies of the Blazing Phoenix Fist technique.
3. Ali, intrigued by the power of fire cultivation, decides to venture deeper into the bamboo forest to search for ancient texts that may reveal more about the history of the Blazing Phoenix Fist technique.
[/CHOICES]
2025-06-09 20:33:54,467 - app.models.base_genre - INFO - ============================================================
2025-06-09 20:33:54,468 - app.models.base_genre - INFO - Successfully parsed genre response: story=1944 chars, choices=3
2025-06-09 20:33:54,468 - app.storage.storage - INFO - Using provided arc goal: Rescue a captured ally from a rival sect.
2025-06-09 20:33:54,468 - app.storage.storage - INFO - Initialized memory with big goal: 'Revenge on the Sect Leader who betrayed their family.' and arc goal: 'Rescue a captured ally from a rival sect.'
2025-06-09 20:33:54,613 - app.services.firebase_service - INFO - Saved story story_1749526434_d2fef311: Ali's Cultivation Story
2025-06-09 20:33:54,613 - app.storage.storage - INFO - Saved story story_1749526434_d2fef311: Ali's Cultivation Story
2025-06-09 20:33:54,614 - app.storage.storage - INFO - Created new story: story_1749526434_d2fef311: Ali's Cultivation Story
2025-06-09 20:33:54,955 - app.services.usage_service - INFO - Updated usage for user: sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-09 20:33:55,451 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 20:33:55] "POST /api/stories HTTP/1.1" 200 -
2025-06-09 20:33:55,678 - app.services.firebase_service - INFO - Retrieved story story_1749526434_d2fef311: Ali's Cultivation Story
2025-06-09 20:33:55,678 - app.storage.storage - INFO - Retrieved story story_1749526434_d2fef311: Ali's Cultivation Story
2025-06-09 20:33:55,680 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 20:33:55] "OPTIONS /api/stories/story_1749526434_d2fef311 HTTP/1.1" 200 -
2025-06-09 20:33:55,909 - app.services.firebase_service - INFO - Retrieved story story_1749526434_d2fef311: Ali's Cultivation Story
2025-06-09 20:33:55,909 - app.storage.storage - INFO - Retrieved story story_1749526434_d2fef311: Ali's Cultivation Story
2025-06-09 20:33:55,911 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 20:33:55] "OPTIONS /api/stories/story_1749526434_d2fef311 HTTP/1.1" 200 -
2025-06-09 20:33:55,928 - app.services.firebase_service - INFO - Retrieved story story_1749526434_d2fef311: Ali's Cultivation Story
2025-06-09 20:33:55,928 - app.storage.storage - INFO - Retrieved story story_1749526434_d2fef311: Ali's Cultivation Story
2025-06-09 20:33:55,930 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 20:33:55] "GET /api/stories/story_1749526434_d2fef311 HTTP/1.1" 200 -
2025-06-09 20:33:56,051 - app.services.firebase_service - INFO - Retrieved story story_1749526434_d2fef311: Ali's Cultivation Story
2025-06-09 20:33:56,051 - app.storage.storage - INFO - Retrieved story story_1749526434_d2fef311: Ali's Cultivation Story
2025-06-09 20:33:56,053 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 20:33:56] "GET /api/stories/story_1749526434_d2fef311 HTTP/1.1" 200 -
2025-06-09 20:34:58,972 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 20:34:58] "OPTIONS /api/stories/story_1749526434_d2fef311/choices/1 HTTP/1.1" 200 -
2025-06-09 20:34:58,978 - app.auth - INFO - Authentication successful for user: sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-09 20:34:59,156 - app.services.firebase_service - INFO - Retrieved story story_1749526434_d2fef311: Ali's Cultivation Story
2025-06-09 20:34:59,157 - app.storage.storage - INFO - Retrieved story story_1749526434_d2fef311: Ali's Cultivation Story
2025-06-09 20:34:59,752 - app.services.usage_service - INFO - Updated usage for user: sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-09 20:34:59,852 - app.services.firebase_service - INFO - Retrieved story story_1749526434_d2fef311: Ali's Cultivation Story
2025-06-09 20:34:59,853 - app.storage.storage - INFO - Retrieved story story_1749526434_d2fef311: Ali's Cultivation Story
2025-06-09 20:35:00,111 - app.services.firebase_service - INFO - Saved story story_1749526434_d2fef311: Ali's Cultivation Story
2025-06-09 20:35:00,112 - app.storage.storage - INFO - Saved story story_1749526434_d2fef311: Ali's Cultivation Story
2025-06-09 20:35:00,112 - app.storage.storage - INFO - Saved choice 1 for node initial in story story_1749526434_d2fef311
2025-06-09 20:35:00,113 - app.services.ai_service - INFO - Using cultivation_progression genre for story continuation
2025-06-09 20:35:00,114 - app.services.ai_service - INFO - Using big story goal for cultivation continuation: Seek immortality and uncover ancient cultivation secrets.
2025-06-09 20:35:00,114 - app.genres.cultivation_progression - INFO - Continuing cultivation progression story for Ali
2025-06-09 20:35:00,114 - app.models.base_genre - INFO - Generating story for Ali
2025-06-09 20:35:03,062 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-09 20:35:03,072 - app.models.base_genre - INFO - ðŸŽ­ GENRE GPT RESPONSE (2156 chars):
2025-06-09 20:35:03,073 - app.models.base_genre - INFO - ============================================================
2025-06-09 20:35:03,073 - app.models.base_genre - INFO - [STORY]
Panel 1:
Ali faces off against Master Wu in a secluded clearing, the air crackling with anticipation. The elderly cultivator's eyes twinkle with amusement, while Ali's expression is a mix of determination and excitement.

Panel 2:
With a swift movement, Master Wu unleashes a flurry of fiery punches towards Ali. The Blazing Phoenix Fist technique creates trails of blazing qi, leaving a fiery path in its wake.

Panel 3:
Ali focuses his energy, countering with his own precise strikes. His movements are fluid and controlled, the blue qi intertwining with the fiery energy, creating a mesmerizing dance of colors in the air.

Panel 4:
The clash of their techniques creates a powerful shockwave, sending leaves and dust swirling around them. Ali's eyes gleam with newfound understanding, his instincts guiding him in the heat of battle.

Panel 5:
As the sparring match intensifies, Master Wu's expression shifts from amusement to genuine surprise. He recognizes Ali's talent and potential, realizing that the young cultivator is a rare prodigy in the making.

Panel 6:
Amidst the intense exchange of blows, Ali taps into a deeper reservoir of energy, unleashing a perfected Blazing Phoenix Fist strike. The flames erupt with newfound intensity, engulfing Master Wu in a dazzling display of power.

Panel 7:
Master Wu's eyes widen in astonishment as he is pushed back by the sheer force of Ali's attack. The clearing is bathed in a warm glow, the remnants of their clash lingering in the air like a testament to Ali's growth.

Panel 8:
Breathing heavily but exhilarated, Ali stands before Master Wu, a newfound confidence radiating from his being. The elderly cultivator nods in approval, a proud smile tugging at the corners of his lips.

[/STORY]

[CHOICES]
1. Accept Master Wu's offer to become his official disciple and delve deeper into the secrets of cultivation under his guidance.
2. Ask Master Wu about the captured ally from the rival sect and seek his advice on planning a rescue mission.
3. Request a solo training session to further refine and master the Blazing Phoenix Fist technique before embarking on the next challenge.
[/CHOICES]
2025-06-09 20:35:03,073 - app.models.base_genre - INFO - ============================================================
2025-06-09 20:35:03,074 - app.models.base_genre - INFO - Successfully parsed genre response: story=1737 chars, choices=3
2025-06-09 20:35:03,181 - app.services.firebase_service - INFO - Retrieved story story_1749526434_d2fef311: Ali's Cultivation Story
2025-06-09 20:35:03,182 - app.storage.storage - INFO - Retrieved story story_1749526434_d2fef311: Ali's Cultivation Story
2025-06-09 20:35:03,440 - app.services.firebase_service - INFO - Saved story story_1749526434_d2fef311: Ali's Cultivation Story
2025-06-09 20:35:03,441 - app.storage.storage - INFO - Saved story story_1749526434_d2fef311: Ali's Cultivation Story
2025-06-09 20:35:03,441 - app.storage.storage - INFO - Added node node_3044020105 to story story_1749526434_d2fef311
2025-06-09 20:35:03,772 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 20:35:03] "POST /api/stories/story_1749526434_d2fef311/choices/1 HTTP/1.1" 200 -
2025-06-09 20:38:58,392 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/api.py', reloading
2025-06-09 20:39:00,500 - werkzeug - INFO -  * Restarting with stat
2025-06-09 20:39:01,293 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-09 20:39:48,905 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-09 20:40:08,560 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-09 20:40:08,631 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-09 20:40:08,631 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-09 20:40:08,664 - root - INFO - Starting StoryTeller API server...
2025-06-09 20:40:08,664 - root - INFO - Host: 0.0.0.0
2025-06-09 20:40:08,664 - root - INFO - Port: 5001
2025-06-09 20:40:08,664 - root - INFO - Debug mode: True
2025-06-09 20:40:08,677 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5001
 * Running on http://10.0.0.243:5001
2025-06-09 20:40:08,677 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-09 20:40:08,678 - werkzeug - INFO -  * Restarting with stat
2025-06-09 20:40:09,303 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-09 20:40:09,344 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-09 20:40:09,344 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-09 20:40:09,365 - root - INFO - Starting StoryTeller API server...
2025-06-09 20:40:09,365 - root - INFO - Host: 0.0.0.0
2025-06-09 20:40:09,365 - root - INFO - Port: 5001
2025-06-09 20:40:09,365 - root - INFO - Debug mode: True
2025-06-09 20:40:09,367 - werkzeug - WARNING -  * Debugger is active!
2025-06-09 20:40:09,393 - werkzeug - INFO -  * Debugger PIN: 904-451-859
2025-06-09 20:43:08,798 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_progression.py', reloading
2025-06-09 20:43:08,882 - werkzeug - INFO -  * Restarting with stat
2025-06-09 20:49:00,562 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-09 20:49:00,627 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-09 20:49:00,627 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-09 20:49:00,648 - root - INFO - Starting StoryTeller API server...
2025-06-09 20:49:00,649 - root - INFO - Host: 0.0.0.0
2025-06-09 20:49:00,649 - root - INFO - Port: 5001
2025-06-09 20:49:00,649 - root - INFO - Debug mode: True
2025-06-09 20:49:00,663 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5001
 * Running on http://10.0.0.243:5001
2025-06-09 20:49:00,663 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-09 20:49:00,663 - werkzeug - INFO -  * Restarting with stat
2025-06-09 20:49:01,281 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-09 20:49:01,331 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-09 20:49:01,331 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-09 20:49:01,353 - root - INFO - Starting StoryTeller API server...
2025-06-09 20:49:01,353 - root - INFO - Host: 0.0.0.0
2025-06-09 20:49:01,353 - root - INFO - Port: 5001
2025-06-09 20:49:01,354 - root - INFO - Debug mode: True
2025-06-09 20:49:01,356 - werkzeug - WARNING -  * Debugger is active!
2025-06-09 20:49:01,382 - werkzeug - INFO -  * Debugger PIN: 904-451-859
2025-06-09 20:58:41,174 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_progression.py', reloading
2025-06-09 20:58:41,284 - werkzeug - INFO -  * Restarting with stat
2025-06-09 21:04:42,605 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-09 21:04:42,672 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-09 21:04:42,673 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-09 21:04:42,695 - root - INFO - Starting StoryTeller API server...
2025-06-09 21:04:42,695 - root - INFO - Host: 0.0.0.0
2025-06-09 21:04:42,695 - root - INFO - Port: 5001
2025-06-09 21:04:42,695 - root - INFO - Debug mode: True
2025-06-09 21:04:42,706 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5001
 * Running on http://10.0.0.243:5001
2025-06-09 21:04:42,706 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-09 21:04:42,706 - werkzeug - INFO -  * Restarting with stat
2025-06-09 21:04:43,312 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-09 21:04:43,357 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-09 21:04:43,357 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-09 21:04:43,378 - root - INFO - Starting StoryTeller API server...
2025-06-09 21:04:43,378 - root - INFO - Host: 0.0.0.0
2025-06-09 21:04:43,378 - root - INFO - Port: 5001
2025-06-09 21:04:43,378 - root - INFO - Debug mode: True
2025-06-09 21:04:43,381 - werkzeug - WARNING -  * Debugger is active!
2025-06-09 21:04:43,407 - werkzeug - INFO -  * Debugger PIN: 904-451-859
2025-06-09 21:07:09,004 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_progression.py', reloading
2025-06-09 21:07:09,153 - werkzeug - INFO -  * Restarting with stat
2025-06-09 21:07:10,037 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-09 21:07:10,113 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-09 21:07:10,113 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-09 21:07:10,147 - root - INFO - Starting StoryTeller API server...
2025-06-09 21:07:10,148 - root - INFO - Host: 0.0.0.0
2025-06-09 21:07:10,148 - root - INFO - Port: 5001
2025-06-09 21:07:10,148 - root - INFO - Debug mode: True
2025-06-09 21:07:10,153 - werkzeug - WARNING -  * Debugger is active!
2025-06-09 21:07:10,184 - werkzeug - INFO -  * Debugger PIN: 904-451-859
2025-06-09 21:21:11,164 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_progression.py', reloading
2025-06-09 21:21:11,253 - werkzeug - INFO -  * Restarting with stat
2025-06-09 21:21:12,134 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-09 21:21:12,214 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-09 21:21:12,214 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-09 21:21:12,235 - root - INFO - Starting StoryTeller API server...
2025-06-09 21:21:12,235 - root - INFO - Host: 0.0.0.0
2025-06-09 21:21:12,235 - root - INFO - Port: 5001
2025-06-09 21:21:12,235 - root - INFO - Debug mode: True
2025-06-09 21:21:12,239 - werkzeug - WARNING -  * Debugger is active!
2025-06-09 21:21:12,262 - werkzeug - INFO -  * Debugger PIN: 904-451-859
2025-06-09 21:21:45,225 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_progression.py', reloading
2025-06-09 21:21:45,310 - werkzeug - INFO -  * Restarting with stat
2025-06-09 21:21:46,069 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-09 21:21:46,133 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-09 21:21:46,133 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-09 21:21:46,154 - root - INFO - Starting StoryTeller API server...
2025-06-09 21:21:46,154 - root - INFO - Host: 0.0.0.0
2025-06-09 21:21:46,154 - root - INFO - Port: 5001
2025-06-09 21:21:46,154 - root - INFO - Debug mode: True
2025-06-09 21:21:46,158 - werkzeug - WARNING -  * Debugger is active!
2025-06-09 21:21:46,182 - werkzeug - INFO -  * Debugger PIN: 904-451-859
2025-06-09 21:30:19,892 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_progression.py', reloading
2025-06-09 21:30:19,996 - werkzeug - INFO -  * Restarting with stat
2025-06-09 21:30:20,784 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-09 21:45:50,434 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-09 21:45:56,742 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-09 21:46:02,960 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-09 21:46:03,022 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-09 21:46:03,022 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-09 21:46:03,029 - root - INFO - Starting StoryTeller API server...
2025-06-09 21:46:03,029 - root - INFO - Host: 0.0.0.0
2025-06-09 21:46:03,029 - root - INFO - Port: 5001
2025-06-09 21:46:03,029 - root - INFO - Debug mode: True
2025-06-09 21:46:03,039 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5001
 * Running on http://10.0.0.243:5001
2025-06-09 21:46:03,039 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-09 21:46:03,054 - werkzeug - INFO -  * Restarting with stat
2025-06-09 21:46:03,646 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-09 21:46:03,686 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-09 21:46:03,686 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-09 21:46:03,692 - root - INFO - Starting StoryTeller API server...
2025-06-09 21:46:03,693 - root - INFO - Host: 0.0.0.0
2025-06-09 21:46:03,693 - root - INFO - Port: 5001
2025-06-09 21:46:03,693 - root - INFO - Debug mode: True
2025-06-09 21:46:03,695 - werkzeug - WARNING -  * Debugger is active!
2025-06-09 21:46:03,721 - werkzeug - INFO -  * Debugger PIN: 904-451-859
2025-06-09 21:46:09,831 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 21:46:09] "OPTIONS /api/status HTTP/1.1" 200 -
2025-06-09 21:46:09,835 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 21:46:09] "OPTIONS /api/status HTTP/1.1" 200 -
2025-06-09 21:46:09,837 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 21:46:09] "GET /api/status HTTP/1.1" 200 -
2025-06-09 21:46:09,839 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 21:46:09] "GET /api/status HTTP/1.1" 200 -
2025-06-09 21:46:11,548 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 21:46:11] "GET /api/status HTTP/1.1" 200 -
2025-06-09 21:46:11,551 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 21:46:11] "GET /api/status HTTP/1.1" 200 -
2025-06-09 21:46:22,487 - app.services.firebase_service - INFO - Retrieved 2 stories
2025-06-09 21:46:22,488 - app.storage.storage - INFO - Retrieved 2 stories
2025-06-09 21:46:22,492 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 21:46:22] "OPTIONS /api/stories HTTP/1.1" 200 -
2025-06-09 21:46:22,498 - app.auth - INFO - Authentication successful for user: sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-09 21:46:22,699 - app.services.firebase_service - INFO - Retrieved 2 stories for user sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-09 21:46:22,700 - app.storage.storage - INFO - Retrieved 2 stories for user sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-09 21:46:23,030 - app.services.ai_service - INFO - Generated big story goal: Become the strongest cultivator.
2025-06-09 21:46:23,030 - app.services.ai_service - ERROR - Error generating initial story: name 'CultivationProgression' is not defined
2025-06-09 21:46:23,031 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 21:46:23] "[35m[1mPOST /api/stories HTTP/1.1[0m" 500 -
2025-06-09 21:47:17,579 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/services/ai_service.py', reloading
2025-06-09 21:47:19,679 - werkzeug - INFO -  * Restarting with stat
2025-06-09 21:47:20,474 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-09 21:47:20,534 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-09 21:47:20,535 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-09 21:47:20,542 - root - INFO - Starting StoryTeller API server...
2025-06-09 21:47:20,542 - root - INFO - Host: 0.0.0.0
2025-06-09 21:47:20,542 - root - INFO - Port: 5001
2025-06-09 21:47:20,542 - root - INFO - Debug mode: True
2025-06-09 21:47:20,562 - werkzeug - WARNING -  * Debugger is active!
2025-06-09 21:47:20,587 - werkzeug - INFO -  * Debugger PIN: 904-451-859
2025-06-09 21:47:22,007 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-09 21:47:22,074 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-09 21:47:22,074 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-09 21:47:22,081 - root - INFO - Starting StoryTeller API server...
2025-06-09 21:47:22,081 - root - INFO - Host: 0.0.0.0
2025-06-09 21:47:22,081 - root - INFO - Port: 5001
2025-06-09 21:47:22,081 - root - INFO - Debug mode: True
2025-06-09 21:47:22,108 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5001
 * Running on http://10.0.0.243:5001
2025-06-09 21:47:22,108 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-09 21:47:22,108 - werkzeug - INFO -  * Restarting with stat
2025-06-09 21:47:22,779 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-09 21:47:22,836 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-09 21:47:22,836 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-09 21:47:22,844 - root - INFO - Starting StoryTeller API server...
2025-06-09 21:47:22,844 - root - INFO - Host: 0.0.0.0
2025-06-09 21:47:22,844 - root - INFO - Port: 5001
2025-06-09 21:47:22,844 - root - INFO - Debug mode: True
2025-06-09 21:47:22,864 - werkzeug - WARNING -  * Debugger is active!
2025-06-09 21:47:22,890 - werkzeug - INFO -  * Debugger PIN: 904-451-859
2025-06-09 21:47:25,729 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 21:47:25] "OPTIONS /api/status HTTP/1.1" 200 -
2025-06-09 21:47:25,734 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 21:47:25] "OPTIONS /api/status HTTP/1.1" 200 -
2025-06-09 21:47:25,737 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 21:47:25] "GET /api/status HTTP/1.1" 200 -
2025-06-09 21:47:25,739 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 21:47:25] "GET /api/status HTTP/1.1" 200 -
2025-06-09 21:47:36,486 - app.services.firebase_service - INFO - Retrieved 2 stories
2025-06-09 21:47:36,486 - app.storage.storage - INFO - Retrieved 2 stories
2025-06-09 21:47:36,489 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 21:47:36] "OPTIONS /api/stories HTTP/1.1" 200 -
2025-06-09 21:47:36,494 - app.auth - INFO - Authentication successful for user: sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-09 21:47:36,701 - app.services.firebase_service - INFO - Retrieved 2 stories for user sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-09 21:47:36,701 - app.storage.storage - INFO - Retrieved 2 stories for user sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-09 21:47:37,050 - app.services.ai_service - INFO - Generated big story goal: Become the strongest cultivator.
2025-06-09 21:47:37,051 - app.services.ai_service - INFO - Using default genre for initial story (no specific genre found for cultivation)
2025-06-09 21:47:37,051 - app.services.ai_service - ERROR - Error generating initial story: type object 'AIService' has no attribute '_create_basic_story'
2025-06-09 21:47:37,052 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 21:47:37] "[35m[1mPOST /api/stories HTTP/1.1[0m" 500 -
2025-06-09 21:50:53,783 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_setting.py', reloading
2025-06-09 21:50:55,894 - werkzeug - INFO -  * Restarting with stat
2025-06-09 21:50:56,902 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-09 21:50:57,007 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-09 21:50:57,007 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-09 21:50:57,054 - root - INFO - Starting StoryTeller API server...
2025-06-09 21:50:57,054 - root - INFO - Host: 0.0.0.0
2025-06-09 21:50:57,054 - root - INFO - Port: 5001
2025-06-09 21:50:57,054 - root - INFO - Debug mode: True
2025-06-09 21:50:57,060 - werkzeug - WARNING -  * Debugger is active!
2025-06-09 21:50:57,094 - werkzeug - INFO -  * Debugger PIN: 904-451-859
2025-06-09 21:59:12,708 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 21:59:12] "OPTIONS /api/status HTTP/1.1" 200 -
2025-06-09 21:59:12,712 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 21:59:12] "OPTIONS /api/status HTTP/1.1" 200 -
2025-06-09 21:59:12,715 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 21:59:12] "GET /api/status HTTP/1.1" 200 -
2025-06-09 21:59:12,718 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 21:59:12] "GET /api/status HTTP/1.1" 200 -
2025-06-09 21:59:22,610 - app.services.firebase_service - INFO - Retrieved 2 stories
2025-06-09 21:59:22,611 - app.storage.storage - INFO - Retrieved 2 stories
2025-06-09 21:59:22,614 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 21:59:22] "OPTIONS /api/stories HTTP/1.1" 200 -
2025-06-09 21:59:22,619 - app.auth - INFO - Authentication successful for user: sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-09 21:59:22,767 - app.services.firebase_service - INFO - Retrieved 2 stories for user sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-09 21:59:22,768 - app.storage.storage - INFO - Retrieved 2 stories for user sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-09 21:59:23,015 - app.services.ai_service - INFO - Generated big story goal: Become the strongest cultivator.
2025-06-09 21:59:23,015 - app.services.ai_service - INFO - Using default genre for initial story (no specific genre found for cultivation)
2025-06-09 21:59:23,015 - app.services.ai_service - ERROR - Error generating initial story: type object 'AIService' has no attribute '_create_basic_story'
2025-06-09 21:59:23,016 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 21:59:23] "[35m[1mPOST /api/stories HTTP/1.1[0m" 500 -
2025-06-09 22:00:28,380 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/services/ai_service.py', reloading
2025-06-09 22:00:30,489 - werkzeug - INFO -  * Restarting with stat
2025-06-09 22:00:31,305 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-09 22:00:31,366 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-09 22:00:31,366 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-09 22:00:31,373 - root - INFO - Starting StoryTeller API server...
2025-06-09 22:00:31,373 - root - INFO - Host: 0.0.0.0
2025-06-09 22:00:31,373 - root - INFO - Port: 5001
2025-06-09 22:00:31,373 - root - INFO - Debug mode: True
2025-06-09 22:00:31,391 - werkzeug - WARNING -  * Debugger is active!
2025-06-09 22:00:31,416 - werkzeug - INFO -  * Debugger PIN: 904-451-859
2025-06-09 22:00:38,839 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 22:00:38] "OPTIONS /api/status HTTP/1.1" 200 -
2025-06-09 22:00:38,844 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 22:00:38] "GET /api/status HTTP/1.1" 200 -
2025-06-09 22:00:38,848 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 22:00:38] "GET /api/status HTTP/1.1" 200 -
2025-06-09 22:00:49,775 - app.services.firebase_service - INFO - Retrieved 2 stories
2025-06-09 22:00:49,776 - app.storage.storage - INFO - Retrieved 2 stories
2025-06-09 22:00:49,778 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 22:00:49] "OPTIONS /api/stories HTTP/1.1" 200 -
2025-06-09 22:00:49,783 - app.auth - INFO - Authentication successful for user: sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-09 22:00:49,990 - app.services.firebase_service - INFO - Retrieved 2 stories for user sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-09 22:00:49,990 - app.storage.storage - INFO - Retrieved 2 stories for user sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-09 22:00:50,390 - app.services.ai_service - INFO - Generated big story goal: Become the strongest cultivator.
2025-06-09 22:00:50,391 - app.services.ai_service - INFO - Using cultivation genre for initial story
2025-06-09 22:00:50,391 - app.services.story_planner - INFO - No matching theme found for goal: 'Become the strongest cultivator.', defaulting to 'revenge'
2025-06-09 22:00:50,391 - app.services.story_planner - INFO - Generated new arc goal: 'Hunt for a forbidden technique sealed by ancient cultivators.' for theme: 'revenge'
2025-06-09 22:00:50,391 - app.genres.cultivation_setting - INFO - Generated initial arc goal: Hunt for a forbidden technique sealed by ancient cultivators.
2025-06-09 22:00:50,392 - app.genres.cultivation_setting - INFO - Generating cultivation progression story for Ali
2025-06-09 22:00:50,392 - app.models.base_genre - INFO - Generating story for Ali
2025-06-09 22:00:55,716 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-09 22:00:55,727 - app.models.base_genre - INFO - ðŸŽ­ GENRE GPT RESPONSE (2702 chars):
2025-06-09 22:00:55,727 - app.models.base_genre - INFO - ============================================================
2025-06-09 22:00:55,727 - app.models.base_genre - INFO - [STORY]
Panel 1:
In a lush, mystical forest, the morning sun filters through the dense canopy, casting a golden hue over the ancient trees. Ali, a young cultivator with piercing eyes and a determined expression, stands at the forest's edge, his hand resting on the hilt of his sword.

Panel 2:
A gentle breeze rustles the leaves, and Ali closes his eyes, focusing his Qi. The air around him shimmers with a faint blue light as he engages his cultivation technique, the Azure Serenity Blade. His Qi forms intricate patterns resembling swirling water around his sword.

Panel 3:
Suddenly, a deep, rumbling growl echoes through the forest, and a massive, shadowy figure emerges from the foliage. It's a ferocious beast, its fur bristling, and its eyes fixed on Ali with hostility. This is no ordinary beast but a guardian of the ancient technique Ali seeks.

Panel 4:
Ali tenses, his grip on the sword tightening. With a swift motion, he charges towards the beast, his movements fluid and precise. The Qi surrounding his blade intensifies, emitting a brilliant azure light that cuts through the shadows.

Panel 5:
The beast retaliates with lightning speed, claws slashing through the air. Ali dodges, narrowly avoiding the attack, but the force of the beast's strike sends him crashing into a nearby tree. Leaves rain down around him as he struggles to his feet, determination burning in his eyes.

Panel 6:
As the beast circles, ready to strike again, Ali's mind races. He recalls a fragment of ancient text he read, hinting at a technique to pacify such guardians. Channeling his Qi with newfound focus, he attempts the Whispering Winds Dance, a technique said to calm even the most savage creatures.

Panel 7:
A soft, ethereal mist emanates from Ali, enveloping the beast in a soothing embrace. The ferocity in its eyes fades, replaced by a glimmer of recognition. The ancient guardian kneels before Ali, a sign of submission and acceptance.

Panel 8:
With the guardian subdued, Ali sees a shimmering light in the distance, emanating from a hidden path deeper into the forest. The forbidden technique he seeks lies beyond, guarded by more challenges and mysteries. The journey has only just begun.

[/STORY]

[CHOICES]
1. Embrace the guardian as an ally, seeking its guidance and protection on the path ahead, tapping into its knowledge of the forest's secrets.
2. Proceed cautiously towards the shimmering light, wary of potential traps or illusions surrounding the forbidden technique, maintaining a vigilant stance.
3. Meditate at the spot where the guardian knelt, attempting to commune with the forest spirits for insights and blessings before venturing further into the unknown depths.
[/CHOICES]
2025-06-09 22:00:55,728 - app.models.base_genre - INFO - ============================================================
2025-06-09 22:00:55,729 - app.models.base_genre - INFO - Successfully parsed genre response: story=2189 chars, choices=3
2025-06-09 22:00:55,729 - app.storage.storage - ERROR - Error creating story: 'StoryCreationParams' object has no attribute 'manga_genre'
2025-06-09 22:00:55,731 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 22:00:55] "[35m[1mPOST /api/stories HTTP/1.1[0m" 500 -
2025-06-09 22:05:34,952 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-09 22:05:35,023 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-09 22:05:35,023 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-09 22:05:35,045 - root - INFO - Starting StoryTeller API server...
2025-06-09 22:05:35,045 - root - INFO - Host: 0.0.0.0
2025-06-09 22:05:35,045 - root - INFO - Port: 5001
2025-06-09 22:05:35,045 - root - INFO - Debug mode: True
2025-06-09 22:05:35,054 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5001
 * Running on http://10.0.0.243:5001
2025-06-09 22:05:35,054 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-09 22:05:35,055 - werkzeug - INFO -  * Restarting with stat
2025-06-09 22:05:35,673 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-09 22:05:35,717 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-09 22:05:35,717 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-09 22:05:35,725 - root - INFO - Starting StoryTeller API server...
2025-06-09 22:05:35,725 - root - INFO - Host: 0.0.0.0
2025-06-09 22:05:35,725 - root - INFO - Port: 5001
2025-06-09 22:05:35,725 - root - INFO - Debug mode: True
2025-06-09 22:05:35,743 - werkzeug - WARNING -  * Debugger is active!
2025-06-09 22:05:35,773 - werkzeug - INFO -  * Debugger PIN: 904-451-859
2025-06-09 22:05:44,077 - app.services.firebase_service - INFO - Retrieved 2 stories
2025-06-09 22:05:44,077 - app.services.firebase_service - INFO - Retrieved 2 stories
2025-06-09 22:05:44,077 - app.storage.storage - INFO - Retrieved 2 stories
2025-06-09 22:05:44,078 - app.storage.storage - INFO - Retrieved 2 stories
2025-06-09 22:05:44,081 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 22:05:44] "OPTIONS /api/stories HTTP/1.1" 200 -
2025-06-09 22:05:44,081 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 22:05:44] "OPTIONS /api/stories HTTP/1.1" 200 -
2025-06-09 22:05:44,242 - app.services.firebase_service - INFO - Retrieved 2 stories for user sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-09 22:05:44,242 - app.storage.storage - INFO - Retrieved 2 stories for user sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-09 22:05:44,243 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 22:05:44] "GET /api/stories HTTP/1.1" 200 -
2025-06-09 22:05:44,427 - app.services.firebase_service - INFO - Retrieved 2 stories for user sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-09 22:05:44,428 - app.storage.storage - INFO - Retrieved 2 stories for user sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-09 22:05:44,429 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 22:05:44] "GET /api/stories HTTP/1.1" 200 -
2025-06-09 22:05:54,941 - app.services.firebase_service - INFO - Retrieved 2 stories
2025-06-09 22:05:54,942 - app.storage.storage - INFO - Retrieved 2 stories
2025-06-09 22:05:54,943 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 22:05:54] "OPTIONS /api/stories HTTP/1.1" 200 -
2025-06-09 22:05:54,948 - app.auth - INFO - Authentication successful for user: sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-09 22:05:55,120 - app.services.firebase_service - INFO - Retrieved 2 stories for user sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-09 22:05:55,121 - app.storage.storage - INFO - Retrieved 2 stories for user sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-09 22:05:55,398 - app.services.ai_service - INFO - Generated big story goal: Become the strongest cultivator.
2025-06-09 22:05:55,398 - app.services.ai_service - INFO - Using cultivation genre for initial story
2025-06-09 22:05:55,399 - app.services.story_planner - INFO - No matching theme found for goal: 'Become the strongest cultivator.', defaulting to 'revenge'
2025-06-09 22:05:55,399 - app.services.story_planner - INFO - Generated new arc goal: 'Explore the forbidden grounds near the sect.' for theme: 'revenge'
2025-06-09 22:05:55,399 - app.genres.cultivation_setting - INFO - Generated initial arc goal: Explore the forbidden grounds near the sect.
2025-06-09 22:05:55,399 - app.genres.cultivation_setting - INFO - Generating cultivation progression story for Ali
2025-06-09 22:05:55,399 - app.models.base_genre - INFO - Generating story for Ali
2025-06-09 22:05:59,953 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-09 22:05:59,965 - app.models.base_genre - INFO - ðŸŽ­ GENRE GPT RESPONSE (2354 chars):
2025-06-09 22:05:59,966 - app.models.base_genre - INFO - ============================================================
2025-06-09 22:05:59,966 - app.models.base_genre - INFO - [STORY]
Panel 1:
(Open with a vibrant scene at the sect's entrance. Ali, with determination in his eyes, gazes at the forbidden grounds, shrouded in mystery and danger. The mood is tense and exciting as fellow disciples gossip about the forbidden areas.)

Panel 2:
(Ali overhears a conversation between two senior disciples about the dangers lurking in the forbidden grounds. One disciple mentions a powerful cultivation technique rumored to be hidden there. Ali's eyes widen with curiosity.)

Panel 3:
(Determined, Ali approaches the sect leader to request permission to explore the forbidden grounds. The sect leader, a stern figure, warns Ali about the perils but ultimately grants him permission, intrigued by Ali's boldness.)

Panel 4:
(Ali steps into the forbidden grounds, feeling a rush of anticipation. As he takes his first steps, ancient runes on the ground light up, setting an ominous tone.)

Panel 5:
(Suddenly, Ali is enveloped in a swirling vortex of chaotic Qi, his senses overwhelmed. He struggles to maintain his focus as the Qi threatens to consume him. This is no ordinary place.)

Panel 6:
(In the midst of the chaos, Ali recalls a cultivation technique from his past life, the "Soul Calm Technique," which allows him to center his Qi and find balance. He begins to channel the technique, the Qi around him responding to his newfound control.)

Panel 7:
(Ali emerges from the vortex, his Qi now visibly calmer and more refined. The forbidden grounds feel different, as if they are now attuned to him. He senses that there is more to uncover here, a secret waiting to be revealed.)

Panel 8:
(As Ali stands at the threshold of this mysterious realm, he is faced with a choice: delve deeper into the forbidden grounds to unlock its secrets, return to the sect with his newfound knowledge, or seek out the source of the ancient runes that reacted to his Qi.)

[/STORY]

[CHOICES]
1. Ali decides to delve deeper into the forbidden grounds, eager to uncover more secrets and challenges that await him within.
2. Feeling a sense of responsibility, Ali chooses to return to the sect and share his discoveries, hoping to gain recognition and support for further exploration.
3. Intrigued by the ancient runes' reaction to his Qi, Ali sets off to seek out the source, believing it may hold the key to his cultivation breakthrough.
[/CHOICES]
2025-06-09 22:05:59,966 - app.models.base_genre - INFO - ============================================================
2025-06-09 22:05:59,967 - app.models.base_genre - INFO - Successfully parsed genre response: story=1869 chars, choices=3
2025-06-09 22:06:00,162 - app.services.firebase_service - INFO - Saved story story_1749531959_a43b5e1a: Ali's Cultivation Story
2025-06-09 22:06:00,163 - app.storage.storage - INFO - Saved story story_1749531959_a43b5e1a: Ali's Cultivation Story
2025-06-09 22:06:00,163 - app.storage.storage - INFO - Created new story: story_1749531959_a43b5e1a: Ali's Cultivation Story
2025-06-09 22:06:00,515 - app.services.usage_service - INFO - Updated usage for user: sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-09 22:06:01,071 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 22:06:01] "POST /api/stories HTTP/1.1" 200 -
2025-06-09 22:06:01,311 - app.services.firebase_service - INFO - Retrieved story story_1749531959_a43b5e1a: Ali's Cultivation Story
2025-06-09 22:06:01,312 - app.storage.storage - INFO - Retrieved story story_1749531959_a43b5e1a: Ali's Cultivation Story
2025-06-09 22:06:01,314 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 22:06:01] "OPTIONS /api/stories/story_1749531959_a43b5e1a HTTP/1.1" 200 -
2025-06-09 22:06:01,458 - app.services.firebase_service - INFO - Retrieved story story_1749531959_a43b5e1a: Ali's Cultivation Story
2025-06-09 22:06:01,459 - app.storage.storage - INFO - Retrieved story story_1749531959_a43b5e1a: Ali's Cultivation Story
2025-06-09 22:06:01,462 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 22:06:01] "OPTIONS /api/stories/story_1749531959_a43b5e1a HTTP/1.1" 200 -
2025-06-09 22:06:01,517 - app.services.firebase_service - INFO - Retrieved story story_1749531959_a43b5e1a: Ali's Cultivation Story
2025-06-09 22:06:01,518 - app.storage.storage - INFO - Retrieved story story_1749531959_a43b5e1a: Ali's Cultivation Story
2025-06-09 22:06:01,521 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 22:06:01] "GET /api/stories/story_1749531959_a43b5e1a HTTP/1.1" 200 -
2025-06-09 22:06:01,608 - app.services.firebase_service - INFO - Retrieved story story_1749531959_a43b5e1a: Ali's Cultivation Story
2025-06-09 22:06:01,609 - app.storage.storage - INFO - Retrieved story story_1749531959_a43b5e1a: Ali's Cultivation Story
2025-06-09 22:06:01,610 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 22:06:01] "GET /api/stories/story_1749531959_a43b5e1a HTTP/1.1" 200 -
2025-06-09 22:10:23,329 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_setting.py', reloading
2025-06-09 22:10:25,434 - werkzeug - INFO -  * Restarting with stat
2025-06-09 22:10:26,276 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-09 22:10:26,336 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-09 22:10:26,336 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-09 22:10:26,343 - root - INFO - Starting StoryTeller API server...
2025-06-09 22:10:26,343 - root - INFO - Host: 0.0.0.0
2025-06-09 22:10:26,343 - root - INFO - Port: 5001
2025-06-09 22:10:26,343 - root - INFO - Debug mode: True
2025-06-09 22:10:26,360 - werkzeug - WARNING -  * Debugger is active!
2025-06-09 22:10:26,388 - werkzeug - INFO -  * Debugger PIN: 904-451-859
2025-06-09 22:15:34,978 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_setting.py', reloading
2025-06-09 22:15:35,079 - werkzeug - INFO -  * Restarting with stat
2025-06-09 22:15:35,930 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-09 22:15:35,991 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-09 22:15:35,991 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-09 22:15:35,998 - root - INFO - Starting StoryTeller API server...
2025-06-09 22:15:35,998 - root - INFO - Host: 0.0.0.0
2025-06-09 22:15:35,998 - root - INFO - Port: 5001
2025-06-09 22:15:35,998 - root - INFO - Debug mode: True
2025-06-09 22:15:36,016 - werkzeug - WARNING -  * Debugger is active!
2025-06-09 22:15:36,043 - werkzeug - INFO -  * Debugger PIN: 904-451-859
2025-06-09 22:16:00,666 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_setting.py', reloading
2025-06-09 22:16:00,735 - werkzeug - INFO -  * Restarting with stat
2025-06-09 22:16:01,527 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-09 22:16:01,586 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-09 22:16:01,586 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-09 22:16:01,592 - root - INFO - Starting StoryTeller API server...
2025-06-09 22:16:01,592 - root - INFO - Host: 0.0.0.0
2025-06-09 22:16:01,592 - root - INFO - Port: 5001
2025-06-09 22:16:01,592 - root - INFO - Debug mode: True
2025-06-09 22:16:01,609 - werkzeug - WARNING -  * Debugger is active!
2025-06-09 22:16:01,634 - werkzeug - INFO -  * Debugger PIN: 904-451-859
2025-06-09 22:16:37,707 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_setting.py', reloading
2025-06-09 22:16:37,800 - werkzeug - INFO -  * Restarting with stat
2025-06-09 22:16:38,554 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-09 22:16:38,613 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-09 22:16:38,613 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-09 22:16:38,620 - root - INFO - Starting StoryTeller API server...
2025-06-09 22:16:38,620 - root - INFO - Host: 0.0.0.0
2025-06-09 22:16:38,620 - root - INFO - Port: 5001
2025-06-09 22:16:38,620 - root - INFO - Debug mode: True
2025-06-09 22:16:38,639 - werkzeug - WARNING -  * Debugger is active!
2025-06-09 22:16:38,665 - werkzeug - INFO -  * Debugger PIN: 904-451-859
2025-06-09 22:18:08,641 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_setting.py', reloading
2025-06-09 22:18:08,742 - werkzeug - INFO -  * Restarting with stat
2025-06-09 22:18:09,495 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-09 22:18:09,561 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-09 22:18:09,561 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-09 22:18:09,568 - root - INFO - Starting StoryTeller API server...
2025-06-09 22:18:09,568 - root - INFO - Host: 0.0.0.0
2025-06-09 22:18:09,568 - root - INFO - Port: 5001
2025-06-09 22:18:09,568 - root - INFO - Debug mode: True
2025-06-09 22:18:09,586 - werkzeug - WARNING -  * Debugger is active!
2025-06-09 22:18:09,613 - werkzeug - INFO -  * Debugger PIN: 904-451-859
2025-06-09 22:18:22,973 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_setting.py', reloading
2025-06-09 22:18:23,065 - werkzeug - INFO -  * Restarting with stat
2025-06-09 22:18:23,784 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-09 22:18:23,840 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-09 22:18:23,840 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-09 22:18:23,846 - root - INFO - Starting StoryTeller API server...
2025-06-09 22:18:23,846 - root - INFO - Host: 0.0.0.0
2025-06-09 22:18:23,846 - root - INFO - Port: 5001
2025-06-09 22:18:23,846 - root - INFO - Debug mode: True
2025-06-09 22:18:23,864 - werkzeug - WARNING -  * Debugger is active!
2025-06-09 22:18:23,888 - werkzeug - INFO -  * Debugger PIN: 904-451-859
2025-06-09 22:20:06,598 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_setting.py', reloading
2025-06-09 22:20:06,673 - werkzeug - INFO -  * Restarting with stat
2025-06-09 22:20:07,392 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-09 22:20:07,448 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-09 22:20:07,448 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-09 22:20:07,454 - root - INFO - Starting StoryTeller API server...
2025-06-09 22:20:07,455 - root - INFO - Host: 0.0.0.0
2025-06-09 22:20:07,455 - root - INFO - Port: 5001
2025-06-09 22:20:07,455 - root - INFO - Debug mode: True
2025-06-09 22:20:07,472 - werkzeug - WARNING -  * Debugger is active!
2025-06-09 22:20:07,496 - werkzeug - INFO -  * Debugger PIN: 904-451-859
2025-06-09 22:20:27,976 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_setting.py', reloading
2025-06-09 22:20:28,071 - werkzeug - INFO -  * Restarting with stat
2025-06-09 22:20:28,796 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-09 22:20:28,854 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-09 22:20:28,854 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-09 22:20:28,861 - root - INFO - Starting StoryTeller API server...
2025-06-09 22:20:28,861 - root - INFO - Host: 0.0.0.0
2025-06-09 22:20:28,861 - root - INFO - Port: 5001
2025-06-09 22:20:28,861 - root - INFO - Debug mode: True
2025-06-09 22:20:28,879 - werkzeug - WARNING -  * Debugger is active!
2025-06-09 22:20:28,902 - werkzeug - INFO -  * Debugger PIN: 904-451-859
2025-06-09 22:20:54,934 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-09 22:20:54,992 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-09 22:20:54,993 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-09 22:20:55,000 - root - INFO - Starting StoryTeller API server...
2025-06-09 22:20:55,000 - root - INFO - Host: 0.0.0.0
2025-06-09 22:20:55,000 - root - INFO - Port: 5001
2025-06-09 22:20:55,000 - root - INFO - Debug mode: True
2025-06-09 22:20:55,025 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5001
 * Running on http://10.0.0.243:5001
2025-06-09 22:20:55,025 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-09 22:20:55,026 - werkzeug - INFO -  * Restarting with stat
2025-06-09 22:20:55,670 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-09 22:20:55,714 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-09 22:20:55,714 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-09 22:20:55,721 - root - INFO - Starting StoryTeller API server...
2025-06-09 22:20:55,721 - root - INFO - Host: 0.0.0.0
2025-06-09 22:20:55,721 - root - INFO - Port: 5001
2025-06-09 22:20:55,721 - root - INFO - Debug mode: True
2025-06-09 22:20:55,738 - werkzeug - WARNING -  * Debugger is active!
2025-06-09 22:20:55,765 - werkzeug - INFO -  * Debugger PIN: 904-451-859
2025-06-09 22:21:14,082 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 22:21:14] "OPTIONS /api/status HTTP/1.1" 200 -
2025-06-09 22:21:14,084 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 22:21:14] "OPTIONS /api/status HTTP/1.1" 200 -
2025-06-09 22:21:14,087 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 22:21:14] "GET /api/status HTTP/1.1" 200 -
2025-06-09 22:21:14,090 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 22:21:14] "GET /api/status HTTP/1.1" 200 -
2025-06-09 22:21:23,951 - app.services.firebase_service - INFO - Retrieved 0 stories
2025-06-09 22:21:23,951 - app.storage.storage - INFO - Retrieved 0 stories
2025-06-09 22:21:23,952 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 22:21:23] "OPTIONS /api/stories HTTP/1.1" 200 -
2025-06-09 22:21:23,960 - app.auth - INFO - Authentication successful for user: sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-09 22:21:24,131 - app.services.firebase_service - INFO - Retrieved 0 stories for user sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-09 22:21:24,132 - app.storage.storage - INFO - Retrieved 0 stories for user sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-09 22:21:24,246 - app.services.usage_service - INFO - Auto-correcting count for sTttyhSg8VdcI4Axw1Nj9WOBXv33: 3 -> 0
2025-06-09 22:21:24,598 - app.services.ai_service - INFO - Generated big story goal: Become the strongest cultivator.
2025-06-09 22:21:24,599 - app.services.ai_service - INFO - Using cultivation genre for initial story
2025-06-09 22:21:24,599 - app.services.story_planner - INFO - No matching theme found for goal: 'Become the strongest cultivator.', defaulting to 'revenge'
2025-06-09 22:21:24,599 - app.services.story_planner - INFO - Generated new arc goal: 'Investigate rumors about the betrayer's past.' for theme: 'revenge'
2025-06-09 22:21:24,599 - app.genres.cultivation_setting - INFO - Generated initial arc goal: Investigate rumors about the betrayer's past.
2025-06-09 22:21:24,599 - app.genres.cultivation_setting - INFO - Generating cultivation progression story for Ali
2025-06-09 22:21:24,599 - app.models.base_genre - INFO - Generating story for Ali
2025-06-09 22:21:32,216 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-09 22:21:32,229 - app.models.base_genre - INFO - ðŸŽ­ GENRE GPT RESPONSE (2052 chars):
2025-06-09 22:21:32,230 - app.models.base_genre - INFO - ============================================================
2025-06-09 22:21:32,230 - app.models.base_genre - INFO - [STORY]
---  
In a mountain valley shrouded in mist, Ali, a reincarnated youth, meditates under a waterfall. His eyes glow with determination, his Qi swirling around him in vibrant hues of azure and gold.  
   
A sudden tremor shakes the valley, causing rocks to tumble down the steep cliffs. Ali leaps into action, using his cultivation technique "Thunderous Palm" to shatter the falling rocks before they hit the ground. His hands crackle with lightning Qi, illuminating the valley.   
   
As the dust settles, a mysterious figure emerges from the shadows. It's Liao, a reclusive cultivator known for his cryptic ways. "Seek not what is lost, but what remains hidden," Liao murmurs, his voice echoing with ancient wisdom.  
   
Ali's curiosity piqued, he approaches Liao cautiously, his Qi pulsating with a mix of wariness and intrigue. "What do you know of the betrayer's past?" Ali asks, his tone firm yet respectful.  
   
Liao's eyes gleam with a knowing glint. "To uncover the truth, you must first master the "Shadow Step" technique," he replies enigmatically, disappearing in a swirl of black mist.  
   
Determined to unravel the mysteries surrounding the betrayer, Ali focuses his Qi, attempting the Shadow Step technique. Shadows dance around him, and with a swift movement, Ali vanishes from sight, reappearing behind a boulder.   
   
Just then, a cloaked figure approaches, emanating an aura of deceit. "Looking for answers, Ali?" the figure taunts, revealing themselves as a former ally turned traitor.  
--- 

[CHOICES]
1. With a steely gaze, Ali charges towards the traitor, ready to confront them head-on and demand the truth about their betrayal.
2. Intrigued by the traitor's cryptic words, Ali decides to observe them from the shadows, using his newfound Shadow Step technique to uncover any hidden secrets or motives.
3. Realizing that direct confrontation might not yield the answers he seeks, Ali opts to track the traitor discreetly, following them to a secluded cave where they might reveal their true intentions. 
[/CHOICES]
2025-06-09 22:21:32,230 - app.models.base_genre - INFO - ============================================================
2025-06-09 22:21:32,233 - app.models.base_genre - INFO - Successfully parsed genre response: story=1511 chars, choices=3
2025-06-09 22:21:32,363 - app.services.firebase_service - INFO - Saved story story_1749532892_033dc7ca: Ali's Cultivation Story
2025-06-09 22:21:32,364 - app.storage.storage - INFO - Saved story story_1749532892_033dc7ca: Ali's Cultivation Story
2025-06-09 22:21:32,364 - app.storage.storage - INFO - Created new story: story_1749532892_033dc7ca: Ali's Cultivation Story
2025-06-09 22:21:32,733 - app.services.usage_service - INFO - Updated usage for user: sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-09 22:21:33,231 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 22:21:33] "POST /api/stories HTTP/1.1" 200 -
2025-06-09 22:21:33,542 - app.services.firebase_service - INFO - Retrieved story story_1749532892_033dc7ca: Ali's Cultivation Story
2025-06-09 22:21:33,544 - app.storage.storage - INFO - Retrieved story story_1749532892_033dc7ca: Ali's Cultivation Story
2025-06-09 22:21:33,546 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 22:21:33] "OPTIONS /api/stories/story_1749532892_033dc7ca HTTP/1.1" 200 -
2025-06-09 22:21:33,619 - app.services.firebase_service - INFO - Retrieved story story_1749532892_033dc7ca: Ali's Cultivation Story
2025-06-09 22:21:33,624 - app.storage.storage - INFO - Retrieved story story_1749532892_033dc7ca: Ali's Cultivation Story
2025-06-09 22:21:33,625 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 22:21:33] "OPTIONS /api/stories/story_1749532892_033dc7ca HTTP/1.1" 200 -
2025-06-09 22:21:33,665 - app.services.firebase_service - INFO - Retrieved story story_1749532892_033dc7ca: Ali's Cultivation Story
2025-06-09 22:21:33,666 - app.storage.storage - INFO - Retrieved story story_1749532892_033dc7ca: Ali's Cultivation Story
2025-06-09 22:21:33,668 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 22:21:33] "GET /api/stories/story_1749532892_033dc7ca HTTP/1.1" 200 -
2025-06-09 22:21:33,829 - app.services.firebase_service - INFO - Retrieved story story_1749532892_033dc7ca: Ali's Cultivation Story
2025-06-09 22:21:33,829 - app.storage.storage - INFO - Retrieved story story_1749532892_033dc7ca: Ali's Cultivation Story
2025-06-09 22:21:33,831 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 22:21:33] "GET /api/stories/story_1749532892_033dc7ca HTTP/1.1" 200 -
2025-06-09 22:23:46,590 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_setting.py', reloading
2025-06-09 22:23:48,690 - werkzeug - INFO -  * Restarting with stat
2025-06-09 22:23:49,566 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-09 22:23:49,634 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-09 22:23:49,634 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-09 22:23:49,641 - root - INFO - Starting StoryTeller API server...
2025-06-09 22:23:49,641 - root - INFO - Host: 0.0.0.0
2025-06-09 22:23:49,641 - root - INFO - Port: 5001
2025-06-09 22:23:49,641 - root - INFO - Debug mode: True
2025-06-09 22:23:49,663 - werkzeug - WARNING -  * Debugger is active!
2025-06-09 22:23:49,689 - werkzeug - INFO -  * Debugger PIN: 904-451-859
2025-06-09 22:23:49,702 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 22:23:49] "OPTIONS /api/status HTTP/1.1" 200 -
2025-06-09 22:23:49,703 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 22:23:49] "OPTIONS /api/status HTTP/1.1" 200 -
2025-06-09 22:23:49,705 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 22:23:49] "GET /api/status HTTP/1.1" 200 -
2025-06-09 22:23:49,707 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 22:23:49] "GET /api/status HTTP/1.1" 200 -
2025-06-09 22:23:58,207 - app.services.firebase_service - INFO - Retrieved 1 stories
2025-06-09 22:23:58,208 - app.storage.storage - INFO - Retrieved 1 stories
2025-06-09 22:23:58,212 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 22:23:58] "OPTIONS /api/stories HTTP/1.1" 200 -
2025-06-09 22:23:58,217 - app.auth - INFO - Authentication successful for user: sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-09 22:23:58,332 - app.services.firebase_service - INFO - Retrieved 1 stories for user sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-09 22:23:58,332 - app.storage.storage - INFO - Retrieved 1 stories for user sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-09 22:23:58,550 - app.services.ai_service - INFO - Generated big story goal: Become the strongest cultivator.
2025-06-09 22:23:58,550 - app.services.ai_service - INFO - Using cultivation genre for initial story
2025-06-09 22:23:58,551 - app.services.story_planner - INFO - No matching theme found for goal: 'Become the strongest cultivator.', defaulting to 'revenge'
2025-06-09 22:23:58,551 - app.services.story_planner - INFO - Generated new arc goal: 'Hunt for a forbidden technique sealed by ancient cultivators.' for theme: 'revenge'
2025-06-09 22:23:58,551 - app.genres.cultivation_setting - INFO - Generated initial arc goal: Hunt for a forbidden technique sealed by ancient cultivators.
2025-06-09 22:23:58,551 - app.genres.cultivation_setting - INFO - Generating cultivation progression story for ali
2025-06-09 22:23:58,551 - app.models.base_genre - INFO - Generating story for ali
2025-06-09 22:24:05,102 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-09 22:24:05,114 - app.models.base_genre - INFO - ðŸŽ­ GENRE GPT RESPONSE (1892 chars):
2025-06-09 22:24:05,115 - app.models.base_genre - INFO - ============================================================
2025-06-09 22:24:05,115 - app.models.base_genre - INFO - [STORY]
  
---  
In the mystical Valley of Serenity, ali, a reincarnated soul with ancient memories, gazes at the towering Waterfall Peak, its cascading waters emitting a vibrant blue Qi glow.  
  
---  
Curious, ali steps closer, sensing an unusual energy emanating from the base of the waterfall.  
  
---  
As ali approaches, the water ripples and shapes into a fearsome Water Dragon, its silver scales shimmering under the sunlight.  
  
---  
The Water Dragon speaks, "Prove your worth, child of destiny, to unlock the Forbidden Flowing Tide Technique."  
  
---  
ali, determined and intrigued, readies his stance, focusing his Qi to resonate with the dragon's aura.  
  
---  
With a swift movement, ali unleashes the Flowing Tide Fist, a technique he recalls from his past life, causing the dragon's form to waver.  
  
---  
The dragon nods in approval, granting ali a fragment of its essence imbued with the ancient cultivation method.  
  
---  
As the energy settles within him, ali feels a surge of power and clarity, his connection to the water element deepening.  
  
---  
A mysterious figure emerges from the shadows, revealing herself as Mei Ling, a skilled cultivator seeking the Forbidden Flowing Tide Technique.  
  
---  
Mei Ling challenges ali to a friendly sparring match, eager to test his newfound knowledge and strength.  
  
---  
ali, intrigued by Mei Ling's aura, accepts the challenge, ready to showcase his mastery of the Flowing Tide Fist.  
  
---  
  
[CHOICES]
1. Unleash a modified version of the Flowing Tide Fist, incorporating Mei Ling's Wind Qi technique to create a new hybrid move.
2. Focus on defense, utilizing the Water Dragonâ€™s essence to create a protective barrier against Mei Lingâ€™s attacks.
3. Channel the Forbidden Flowing Tide Technique to enhance your speed and agility, aiming to outmaneuver Mei Ling in the sparring match.  
[/CHOICES]
2025-06-09 22:24:05,115 - app.models.base_genre - INFO - ============================================================
2025-06-09 22:24:05,121 - app.models.base_genre - INFO - Successfully parsed genre response: story=1458 chars, choices=3
2025-06-09 22:24:05,259 - app.services.firebase_service - INFO - Saved story story_1749533045_c5672606: ali's Cultivation Story
2025-06-09 22:24:05,259 - app.storage.storage - INFO - Saved story story_1749533045_c5672606: ali's Cultivation Story
2025-06-09 22:24:05,259 - app.storage.storage - INFO - Created new story: story_1749533045_c5672606: ali's Cultivation Story
2025-06-09 22:24:05,481 - app.services.usage_service - INFO - Updated usage for user: sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-09 22:24:05,787 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 22:24:05] "POST /api/stories HTTP/1.1" 200 -
2025-06-09 22:24:06,003 - app.services.firebase_service - INFO - Retrieved story story_1749533045_c5672606: ali's Cultivation Story
2025-06-09 22:24:06,004 - app.storage.storage - INFO - Retrieved story story_1749533045_c5672606: ali's Cultivation Story
2025-06-09 22:24:06,006 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 22:24:06] "OPTIONS /api/stories/story_1749533045_c5672606 HTTP/1.1" 200 -
2025-06-09 22:24:06,009 - app.services.firebase_service - INFO - Retrieved story story_1749533045_c5672606: ali's Cultivation Story
2025-06-09 22:24:06,009 - app.storage.storage - INFO - Retrieved story story_1749533045_c5672606: ali's Cultivation Story
2025-06-09 22:24:06,013 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 22:24:06] "OPTIONS /api/stories/story_1749533045_c5672606 HTTP/1.1" 200 -
2025-06-09 22:24:06,115 - app.services.firebase_service - INFO - Retrieved story story_1749533045_c5672606: ali's Cultivation Story
2025-06-09 22:24:06,116 - app.storage.storage - INFO - Retrieved story story_1749533045_c5672606: ali's Cultivation Story
2025-06-09 22:24:06,118 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 22:24:06] "GET /api/stories/story_1749533045_c5672606 HTTP/1.1" 200 -
2025-06-09 22:24:06,224 - app.services.firebase_service - INFO - Retrieved story story_1749533045_c5672606: ali's Cultivation Story
2025-06-09 22:24:06,225 - app.storage.storage - INFO - Retrieved story story_1749533045_c5672606: ali's Cultivation Story
2025-06-09 22:24:06,226 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 22:24:06] "GET /api/stories/story_1749533045_c5672606 HTTP/1.1" 200 -
2025-06-09 22:28:24,179 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_setting.py', reloading
2025-06-09 22:28:26,295 - werkzeug - INFO -  * Restarting with stat
2025-06-09 22:28:27,095 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-09 22:28:27,153 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-09 22:28:27,153 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-09 22:28:27,160 - root - INFO - Starting StoryTeller API server...
2025-06-09 22:28:27,160 - root - INFO - Host: 0.0.0.0
2025-06-09 22:28:27,160 - root - INFO - Port: 5001
2025-06-09 22:28:27,160 - root - INFO - Debug mode: True
2025-06-09 22:28:27,179 - werkzeug - WARNING -  * Debugger is active!
2025-06-09 22:28:27,202 - werkzeug - INFO -  * Debugger PIN: 904-451-859
2025-06-09 22:29:24,921 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_setting.py', reloading
2025-06-09 22:29:25,008 - werkzeug - INFO -  * Restarting with stat
2025-06-09 22:29:25,791 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-09 22:29:25,847 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-09 22:29:25,847 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-09 22:29:25,854 - root - INFO - Starting StoryTeller API server...
2025-06-09 22:29:25,854 - root - INFO - Host: 0.0.0.0
2025-06-09 22:29:25,854 - root - INFO - Port: 5001
2025-06-09 22:29:25,854 - root - INFO - Debug mode: True
2025-06-09 22:29:25,872 - werkzeug - WARNING -  * Debugger is active!
2025-06-09 22:29:25,896 - werkzeug - INFO -  * Debugger PIN: 904-451-859
2025-06-09 22:30:15,272 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_setting.py', reloading
2025-06-09 22:30:15,359 - werkzeug - INFO -  * Restarting with stat
2025-06-09 22:30:16,090 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-09 22:30:16,145 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-09 22:30:16,145 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-09 22:30:16,152 - root - INFO - Starting StoryTeller API server...
2025-06-09 22:30:16,152 - root - INFO - Host: 0.0.0.0
2025-06-09 22:30:16,152 - root - INFO - Port: 5001
2025-06-09 22:30:16,152 - root - INFO - Debug mode: True
2025-06-09 22:30:16,170 - werkzeug - WARNING -  * Debugger is active!
2025-06-09 22:30:16,193 - werkzeug - INFO -  * Debugger PIN: 904-451-859
2025-06-09 22:32:58,423 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_setting.py', reloading
2025-06-09 22:32:58,518 - werkzeug - INFO -  * Restarting with stat
2025-06-09 22:32:59,267 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-09 22:32:59,325 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-09 22:32:59,325 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-09 22:32:59,332 - root - INFO - Starting StoryTeller API server...
2025-06-09 22:32:59,332 - root - INFO - Host: 0.0.0.0
2025-06-09 22:32:59,332 - root - INFO - Port: 5001
2025-06-09 22:32:59,332 - root - INFO - Debug mode: True
2025-06-09 22:32:59,350 - werkzeug - WARNING -  * Debugger is active!
2025-06-09 22:32:59,374 - werkzeug - INFO -  * Debugger PIN: 904-451-859
2025-06-09 22:34:00,010 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_setting.py', reloading
2025-06-09 22:34:00,110 - werkzeug - INFO -  * Restarting with stat
2025-06-09 22:34:00,883 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-09 22:34:00,939 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-09 22:34:00,939 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-09 22:34:00,945 - root - INFO - Starting StoryTeller API server...
2025-06-09 22:34:00,945 - root - INFO - Host: 0.0.0.0
2025-06-09 22:34:00,945 - root - INFO - Port: 5001
2025-06-09 22:34:00,946 - root - INFO - Debug mode: True
2025-06-09 22:34:00,963 - werkzeug - WARNING -  * Debugger is active!
2025-06-09 22:34:00,989 - werkzeug - INFO -  * Debugger PIN: 904-451-859
2025-06-09 22:34:41,171 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_setting.py', reloading
2025-06-09 22:34:41,255 - werkzeug - INFO -  * Restarting with stat
2025-06-09 22:34:42,035 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-09 22:34:42,090 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-09 22:34:42,090 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-09 22:34:42,097 - root - INFO - Starting StoryTeller API server...
2025-06-09 22:34:42,097 - root - INFO - Host: 0.0.0.0
2025-06-09 22:34:42,097 - root - INFO - Port: 5001
2025-06-09 22:34:42,097 - root - INFO - Debug mode: True
2025-06-09 22:34:42,114 - werkzeug - WARNING -  * Debugger is active!
2025-06-09 22:34:42,142 - werkzeug - INFO -  * Debugger PIN: 904-451-859
2025-06-09 22:35:12,780 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-09 22:35:12,835 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-09 22:35:12,835 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-09 22:35:12,842 - root - INFO - Starting StoryTeller API server...
2025-06-09 22:35:12,842 - root - INFO - Host: 0.0.0.0
2025-06-09 22:35:12,842 - root - INFO - Port: 5001
2025-06-09 22:35:12,843 - root - INFO - Debug mode: True
2025-06-09 22:35:12,868 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5001
 * Running on http://10.0.0.243:5001
2025-06-09 22:35:12,868 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-09 22:35:12,869 - werkzeug - INFO -  * Restarting with stat
2025-06-09 22:35:13,492 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-09 22:35:13,535 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-09 22:35:13,535 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-09 22:35:13,542 - root - INFO - Starting StoryTeller API server...
2025-06-09 22:35:13,542 - root - INFO - Host: 0.0.0.0
2025-06-09 22:35:13,542 - root - INFO - Port: 5001
2025-06-09 22:35:13,542 - root - INFO - Debug mode: True
2025-06-09 22:35:13,559 - werkzeug - WARNING -  * Debugger is active!
2025-06-09 22:35:13,585 - werkzeug - INFO -  * Debugger PIN: 904-451-859
2025-06-09 22:35:16,892 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 22:35:16] "OPTIONS /api/status HTTP/1.1" 200 -
2025-06-09 22:35:16,898 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 22:35:16] "OPTIONS /api/status HTTP/1.1" 200 -
2025-06-09 22:35:17,706 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 22:35:17] "OPTIONS /api/status HTTP/1.1" 200 -
2025-06-09 22:35:17,709 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 22:35:17] "GET /api/status HTTP/1.1" 200 -
2025-06-09 22:35:17,715 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 22:35:17] "GET /api/status HTTP/1.1" 200 -
2025-06-09 22:35:33,693 - app.services.firebase_service - INFO - Retrieved 2 stories
2025-06-09 22:35:33,694 - app.storage.storage - INFO - Retrieved 2 stories
2025-06-09 22:35:33,697 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 22:35:33] "OPTIONS /api/stories HTTP/1.1" 200 -
2025-06-09 22:35:33,703 - app.auth - INFO - Authentication successful for user: sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-09 22:35:33,904 - app.services.firebase_service - INFO - Retrieved 2 stories for user sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-09 22:35:33,905 - app.storage.storage - INFO - Retrieved 2 stories for user sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-09 22:35:34,130 - app.services.ai_service - INFO - Generated big story goal: Become the strongest cultivator.
2025-06-09 22:35:34,131 - app.services.ai_service - INFO - Using cultivation genre for initial story
2025-06-09 22:35:34,131 - app.services.story_planner - INFO - No matching theme found for goal: 'Become the strongest cultivator.', defaulting to 'revenge'
2025-06-09 22:35:34,131 - app.services.story_planner - INFO - Generated new arc goal: 'Hunt for a forbidden technique sealed by ancient cultivators.' for theme: 'revenge'
2025-06-09 22:35:34,131 - app.genres.cultivation_setting - INFO - Generated initial arc goal: Hunt for a forbidden technique sealed by ancient cultivators.
2025-06-09 22:35:34,131 - app.genres.cultivation_setting - INFO - Generating cultivation progression story for Ali
2025-06-09 22:35:34,131 - app.models.base_genre - INFO - Generating story for Ali
2025-06-09 22:35:39,338 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-09 22:35:39,350 - app.models.base_genre - INFO - ðŸŽ­ GENRE GPT RESPONSE (2080 chars):
2025-06-09 22:35:39,351 - app.models.base_genre - INFO - ============================================================
2025-06-09 22:35:39,351 - app.models.base_genre - INFO - [STORY]
  
---  
Ali, a determined young cultivator with a mysterious past, stands at the entrance of the Forbidden Valley, a place rumored to hold the ancient technique he seeks. The dense mist shrouds the valley, adding an air of mystery to the place.

Ali cautiously steps forward, his eyes scanning the surroundings, searching for any signs of danger. His cultivation level, marked by a gentle aura of pale blue Qi that surrounds him, indicates his steady progress.

As Ali ventures deeper into the valley, a sudden rumble shakes the ground beneath his feet. A massive boulder comes crashing down towards him, a test set by the ancient cultivators to prove the worth of those seeking the forbidden technique.

With quick reflexes, Ali channels his Qi, his cultivation technique "Flowing Waters," into his palms. The Qi shimmers with a watery hue as he pushes against the boulder, deflecting it to the side with a powerful surge of energy.

"An unexpected trial," Ali mutters to himself, his determination shining through his eyes as he presses on, eager to overcome the challenges ahead.

Suddenly, a figure emerges from the shadows, their face obscured by a hood. "Seeking the forbidden technique, are we?" the figure's voice echoes in the valley, curiosity lacing their words.

Ali faces the mysterious figure, his demeanor unwavering. "I will do whatever it takes to achieve my goal," he declares, his voice resonating with resolve.

---
  
[/STORY]

[CHOICES]
1. Without hesitation, Ali challenges the mysterious figure to a friendly sparring match to prove his strength and determination, aiming to learn more about the forbidden technique through their battle.
2. Instead of engaging in combat, Ali decides to engage the mysterious figure in a strategic conversation, attempting to uncover more information about the history of the forbidden technique and its guardians.
3. Ignoring the figure, Ali focuses on honing his cultivation techniques further, determined to show his growth and readiness to face whatever challenges lie ahead in the Forbidden Valley.
[/CHOICES]
2025-06-09 22:35:39,351 - app.models.base_genre - INFO - ============================================================
2025-06-09 22:35:39,352 - app.models.base_genre - INFO - Successfully parsed genre response: story=1433 chars, choices=3
2025-06-09 22:35:39,489 - app.services.firebase_service - INFO - Saved story story_1749533739_e2e17fa9: Ali's Cultivation Story
2025-06-09 22:35:39,490 - app.storage.storage - INFO - Saved story story_1749533739_e2e17fa9: Ali's Cultivation Story
2025-06-09 22:35:39,490 - app.storage.storage - INFO - Created new story: story_1749533739_e2e17fa9: Ali's Cultivation Story
2025-06-09 22:35:39,723 - app.services.usage_service - INFO - Updated usage for user: sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-09 22:35:40,040 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 22:35:40] "POST /api/stories HTTP/1.1" 200 -
2025-06-09 22:35:40,265 - app.services.firebase_service - INFO - Retrieved story story_1749533739_e2e17fa9: Ali's Cultivation Story
2025-06-09 22:35:40,266 - app.storage.storage - INFO - Retrieved story story_1749533739_e2e17fa9: Ali's Cultivation Story
2025-06-09 22:35:40,268 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 22:35:40] "OPTIONS /api/stories/story_1749533739_e2e17fa9 HTTP/1.1" 200 -
2025-06-09 22:35:40,314 - app.services.firebase_service - INFO - Retrieved story story_1749533739_e2e17fa9: Ali's Cultivation Story
2025-06-09 22:35:40,315 - app.storage.storage - INFO - Retrieved story story_1749533739_e2e17fa9: Ali's Cultivation Story
2025-06-09 22:35:40,317 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 22:35:40] "OPTIONS /api/stories/story_1749533739_e2e17fa9 HTTP/1.1" 200 -
2025-06-09 22:35:40,386 - app.services.firebase_service - INFO - Retrieved story story_1749533739_e2e17fa9: Ali's Cultivation Story
2025-06-09 22:35:40,388 - app.storage.storage - INFO - Retrieved story story_1749533739_e2e17fa9: Ali's Cultivation Story
2025-06-09 22:35:40,390 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 22:35:40] "GET /api/stories/story_1749533739_e2e17fa9 HTTP/1.1" 200 -
2025-06-09 22:35:40,503 - app.services.firebase_service - INFO - Retrieved story story_1749533739_e2e17fa9: Ali's Cultivation Story
2025-06-09 22:35:40,503 - app.storage.storage - INFO - Retrieved story story_1749533739_e2e17fa9: Ali's Cultivation Story
2025-06-09 22:35:40,504 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 22:35:40] "GET /api/stories/story_1749533739_e2e17fa9 HTTP/1.1" 200 -
2025-06-09 22:42:21,719 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/models/base_genre.py', reloading
2025-06-09 22:42:23,827 - werkzeug - INFO -  * Restarting with stat
2025-06-09 22:42:24,654 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-09 22:42:24,715 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-09 22:42:24,715 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-09 22:42:24,739 - root - INFO - Starting StoryTeller API server...
2025-06-09 22:42:24,739 - root - INFO - Host: 0.0.0.0
2025-06-09 22:42:24,739 - root - INFO - Port: 5001
2025-06-09 22:42:24,739 - root - INFO - Debug mode: True
2025-06-09 22:42:24,744 - werkzeug - WARNING -  * Debugger is active!
2025-06-09 22:42:24,796 - werkzeug - INFO -  * Debugger PIN: 904-451-859
2025-06-09 22:44:03,929 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/models/base_genre.py', reloading
2025-06-09 22:44:04,022 - werkzeug - INFO -  * Restarting with stat
2025-06-09 22:44:04,840 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-09 22:44:04,899 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-09 22:44:04,899 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-09 22:44:04,920 - root - INFO - Starting StoryTeller API server...
2025-06-09 22:44:04,920 - root - INFO - Host: 0.0.0.0
2025-06-09 22:44:04,920 - root - INFO - Port: 5001
2025-06-09 22:44:04,920 - root - INFO - Debug mode: True
2025-06-09 22:44:04,923 - werkzeug - WARNING -  * Debugger is active!
2025-06-09 22:44:04,947 - werkzeug - INFO -  * Debugger PIN: 904-451-859
2025-06-09 22:44:40,774 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/models/base_genre.py', reloading
2025-06-09 22:44:40,852 - werkzeug - INFO -  * Restarting with stat
2025-06-09 22:44:41,611 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-09 22:44:41,680 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-09 22:44:41,680 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-09 22:44:41,700 - root - INFO - Starting StoryTeller API server...
2025-06-09 22:44:41,701 - root - INFO - Host: 0.0.0.0
2025-06-09 22:44:41,701 - root - INFO - Port: 5001
2025-06-09 22:44:41,701 - root - INFO - Debug mode: True
2025-06-09 22:44:41,704 - werkzeug - WARNING -  * Debugger is active!
2025-06-09 22:44:41,727 - werkzeug - INFO -  * Debugger PIN: 904-451-859
2025-06-09 22:45:13,356 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/models/base_genre.py', reloading
2025-06-09 22:45:13,435 - werkzeug - INFO -  * Restarting with stat
2025-06-09 22:45:14,172 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-09 22:45:14,228 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-09 22:45:14,228 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-09 22:45:14,249 - root - INFO - Starting StoryTeller API server...
2025-06-09 22:45:14,249 - root - INFO - Host: 0.0.0.0
2025-06-09 22:45:14,249 - root - INFO - Port: 5001
2025-06-09 22:45:14,249 - root - INFO - Debug mode: True
2025-06-09 22:45:14,253 - werkzeug - WARNING -  * Debugger is active!
2025-06-09 22:45:14,276 - werkzeug - INFO -  * Debugger PIN: 904-451-859
2025-06-09 22:45:42,910 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/models/base_genre.py', reloading
2025-06-09 22:45:42,990 - werkzeug - INFO -  * Restarting with stat
2025-06-09 22:45:43,731 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-09 22:45:43,794 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-09 22:45:43,794 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-09 22:45:43,818 - root - INFO - Starting StoryTeller API server...
2025-06-09 22:45:43,818 - root - INFO - Host: 0.0.0.0
2025-06-09 22:45:43,818 - root - INFO - Port: 5001
2025-06-09 22:45:43,818 - root - INFO - Debug mode: True
2025-06-09 22:45:43,821 - werkzeug - WARNING -  * Debugger is active!
2025-06-09 22:45:43,845 - werkzeug - INFO -  * Debugger PIN: 904-451-859
2025-06-09 22:46:13,555 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/models/base_genre.py', reloading
2025-06-09 22:46:13,647 - werkzeug - INFO -  * Restarting with stat
2025-06-09 22:46:14,401 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-09 22:46:14,461 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-09 22:46:14,461 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-09 22:46:14,482 - root - INFO - Starting StoryTeller API server...
2025-06-09 22:46:14,482 - root - INFO - Host: 0.0.0.0
2025-06-09 22:46:14,482 - root - INFO - Port: 5001
2025-06-09 22:46:14,482 - root - INFO - Debug mode: True
2025-06-09 22:46:14,485 - werkzeug - WARNING -  * Debugger is active!
2025-06-09 22:46:14,509 - werkzeug - INFO -  * Debugger PIN: 904-451-859
2025-06-09 22:47:06,729 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/models/base_genre.py', reloading
2025-06-09 22:47:06,825 - werkzeug - INFO -  * Restarting with stat
2025-06-09 22:47:07,575 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-09 22:47:07,631 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-09 22:47:07,631 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-09 22:47:07,652 - root - INFO - Starting StoryTeller API server...
2025-06-09 22:47:07,652 - root - INFO - Host: 0.0.0.0
2025-06-09 22:47:07,652 - root - INFO - Port: 5001
2025-06-09 22:47:07,652 - root - INFO - Debug mode: True
2025-06-09 22:47:07,656 - werkzeug - WARNING -  * Debugger is active!
2025-06-09 22:47:07,680 - werkzeug - INFO -  * Debugger PIN: 904-451-859
2025-06-09 22:47:42,793 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_setting.py', reloading
2025-06-09 22:47:42,887 - werkzeug - INFO -  * Restarting with stat
2025-06-09 22:47:43,654 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-09 22:47:43,716 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-09 22:47:43,716 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-09 22:47:43,723 - root - INFO - Starting StoryTeller API server...
2025-06-09 22:47:43,723 - root - INFO - Host: 0.0.0.0
2025-06-09 22:47:43,723 - root - INFO - Port: 5001
2025-06-09 22:47:43,723 - root - INFO - Debug mode: True
2025-06-09 22:47:43,742 - werkzeug - WARNING -  * Debugger is active!
2025-06-09 22:47:43,767 - werkzeug - INFO -  * Debugger PIN: 904-451-859
2025-06-09 22:47:51,197 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-09 22:47:51,239 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-09 22:47:51,239 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-09 22:47:51,246 - root - INFO - Starting StoryTeller API server...
2025-06-09 22:47:51,247 - root - INFO - Host: 0.0.0.0
2025-06-09 22:47:51,247 - root - INFO - Port: 5001
2025-06-09 22:47:51,247 - root - INFO - Debug mode: True
2025-06-09 22:47:51,272 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5001
 * Running on http://10.0.0.243:5001
2025-06-09 22:47:51,272 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-09 22:47:51,273 - werkzeug - INFO -  * Restarting with stat
2025-06-09 22:47:51,876 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-09 22:47:51,917 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-09 22:47:51,917 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-09 22:47:51,924 - root - INFO - Starting StoryTeller API server...
2025-06-09 22:47:51,924 - root - INFO - Host: 0.0.0.0
2025-06-09 22:47:51,924 - root - INFO - Port: 5001
2025-06-09 22:47:51,924 - root - INFO - Debug mode: True
2025-06-09 22:47:51,942 - werkzeug - WARNING -  * Debugger is active!
2025-06-09 22:47:51,965 - werkzeug - INFO -  * Debugger PIN: 904-451-859
2025-06-09 22:48:00,805 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 22:48:00] "OPTIONS /api/status HTTP/1.1" 200 -
2025-06-09 22:48:00,807 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 22:48:00] "OPTIONS /api/status HTTP/1.1" 200 -
2025-06-09 22:48:00,812 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 22:48:00] "GET /api/status HTTP/1.1" 200 -
2025-06-09 22:48:00,814 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 22:48:00] "GET /api/status HTTP/1.1" 200 -
2025-06-09 22:48:10,751 - app.services.firebase_service - INFO - Retrieved 3 stories
2025-06-09 22:48:10,751 - app.storage.storage - INFO - Retrieved 3 stories
2025-06-09 22:48:10,754 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 22:48:10] "OPTIONS /api/stories HTTP/1.1" 200 -
2025-06-09 22:48:10,760 - app.auth - INFO - Authentication successful for user: sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-09 22:48:10,980 - app.services.firebase_service - INFO - Retrieved 3 stories for user sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-09 22:48:10,981 - app.storage.storage - INFO - Retrieved 3 stories for user sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-09 22:48:11,325 - app.services.ai_service - INFO - Generated big story goal: Become the strongest cultivator.
2025-06-09 22:48:11,326 - app.services.ai_service - INFO - Using cultivation genre for initial story
2025-06-09 22:48:11,326 - app.services.story_planner - INFO - No matching theme found for goal: 'Become the strongest cultivator.', defaulting to 'revenge'
2025-06-09 22:48:11,326 - app.services.story_planner - INFO - Generated new arc goal: 'Challenge an inner disciple to gain attention.' for theme: 'revenge'
2025-06-09 22:48:11,326 - app.genres.cultivation_setting - INFO - Generated initial arc goal: Challenge an inner disciple to gain attention.
2025-06-09 22:48:11,327 - app.genres.cultivation_setting - INFO - Generating cultivation progression story for Ali
2025-06-09 22:48:11,327 - app.models.base_genre - INFO - Generating story for Ali
2025-06-09 22:48:16,796 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-09 22:48:16,806 - app.models.base_genre - INFO - ðŸŽ­ GENRE GPT RESPONSE (2543 chars):
2025-06-09 22:48:16,806 - app.models.base_genre - INFO - ============================================================
2025-06-09 22:48:16,806 - app.models.base_genre - INFO - [STORY]
  
---  
Ali, a reincarnated individual with past life insights, observes a group of inner disciples showcasing their cultivation techniques in the training grounds. His eyes gleam with determination as he silently analyzes their movements.  
   
---  
Intrigued by the challenges ahead, Ali approaches Master Shen, requesting a chance to prove his worth by challenging an inner disciple. Master Shen, known for his wisdom and stern demeanor, nods in approval, intrigued by Ali's confidence.  
   
---  
As the challenge begins, Ali focuses his Qi, channeling it with precision into his palms. The Qi manifests as a vibrant azure light, swirling around his hands with a gentle hum. The inner disciple, taken aback by this display, readies his own technique, a fierce whirlwind of crimson Qi.  
   
---  
The clash of colors illuminates the training grounds, drawing the attention of other disciples. Ali's technique, named "Azure Palm Harmony," resonates with a harmonious energy, countering the inner disciple's aggressive approach. The spectators gasp in awe at the unique display of Qi control.  
   
---  
With a subtle smile, Ali swiftly maneuvers around the opponent's attacks, showcasing his agility and strategic thinking. The inner disciple, visibly shocked by Ali's unconventional tactics, struggles to keep up with the unexpected moves.  
   
---  
In a decisive move, Ali combines his Qi control with a swift martial arts technique, landing a precise blow that sends the inner disciple staggering back. The training grounds fall silent as Master Shen watches with keen interest, acknowledging Ali's potential.  
   
---  
"Your insight into Qi manipulation is impressive, Ali," Master Shen remarks, approaching the exhausted inner disciple. Ali bows respectfully, his eyes reflecting a determination to surpass his current limits.  
   
---  
As the chapter concludes, three paths lay before Ali, each presenting a unique opportunity to further his cultivation journey towards challenging an inner disciple to gain attention.  

[/STORY]

[CHOICES]
1. Embrace the role of a mentor and offer guidance to the inner disciple to strengthen bonds within the sect and earn respect.  
2. Seek out a secluded training area to further refine cultivation techniques and Qi control, focusing on personal growth before engaging in further challenges.  
3. Investigate the ancient library for hidden scrolls on advanced cultivation methods, delving into the secrets of past cultivators to gain an edge in future challenges.  
[/CHOICES]
2025-06-09 22:48:16,806 - app.models.base_genre - INFO - ============================================================
2025-06-09 22:48:16,807 - app.models.base_genre - INFO - Successfully parsed genre response: story=2034 chars, choices=3
2025-06-09 22:48:16,995 - app.services.firebase_service - INFO - Saved story story_1749534496_9d32a9ba: Ali's Cultivation Story
2025-06-09 22:48:16,996 - app.storage.storage - INFO - Saved story story_1749534496_9d32a9ba: Ali's Cultivation Story
2025-06-09 22:48:16,996 - app.storage.storage - INFO - Created new story: story_1749534496_9d32a9ba: Ali's Cultivation Story
2025-06-09 22:48:17,505 - app.services.usage_service - INFO - Updated usage for user: sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-09 22:48:18,024 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 22:48:18] "POST /api/stories HTTP/1.1" 200 -
2025-06-09 22:48:18,257 - app.services.firebase_service - INFO - Retrieved story story_1749534496_9d32a9ba: Ali's Cultivation Story
2025-06-09 22:48:18,258 - app.storage.storage - INFO - Retrieved story story_1749534496_9d32a9ba: Ali's Cultivation Story
2025-06-09 22:48:18,260 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 22:48:18] "OPTIONS /api/stories/story_1749534496_9d32a9ba HTTP/1.1" 200 -
2025-06-09 22:48:18,636 - app.services.firebase_service - INFO - Retrieved story story_1749534496_9d32a9ba: Ali's Cultivation Story
2025-06-09 22:48:18,638 - app.storage.storage - INFO - Retrieved story story_1749534496_9d32a9ba: Ali's Cultivation Story
2025-06-09 22:48:18,640 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 22:48:18] "GET /api/stories/story_1749534496_9d32a9ba HTTP/1.1" 200 -
2025-06-09 22:48:18,640 - app.services.firebase_service - INFO - Retrieved story story_1749534496_9d32a9ba: Ali's Cultivation Story
2025-06-09 22:48:18,641 - app.storage.storage - INFO - Retrieved story story_1749534496_9d32a9ba: Ali's Cultivation Story
2025-06-09 22:48:18,643 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 22:48:18] "OPTIONS /api/stories/story_1749534496_9d32a9ba HTTP/1.1" 200 -
2025-06-09 22:48:18,747 - app.services.firebase_service - INFO - Retrieved story story_1749534496_9d32a9ba: Ali's Cultivation Story
2025-06-09 22:48:18,748 - app.storage.storage - INFO - Retrieved story story_1749534496_9d32a9ba: Ali's Cultivation Story
2025-06-09 22:48:18,749 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 22:48:18] "GET /api/stories/story_1749534496_9d32a9ba HTTP/1.1" 200 -
2025-06-09 22:52:48,163 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/services/story_planner.py', reloading
2025-06-09 22:52:50,276 - werkzeug - INFO -  * Restarting with stat
2025-06-09 22:52:51,019 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-09 22:52:51,075 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-09 22:52:51,075 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-09 22:52:51,082 - root - INFO - Starting StoryTeller API server...
2025-06-09 22:52:51,082 - root - INFO - Host: 0.0.0.0
2025-06-09 22:52:51,082 - root - INFO - Port: 5001
2025-06-09 22:52:51,082 - root - INFO - Debug mode: True
2025-06-09 22:52:51,101 - werkzeug - WARNING -  * Debugger is active!
2025-06-09 22:52:51,124 - werkzeug - INFO -  * Debugger PIN: 904-451-859
2025-06-09 22:53:32,030 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 22:53:32] "OPTIONS /api/status HTTP/1.1" 200 -
2025-06-09 22:53:32,035 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 22:53:32] "GET /api/status HTTP/1.1" 200 -
2025-06-09 22:53:32,038 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 22:53:32] "GET /api/status HTTP/1.1" 200 -
2025-06-09 22:53:42,328 - app.services.firebase_service - INFO - Retrieved 0 stories
2025-06-09 22:53:42,329 - app.storage.storage - INFO - Retrieved 0 stories
2025-06-09 22:53:42,330 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 22:53:42] "OPTIONS /api/stories HTTP/1.1" 200 -
2025-06-09 22:53:42,338 - app.auth - INFO - Authentication successful for user: sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-09 22:53:42,735 - app.services.firebase_service - INFO - Retrieved 0 stories for user sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-09 22:53:42,736 - app.storage.storage - INFO - Retrieved 0 stories for user sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-09 22:53:42,849 - app.services.usage_service - INFO - Auto-correcting count for sTttyhSg8VdcI4Axw1Nj9WOBXv33: 4 -> 0
2025-06-09 22:53:43,198 - app.services.ai_service - INFO - Generated big story goal: Regain lost memories from a past life.
2025-06-09 22:53:43,199 - app.services.ai_service - INFO - Using cultivation genre for initial story
2025-06-09 22:53:43,200 - app.services.story_planner - INFO - Generated new arc goal: 'Battle old enemies who once defeated you.' for theme: 'past_life'
2025-06-09 22:53:43,201 - app.genres.cultivation_setting - INFO - Generated initial arc goal: Battle old enemies who once defeated you.
2025-06-09 22:53:43,201 - app.genres.cultivation_setting - INFO - Generating cultivation progression story for ali
2025-06-09 22:53:43,201 - app.models.base_genre - INFO - Generating story for ali
2025-06-09 22:53:48,169 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-09 22:53:48,181 - app.models.base_genre - INFO - ðŸŽ­ GENRE GPT RESPONSE (2105 chars):
2025-06-09 22:53:48,181 - app.models.base_genre - INFO - ============================================================
2025-06-09 22:53:48,181 - app.models.base_genre - INFO - [STORY]
 
---
As the sun sets over the misty mountains, ali stands at the edge of a cliff, his eyes reflecting the fading light. The serene atmosphere is shattered by a sudden gust of wind, carrying the faint scent of cherry blossoms.

---
A memory flashes in ali's mind, a scene of defeat against a shadowy figure wreathed in dark energy. Determination hardens his gaze as he clenches his fists, vowing to face his past head-on.

---
A trio of mysterious figures emerge from the shadows, their eyes gleaming with malice. One of them steps forward, sneering, "So, you've finally returned, ali. Ready for another beating?"

---
ali's lips curl into a confident smile as he raises his hand, channeling his Qi. "I'm not the same as before. Let's settle this once and for all."

---
With a swift movement, ali unleashes his cultivation technique, "Echoing Gale Fist," a flurry of wind-infused punches that strike like thunder. The air crackles with his Qi, a vibrant blue light surrounding him.

---
The enemy is caught off guard by ali's newfound strength, their arrogance turning to shock. "How... How did you become so powerful?"

---
In the heat of battle, ali's determination shines through, his movements fluid and precise. The clash of energies creates a dazzling display, illuminating the night sky.

---
As ali gains the upper hand, a surge of memories floods his mind, fragments of his past life swirling around him. With each strike, he inches closer to unlocking the secrets hidden within.

---

[/STORY]

[CHOICES]
1. Channeling the memories of his past life, ali taps into an ancient technique, "Soulfire Ignition," engulfing his fists in ethereal flames to overwhelm his enemies.
   
2. Drawing from his knowledge of energy manipulation, ali creates a mirage of himself to confuse his foes, using the "Illusionary Doppelganger" technique to gain a strategic advantage in the battle.

3. Embracing the essence of balance and harmony, ali enters a meditative state, activating the "Flowing Serenity" technique to replenish his energy and outlast his opponents in a battle of endurance.
[/CHOICES]
2025-06-09 22:53:48,182 - app.models.base_genre - INFO - ============================================================
2025-06-09 22:53:48,183 - app.models.base_genre - INFO - Successfully parsed genre response: story=1492 chars, choices=3
2025-06-09 22:53:48,326 - app.services.firebase_service - INFO - Saved story story_1749534828_998c202d: ali's Cultivation Story
2025-06-09 22:53:48,326 - app.storage.storage - INFO - Saved story story_1749534828_998c202d: ali's Cultivation Story
2025-06-09 22:53:48,327 - app.storage.storage - INFO - Created new story: story_1749534828_998c202d: ali's Cultivation Story
2025-06-09 22:53:48,683 - app.services.usage_service - INFO - Updated usage for user: sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-09 22:53:49,231 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 22:53:49] "POST /api/stories HTTP/1.1" 200 -
2025-06-09 22:53:49,439 - app.services.firebase_service - INFO - Retrieved story story_1749534828_998c202d: ali's Cultivation Story
2025-06-09 22:53:49,440 - app.storage.storage - INFO - Retrieved story story_1749534828_998c202d: ali's Cultivation Story
2025-06-09 22:53:49,443 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 22:53:49] "OPTIONS /api/stories/story_1749534828_998c202d HTTP/1.1" 200 -
2025-06-09 22:53:49,662 - app.services.firebase_service - INFO - Retrieved story story_1749534828_998c202d: ali's Cultivation Story
2025-06-09 22:53:49,664 - app.services.firebase_service - INFO - Retrieved story story_1749534828_998c202d: ali's Cultivation Story
2025-06-09 22:53:49,665 - app.storage.storage - INFO - Retrieved story story_1749534828_998c202d: ali's Cultivation Story
2025-06-09 22:53:49,665 - app.storage.storage - INFO - Retrieved story story_1749534828_998c202d: ali's Cultivation Story
2025-06-09 22:53:49,667 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 22:53:49] "OPTIONS /api/stories/story_1749534828_998c202d HTTP/1.1" 200 -
2025-06-09 22:53:49,668 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 22:53:49] "GET /api/stories/story_1749534828_998c202d HTTP/1.1" 200 -
2025-06-09 22:53:49,768 - app.services.firebase_service - INFO - Retrieved story story_1749534828_998c202d: ali's Cultivation Story
2025-06-09 22:53:49,769 - app.storage.storage - INFO - Retrieved story story_1749534828_998c202d: ali's Cultivation Story
2025-06-09 22:53:49,770 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 22:53:49] "GET /api/stories/story_1749534828_998c202d HTTP/1.1" 200 -
2025-06-09 22:57:01,293 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/services/story_planner.py', reloading
2025-06-09 22:57:03,468 - werkzeug - INFO -  * Restarting with stat
2025-06-09 22:57:04,305 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-09 22:57:04,369 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-09 22:57:04,369 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-09 22:57:04,376 - root - INFO - Starting StoryTeller API server...
2025-06-09 22:57:04,376 - root - INFO - Host: 0.0.0.0
2025-06-09 22:57:04,376 - root - INFO - Port: 5001
2025-06-09 22:57:04,376 - root - INFO - Debug mode: True
2025-06-09 22:57:04,396 - werkzeug - WARNING -  * Debugger is active!
2025-06-09 22:57:04,424 - werkzeug - INFO -  * Debugger PIN: 904-451-859
2025-06-09 22:59:01,588 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 22:59:01] "OPTIONS /api/stories/story_1749534828_998c202d/choices/1 HTTP/1.1" 200 -
2025-06-09 22:59:01,593 - app.auth - INFO - Authentication successful for user: sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-09 22:59:02,080 - app.services.firebase_service - INFO - Retrieved story story_1749534828_998c202d: ali's Cultivation Story
2025-06-09 22:59:02,081 - app.storage.storage - INFO - Retrieved story story_1749534828_998c202d: ali's Cultivation Story
2025-06-09 22:59:02,652 - app.services.usage_service - INFO - Updated usage for user: sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-09 22:59:02,763 - app.services.firebase_service - INFO - Retrieved story story_1749534828_998c202d: ali's Cultivation Story
2025-06-09 22:59:02,764 - app.storage.storage - INFO - Retrieved story story_1749534828_998c202d: ali's Cultivation Story
2025-06-09 22:59:03,012 - app.services.firebase_service - INFO - Saved story story_1749534828_998c202d: ali's Cultivation Story
2025-06-09 22:59:03,013 - app.storage.storage - INFO - Saved story story_1749534828_998c202d: ali's Cultivation Story
2025-06-09 22:59:03,013 - app.storage.storage - INFO - Saved choice 1 for node initial in story story_1749534828_998c202d
2025-06-09 22:59:03,013 - app.services.ai_service - INFO - Using cultivation genre for story continuation
2025-06-09 22:59:03,014 - app.services.ai_service - INFO - Using big story goal for cultivation continuation: Seek immortality and uncover ancient cultivation secrets.
2025-06-09 22:59:03,014 - app.genres.cultivation_setting - INFO - Continuing cultivation progression story for ali
2025-06-09 22:59:03,015 - app.models.base_genre - INFO - Generating story for ali
2025-06-09 22:59:07,100 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-09 22:59:07,114 - app.models.base_genre - INFO - ðŸŽ­ GENRE GPT RESPONSE (2247 chars):
2025-06-09 22:59:07,115 - app.models.base_genre - INFO - ============================================================
2025-06-09 22:59:07,115 - app.models.base_genre - INFO - ali's fists blaze with Soulfire, casting an otherworldly glow that illuminates the battlefield. The enemies reel back in fear, their sinister grins replaced with wide-eyed disbelief.

Caught in the torrent of ethereal flames, ali's eyes blaze with determination as he unleashes a torrent of Soulfire-infused strikes, each blow leaving a trail of searing light in its wake. The air crackles with intense spiritual energy, pulsating with his unwavering resolve.

One of the enemies, a tall figure with a twisted scar across his face, growls in frustration, "This power... it's impossible! How can you wield such ancient flames?"

ali's voice cuts through the chaos, strong and resolute, "These flames are the legacy of my ancestors, a power that transcends time itself. I will not be defeated again!"

As the battle rages on, ali's control over Soulfire grows stronger, each punch resonating with the echoes of his past life. Memories long buried begin to surface, hinting at the secrets he seeks to uncover.

The enemies, now on the defensive, exchange worried glances as ali's power continues to surge. The ground trembles beneath his feet, cracks spreading like spiderwebs from each impact.

In a moment of clarity, ali realizes that the key to unlocking the ancient cultivation secrets lies within the very flames he commands. The Soulfire whispers to him, promising knowledge and power beyond imagination.

But with this newfound strength comes a dangerous revelation - the enemies he faces are mere pawns in a much larger game, one that threatens to unravel the fabric of reality itself.

The battlefield pulses with energy as ali stands at the crossroads of destiny, his next move crucial in shaping the fate of not just himself, but the entire cultivation world.

---

[CHOICES]
1. Draw upon the ancient memories within Soulfire to unravel the enemies' true intentions and origins, seeking answers to the larger threat looming over the cultivation world.
2. Push the limits of Soulfire even further, risking losing control in exchange for a temporary surge in power to swiftly end the battle.
3. Use Soulfire to create a protective barrier around himself, buying time to strategize and uncover a weakness in the enemies' defenses.
[/CHOICES]
2025-06-09 22:59:07,115 - app.models.base_genre - INFO - ============================================================
2025-06-09 22:59:07,118 - app.models.base_genre - INFO - Successfully parsed genre response: story=1774 chars, choices=3
2025-06-09 22:59:07,230 - app.services.firebase_service - INFO - Retrieved story story_1749534828_998c202d: ali's Cultivation Story
2025-06-09 22:59:07,231 - app.storage.storage - INFO - Retrieved story story_1749534828_998c202d: ali's Cultivation Story
2025-06-09 22:59:07,543 - app.services.firebase_service - INFO - Saved story story_1749534828_998c202d: ali's Cultivation Story
2025-06-09 22:59:07,544 - app.storage.storage - INFO - Saved story story_1749534828_998c202d: ali's Cultivation Story
2025-06-09 22:59:07,544 - app.storage.storage - INFO - Added node node_3285764413 to story story_1749534828_998c202d
2025-06-09 22:59:07,873 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 22:59:07] "POST /api/stories/story_1749534828_998c202d/choices/1 HTTP/1.1" 200 -
2025-06-09 23:09:09,691 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_setting.py', reloading
2025-06-09 23:09:11,812 - werkzeug - INFO -  * Restarting with stat
2025-06-09 23:09:12,596 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-09 23:09:12,654 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-09 23:09:12,654 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-09 23:09:12,661 - root - INFO - Starting StoryTeller API server...
2025-06-09 23:09:12,661 - root - INFO - Host: 0.0.0.0
2025-06-09 23:09:12,661 - root - INFO - Port: 5001
2025-06-09 23:09:12,661 - root - INFO - Debug mode: True
2025-06-09 23:09:12,678 - werkzeug - WARNING -  * Debugger is active!
2025-06-09 23:09:12,702 - werkzeug - INFO -  * Debugger PIN: 904-451-859
2025-06-09 23:12:06,958 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_setting.py', reloading
2025-06-09 23:12:07,038 - werkzeug - INFO -  * Restarting with stat
2025-06-09 23:12:07,791 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-09 23:12:07,848 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-09 23:12:07,848 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-09 23:12:07,855 - root - INFO - Starting StoryTeller API server...
2025-06-09 23:12:07,855 - root - INFO - Host: 0.0.0.0
2025-06-09 23:12:07,855 - root - INFO - Port: 5001
2025-06-09 23:12:07,855 - root - INFO - Debug mode: True
2025-06-09 23:12:07,874 - werkzeug - WARNING -  * Debugger is active!
2025-06-09 23:12:07,898 - werkzeug - INFO -  * Debugger PIN: 904-451-859
2025-06-09 23:12:25,399 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_setting.py', reloading
2025-06-09 23:12:25,511 - werkzeug - INFO -  * Restarting with stat
2025-06-09 23:12:26,272 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-09 23:12:26,350 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-09 23:12:26,350 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-09 23:12:26,357 - root - INFO - Starting StoryTeller API server...
2025-06-09 23:12:26,357 - root - INFO - Host: 0.0.0.0
2025-06-09 23:12:26,357 - root - INFO - Port: 5001
2025-06-09 23:12:26,357 - root - INFO - Debug mode: True
2025-06-09 23:12:26,377 - werkzeug - WARNING -  * Debugger is active!
2025-06-09 23:12:26,404 - werkzeug - INFO -  * Debugger PIN: 904-451-859
2025-06-09 23:12:49,968 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_setting.py', reloading
2025-06-09 23:12:50,060 - werkzeug - INFO -  * Restarting with stat
2025-06-09 23:12:50,783 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-09 23:12:50,840 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-09 23:12:50,840 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-09 23:12:50,847 - root - INFO - Starting StoryTeller API server...
2025-06-09 23:12:50,847 - root - INFO - Host: 0.0.0.0
2025-06-09 23:12:50,847 - root - INFO - Port: 5001
2025-06-09 23:12:50,847 - root - INFO - Debug mode: True
2025-06-09 23:12:50,866 - werkzeug - WARNING -  * Debugger is active!
2025-06-09 23:12:50,890 - werkzeug - INFO -  * Debugger PIN: 904-451-859
2025-06-09 23:13:18,681 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_setting.py', reloading
2025-06-09 23:13:18,777 - werkzeug - INFO -  * Restarting with stat
2025-06-09 23:13:19,550 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-09 23:13:19,609 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-09 23:13:19,609 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-09 23:13:19,615 - root - INFO - Starting StoryTeller API server...
2025-06-09 23:13:19,615 - root - INFO - Host: 0.0.0.0
2025-06-09 23:13:19,615 - root - INFO - Port: 5001
2025-06-09 23:13:19,615 - root - INFO - Debug mode: True
2025-06-09 23:13:19,633 - werkzeug - WARNING -  * Debugger is active!
2025-06-09 23:13:19,657 - werkzeug - INFO -  * Debugger PIN: 904-451-859
2025-06-09 23:14:10,219 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_setting.py', reloading
2025-06-09 23:14:10,312 - werkzeug - INFO -  * Restarting with stat
2025-06-09 23:14:11,031 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-09 23:14:11,087 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-09 23:14:11,087 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-09 23:14:11,094 - root - INFO - Starting StoryTeller API server...
2025-06-09 23:14:11,094 - root - INFO - Host: 0.0.0.0
2025-06-09 23:14:11,094 - root - INFO - Port: 5001
2025-06-09 23:14:11,094 - root - INFO - Debug mode: True
2025-06-09 23:14:11,111 - werkzeug - WARNING -  * Debugger is active!
2025-06-09 23:14:11,134 - werkzeug - INFO -  * Debugger PIN: 904-451-859
2025-06-09 23:15:14,852 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_setting.py', reloading
2025-06-09 23:15:14,938 - werkzeug - INFO -  * Restarting with stat
2025-06-09 23:15:15,659 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-09 23:15:15,714 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-09 23:15:15,714 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-09 23:15:15,721 - root - INFO - Starting StoryTeller API server...
2025-06-09 23:15:15,721 - root - INFO - Host: 0.0.0.0
2025-06-09 23:15:15,721 - root - INFO - Port: 5001
2025-06-09 23:15:15,721 - root - INFO - Debug mode: True
2025-06-09 23:15:15,739 - werkzeug - WARNING -  * Debugger is active!
2025-06-09 23:15:15,762 - werkzeug - INFO -  * Debugger PIN: 904-451-859
2025-06-09 23:19:18,510 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-09 23:19:18,566 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-09 23:19:18,566 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-09 23:19:18,583 - root - INFO - Starting StoryTeller API server...
2025-06-09 23:19:18,583 - root - INFO - Host: 0.0.0.0
2025-06-09 23:19:18,583 - root - INFO - Port: 5001
2025-06-09 23:19:18,583 - root - INFO - Debug mode: True
2025-06-09 23:19:18,611 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5001
 * Running on http://10.0.0.243:5001
2025-06-09 23:19:18,611 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-09 23:19:18,612 - werkzeug - INFO -  * Restarting with stat
2025-06-09 23:19:19,227 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-09 23:19:19,268 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-09 23:19:19,268 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-09 23:19:19,275 - root - INFO - Starting StoryTeller API server...
2025-06-09 23:19:19,275 - root - INFO - Host: 0.0.0.0
2025-06-09 23:19:19,275 - root - INFO - Port: 5001
2025-06-09 23:19:19,275 - root - INFO - Debug mode: True
2025-06-09 23:19:19,293 - werkzeug - WARNING -  * Debugger is active!
2025-06-09 23:19:19,318 - werkzeug - INFO -  * Debugger PIN: 904-451-859
2025-06-09 23:35:40,677 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-09 23:35:40,739 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-09 23:35:40,739 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-09 23:35:40,746 - root - INFO - Starting StoryTeller API server...
2025-06-09 23:35:40,746 - root - INFO - Host: 0.0.0.0
2025-06-09 23:35:40,746 - root - INFO - Port: 5001
2025-06-09 23:35:40,746 - root - INFO - Debug mode: True
2025-06-09 23:35:40,770 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5001
 * Running on http://10.0.0.243:5001
2025-06-09 23:35:40,770 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-09 23:35:40,771 - werkzeug - INFO -  * Restarting with stat
2025-06-09 23:35:41,388 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-09 23:35:41,429 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-09 23:35:41,429 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-09 23:35:41,436 - root - INFO - Starting StoryTeller API server...
2025-06-09 23:35:41,436 - root - INFO - Host: 0.0.0.0
2025-06-09 23:35:41,436 - root - INFO - Port: 5001
2025-06-09 23:35:41,436 - root - INFO - Debug mode: True
2025-06-09 23:35:41,454 - werkzeug - WARNING -  * Debugger is active!
2025-06-09 23:35:41,481 - werkzeug - INFO -  * Debugger PIN: 904-451-859
2025-06-09 23:36:15,752 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 23:36:15] "OPTIONS /api/status HTTP/1.1" 200 -
2025-06-09 23:36:15,756 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 23:36:15] "GET /api/status HTTP/1.1" 200 -
2025-06-09 23:36:15,811 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 23:36:15] "GET /api/status HTTP/1.1" 200 -
2025-06-09 23:36:25,576 - app.services.firebase_service - INFO - Retrieved 0 stories
2025-06-09 23:36:25,577 - app.storage.storage - INFO - Retrieved 0 stories
2025-06-09 23:36:25,578 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 23:36:25] "OPTIONS /api/stories HTTP/1.1" 200 -
2025-06-09 23:36:25,582 - app.auth - INFO - Authentication successful for user: sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-09 23:36:25,803 - app.services.firebase_service - INFO - Retrieved 0 stories for user sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-09 23:36:25,803 - app.storage.storage - INFO - Retrieved 0 stories for user sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-09 23:36:25,921 - app.services.usage_service - INFO - Auto-correcting count for sTttyhSg8VdcI4Axw1Nj9WOBXv33: 1 -> 0
2025-06-09 23:36:26,263 - app.services.ai_service - INFO - Generated big story goal: Revenge on the Sect Leader who betrayed their family.
2025-06-09 23:36:26,264 - app.services.ai_service - INFO - Using cultivation genre for initial story
2025-06-09 23:36:26,264 - app.services.story_planner - INFO - Generated new arc goal: 'Challenge an inner disciple to gain attention.' for theme: 'revenge'
2025-06-09 23:36:26,265 - app.genres.cultivation_setting - INFO - Generated initial arc goal: Challenge an inner disciple to gain attention.
2025-06-09 23:36:26,265 - app.genres.cultivation_setting - INFO - Generating cultivation progression story for Ali
2025-06-09 23:36:26,265 - app.models.base_genre - INFO - Generating story for Ali
2025-06-09 23:36:37,247 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-09 23:36:37,256 - app.models.base_genre - INFO - ðŸŽ­ GENRE GPT RESPONSE (2734 chars):
2025-06-09 23:36:37,256 - app.models.base_genre - INFO - ============================================================
2025-06-09 23:36:37,257 - app.models.base_genre - INFO - [STORY]
  
---

Ali, a reincarnated soul, stands on the edge of a serene cliff, overlooking a lush valley brimming with spiritual energy. The wind tousles his hair as he gazes intently at the distant peak of the Sect's training grounds. Determination gleams in his eyes, reflecting the resolve of one who carries the weight of a past life's betrayal.

---

Descending into the valley, Ali encounters a group of novices struggling with basic cultivation techniques. With a knowing smile, he demonstrates the "Soulforge Palm," channeling his qi into a radiant golden aura that illuminates the surroundings. The novices watch in awe as the technique manifests, each movement precise and powerful.

---

As Ali's display draws attention, a snide inner disciple, Kira, approaches, his arrogance palpable. "What's a newcomer like you doing here, showing off?" he taunts, eyes glinting with superiority. Ali's expression remains calm, a mask of patience concealing his true intent.

---

To prove his worth, Kira challenges Ali to a Qi Control competition, a test of precision and focus. The air crackles with tension as the onlookers gather, sensing the impending clash of wills. Ali accepts with a nod, his eyes gleaming with a hidden determination.

---

The competition begins, with intricate patterns of qi weaving through the air in a dazzling dance. Ali unleashes the "Crimson Serpent Thread," a technique that entwines his qi into intricate coils of scarlet energy, mesmerizing the spectators with its beauty and power. Kira struggles to match his skill, his control faltering under the pressure.

---

In a stunning display of mastery, Ali outmaneuvers Kira, his qi threads intertwining with precision to form an unbreakable net around his opponent. With a swift motion, Kira concedes defeat, his expression a mix of shock and begrudging respect. The novices cheer, impressed by Ali's prowess.

---

As the dust settles, Ali's gaze shifts towards the distant peak once more, his resolve unshaken. The path to challenging the Sect Leader grows clearer, each victory bringing him closer to his ultimate goal of revenge.

---

[/STORY]

[CHOICES]
1. Ali decides to offer Kira a chance for redemption, proposing to train together to improve their cultivation techniques and forge a new alliance within the Sect.
2. Feeling the weight of his past betrayal, Ali chooses to confront the Sect Leader's closest advisor, seeking hidden knowledge that may aid him in challenging the Sect Leader.
3. Ignoring the whispers of doubt, Ali sets out on a solitary journey to explore the valley's mysterious ruins, hoping to uncover ancient secrets that could enhance his cultivation and strengthen his resolve for the upcoming challenges.
[/CHOICES]
2025-06-09 23:36:37,257 - app.models.base_genre - INFO - ============================================================
2025-06-09 23:36:37,257 - app.models.base_genre - INFO - Successfully parsed genre response: story=2113 chars, choices=3
2025-06-09 23:36:37,258 - app.storage.storage - INFO - Using provided arc goal: Challenge an inner disciple to gain attention.
2025-06-09 23:36:37,258 - app.storage.storage - INFO - Initialized memory with big goal: 'Revenge on the Sect Leader who betrayed their family.' and arc goal: 'Challenge an inner disciple to gain attention.'
2025-06-09 23:36:37,399 - app.services.firebase_service - INFO - Saved story story_1749537397_eea74173: Ali's cultivation shonen
2025-06-09 23:36:37,400 - app.storage.storage - INFO - Saved story story_1749537397_eea74173: Ali's cultivation shonen
2025-06-09 23:36:37,400 - app.storage.storage - INFO - Created new story: story_1749537397_eea74173: Ali's cultivation shonen
2025-06-09 23:36:37,753 - app.services.usage_service - INFO - Updated usage for user: sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-09 23:36:38,239 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 23:36:38] "POST /api/stories HTTP/1.1" 200 -
2025-06-09 23:36:38,454 - app.services.firebase_service - INFO - Retrieved story story_1749537397_eea74173: Ali's cultivation shonen
2025-06-09 23:36:38,454 - app.storage.storage - INFO - Retrieved story story_1749537397_eea74173: Ali's cultivation shonen
2025-06-09 23:36:38,456 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 23:36:38] "OPTIONS /api/stories/story_1749537397_eea74173 HTTP/1.1" 200 -
2025-06-09 23:36:38,689 - app.services.firebase_service - INFO - Retrieved story story_1749537397_eea74173: Ali's cultivation shonen
2025-06-09 23:36:38,689 - app.storage.storage - INFO - Retrieved story story_1749537397_eea74173: Ali's cultivation shonen
2025-06-09 23:36:38,691 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 23:36:38] "OPTIONS /api/stories/story_1749537397_eea74173 HTTP/1.1" 200 -
2025-06-09 23:36:38,693 - app.services.firebase_service - INFO - Retrieved story story_1749537397_eea74173: Ali's cultivation shonen
2025-06-09 23:36:38,695 - app.storage.storage - INFO - Retrieved story story_1749537397_eea74173: Ali's cultivation shonen
2025-06-09 23:36:38,696 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 23:36:38] "GET /api/stories/story_1749537397_eea74173 HTTP/1.1" 200 -
2025-06-09 23:36:38,794 - app.services.firebase_service - INFO - Retrieved story story_1749537397_eea74173: Ali's cultivation shonen
2025-06-09 23:36:38,795 - app.storage.storage - INFO - Retrieved story story_1749537397_eea74173: Ali's cultivation shonen
2025-06-09 23:36:38,796 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 23:36:38] "GET /api/stories/story_1749537397_eea74173 HTTP/1.1" 200 -
2025-06-09 23:45:38,692 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 23:45:38] "OPTIONS /api/stories/story_1749537397_eea74173/choices/1 HTTP/1.1" 200 -
2025-06-09 23:45:38,695 - app.auth - INFO - Authentication successful for user: sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-09 23:45:38,872 - app.services.firebase_service - INFO - Retrieved story story_1749537397_eea74173: Ali's cultivation shonen
2025-06-09 23:45:38,873 - app.storage.storage - INFO - Retrieved story story_1749537397_eea74173: Ali's cultivation shonen
2025-06-09 23:45:39,459 - app.services.usage_service - INFO - Updated usage for user: sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-09 23:45:39,562 - app.services.firebase_service - INFO - Retrieved story story_1749537397_eea74173: Ali's cultivation shonen
2025-06-09 23:45:39,563 - app.storage.storage - INFO - Retrieved story story_1749537397_eea74173: Ali's cultivation shonen
2025-06-09 23:45:39,809 - app.services.firebase_service - INFO - Saved story story_1749537397_eea74173: Ali's cultivation shonen
2025-06-09 23:45:39,809 - app.storage.storage - INFO - Saved story story_1749537397_eea74173: Ali's cultivation shonen
2025-06-09 23:45:39,810 - app.storage.storage - INFO - Saved choice 1 for node initial in story story_1749537397_eea74173
2025-06-09 23:45:39,810 - app.services.ai_service - INFO - Using cultivation genre for story continuation
2025-06-09 23:45:39,810 - app.services.ai_service - INFO - Using big story goal for cultivation continuation: Regain lost memories from a past life.
2025-06-09 23:45:39,810 - app.genres.cultivation_setting - INFO - Continuing cultivation progression story for Ali
2025-06-09 23:45:39,811 - app.models.base_genre - INFO - Generating story for Ali
2025-06-09 23:45:46,507 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-09 23:45:46,515 - app.models.base_genre - INFO - ðŸŽ­ GENRE GPT RESPONSE (2234 chars):
2025-06-09 23:45:46,515 - app.models.base_genre - INFO - ============================================================
2025-06-09 23:45:46,515 - app.models.base_genre - INFO - **[STORY]**

Ali extends a hand towards Kira, his eyes soft yet determined. "Let us rise above past animosities and walk the path of unity," he proposes, his voice carrying the weight of sincerity. Kira hesitates, pride warring with curiosity in his gaze.

Reluctantly, Kira accepts Ali's offer, a begrudging nod marking the beginning of an unexpected alliance. Together, they delve into the intricacies of qi manipulation, each sharing techniques and insights with the other. The air hums with a newfound camaraderie, drawing curious glances from their peers.

In the midst of their training, Ali unveils the "Harmony Lotus Dance," a technique that harmonizes their qi frequencies, creating a mesmerizing symphony of color and light. As they synchronize their movements, a bond of mutual respect and understanding blossoms between the once-rival cultivators.

However, their peaceful training is soon interrupted by a sudden surge of dark energy emanating from the depths of the valley. A mysterious rift in the fabric of reality appears, spewing forth shadowy creatures that hunger for spiritual essence. Ali and Kira stand back-to-back, ready to defend their newfound unity against this unexpected threat.

As the shadow creatures close in, Ali and Kira unleash a combined technique, the "Eclipse Barrier," creating a shield of swirling light and darkness that repels the malevolent entities. The valley trembles with the intensity of their clash, but the two cultivators stand firm, their partnership proving stronger than any individual strength.

With the creatures banished and the rift sealed, Ali and Kira share a moment of silent understanding, their eyes meeting in silent gratitude. The bond forged through adversity solidifies, paving the way for a future of shared challenges and victories.

---

**[CHOICES]**
1. Offer to investigate the source of the rift with Kira, delving into the mysteries lurking beneath the Sect's training grounds.
2. Seek guidance from the Sect Elders about the sudden appearance of the shadow creatures, hoping to uncover ancient secrets hidden within the valley.
3. Train together to further enhance their combined techniques, preparing for future threats that may test their newfound unity.
2025-06-09 23:45:46,516 - app.models.base_genre - INFO - ============================================================
2025-06-09 23:45:46,519 - app.models.base_genre - INFO - Successfully parsed genre response: story=1816 chars, choices=3
2025-06-09 23:45:46,667 - app.services.firebase_service - INFO - Retrieved story story_1749537397_eea74173: Ali's cultivation shonen
2025-06-09 23:45:46,668 - app.storage.storage - INFO - Retrieved story story_1749537397_eea74173: Ali's cultivation shonen
2025-06-09 23:45:46,871 - app.services.firebase_service - INFO - Saved story story_1749537397_eea74173: Ali's cultivation shonen
2025-06-09 23:45:46,872 - app.storage.storage - INFO - Saved story story_1749537397_eea74173: Ali's cultivation shonen
2025-06-09 23:45:46,872 - app.storage.storage - INFO - Added node node_2996032325 to story story_1749537397_eea74173
2025-06-09 23:45:47,197 - werkzeug - INFO - 127.0.0.1 - - [09/Jun/2025 23:45:47] "POST /api/stories/story_1749537397_eea74173/choices/1 HTTP/1.1" 200 -
2025-06-09 23:57:56,698 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/services/story_planner.py', reloading
2025-06-09 23:57:58,832 - werkzeug - INFO -  * Restarting with stat
2025-06-09 23:57:59,654 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-09 23:57:59,714 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-09 23:57:59,714 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-09 23:57:59,720 - root - INFO - Starting StoryTeller API server...
2025-06-09 23:57:59,720 - root - INFO - Host: 0.0.0.0
2025-06-09 23:57:59,720 - root - INFO - Port: 5001
2025-06-09 23:57:59,720 - root - INFO - Debug mode: True
2025-06-09 23:57:59,737 - werkzeug - WARNING -  * Debugger is active!
2025-06-09 23:57:59,767 - werkzeug - INFO -  * Debugger PIN: 904-451-859
2025-06-10 16:51:21,084 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_setting.py', reloading
2025-06-10 16:51:21,233 - werkzeug - INFO -  * Restarting with stat
2025-06-10 16:51:22,114 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-10 16:51:22,175 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-10 16:51:22,176 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-10 16:51:22,183 - root - INFO - Starting StoryTeller API server...
2025-06-10 16:51:22,183 - root - INFO - Host: 0.0.0.0
2025-06-10 16:51:22,183 - root - INFO - Port: 5001
2025-06-10 16:51:22,183 - root - INFO - Debug mode: True
2025-06-10 16:51:22,201 - werkzeug - WARNING -  * Debugger is active!
2025-06-10 16:51:22,241 - werkzeug - INFO -  * Debugger PIN: 904-451-859
2025-06-10 17:14:31,060 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/api.py', reloading
2025-06-10 17:14:31,186 - werkzeug - INFO -  * Restarting with stat
2025-06-10 17:14:32,024 - app.services.firebase_service - INFO - Initialized with environment credentials for project: storyteller-6deea
2025-06-10 19:30:18,974 - app.services.firebase_service - ERROR - Error initializing: Failed to initialize a certificate credential. Caused by: "Unable to load PEM file. See https://cryptography.io/en/latest/faq/#why-can-t-i-import-my-pem-file for more details. InvalidData(InvalidByte(1600, 61))"
2025-06-10 19:30:18,974 - app.services.firebase_service - ERROR - Make sure Firebase Admin SDK is properly configured
2025-06-10 19:30:18,974 - app.services.firebase_service - ERROR - GOOGLE_APPLICATION_CREDENTIALS: ./firebase-service-account.json
2025-06-10 19:30:18,974 - app.services.firebase_service - ERROR - File exists: False
2025-06-10 19:54:44,639 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-10 19:54:44,712 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-10 19:54:44,712 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-10 19:54:44,716 - root - INFO - Starting StoryTeller API server...
2025-06-10 19:54:44,716 - root - INFO - Host: 0.0.0.0
2025-06-10 19:54:44,716 - root - INFO - Port: 5001
2025-06-10 19:54:44,716 - root - INFO - Debug mode: True
2025-06-10 19:54:44,725 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5001
 * Running on http://10.0.0.243:5001
2025-06-10 19:54:44,725 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-10 19:54:44,726 - werkzeug - INFO -  * Restarting with stat
2025-06-10 19:54:45,158 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-10 19:54:45,200 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-10 19:54:45,200 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-10 19:54:45,204 - root - INFO - Starting StoryTeller API server...
2025-06-10 19:54:45,204 - root - INFO - Host: 0.0.0.0
2025-06-10 19:54:45,205 - root - INFO - Port: 5001
2025-06-10 19:54:45,205 - root - INFO - Debug mode: True
2025-06-10 19:54:45,206 - werkzeug - WARNING -  * Debugger is active!
2025-06-10 19:54:45,217 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-10 19:54:51,822 - werkzeug - INFO - 127.0.0.1 - - [10/Jun/2025 19:54:51] "OPTIONS /api/status HTTP/1.1" 200 -
2025-06-10 19:54:51,825 - werkzeug - INFO - 127.0.0.1 - - [10/Jun/2025 19:54:51] "GET /api/status HTTP/1.1" 200 -
2025-06-10 19:54:51,836 - werkzeug - INFO - 127.0.0.1 - - [10/Jun/2025 19:54:51] "GET /api/status HTTP/1.1" 200 -
2025-06-10 19:54:54,373 - app.services.firebase_service - INFO - Retrieved 1 stories
2025-06-10 19:54:54,373 - app.storage.storage - INFO - Retrieved 1 stories
2025-06-10 19:54:54,375 - werkzeug - INFO - 127.0.0.1 - - [10/Jun/2025 19:54:54] "OPTIONS /api/stories HTTP/1.1" 200 -
2025-06-10 19:54:54,441 - app.services.firebase_service - INFO - Retrieved 1 stories
2025-06-10 19:54:54,442 - app.storage.storage - INFO - Retrieved 1 stories
2025-06-10 19:54:54,443 - werkzeug - INFO - 127.0.0.1 - - [10/Jun/2025 19:54:54] "OPTIONS /api/stories HTTP/1.1" 200 -
2025-06-10 19:54:54,513 - app.services.firebase_service - INFO - Retrieved 1 stories for user sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-10 19:54:54,513 - app.storage.storage - INFO - Retrieved 1 stories for user sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-10 19:54:54,514 - werkzeug - INFO - 127.0.0.1 - - [10/Jun/2025 19:54:54] "GET /api/stories HTTP/1.1" 200 -
2025-06-10 19:54:54,648 - app.services.firebase_service - INFO - Retrieved 1 stories for user sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-10 19:54:54,648 - app.storage.storage - INFO - Retrieved 1 stories for user sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-10 19:54:54,649 - werkzeug - INFO - 127.0.0.1 - - [10/Jun/2025 19:54:54] "GET /api/stories HTTP/1.1" 200 -
2025-06-10 19:55:05,785 - app.services.firebase_service - INFO - Retrieved 1 stories
2025-06-10 19:55:05,787 - app.storage.storage - INFO - Retrieved 1 stories
2025-06-10 19:55:05,788 - werkzeug - INFO - 127.0.0.1 - - [10/Jun/2025 19:55:05] "OPTIONS /api/stories HTTP/1.1" 200 -
2025-06-10 19:55:05,793 - app.auth - INFO - Authentication successful for user: sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-10 19:55:05,905 - app.services.firebase_service - INFO - Retrieved 1 stories for user sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-10 19:55:05,906 - app.storage.storage - INFO - Retrieved 1 stories for user sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-10 19:55:06,238 - app.services.ai_service - INFO - Generated big story goal: Unite the fractured martial clans under one rule.
2025-06-10 19:55:06,238 - app.services.ai_service - INFO - Using cultivation genre for initial story
2025-06-10 19:55:06,239 - app.services.story_planner - INFO - Generated 5 new arc goals for theme: 'unite_martial_clans'
2025-06-10 19:55:06,239 - app.genres.cultivation_setting - INFO - Generated 5 arc goals. Initial arc goal: Travel to different sects and clans to build alliances.
2025-06-10 19:55:06,239 - app.genres.cultivation_setting - INFO - Generating cultivation progression story for Ali
2025-06-10 19:55:06,239 - app.models.base_genre - INFO - Generating story for Ali
2025-06-10 19:55:13,951 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-10 19:55:13,955 - app.models.base_genre - INFO - ðŸŽ­ GENRE GPT RESPONSE (2202 chars):
2025-06-10 19:55:13,956 - app.models.base_genre - INFO - ============================================================
2025-06-10 19:55:13,956 - app.models.base_genre - INFO - [STORY]
  
---

Ali, a reincarnated soul with past knowledge, stands at the entrance of the Azure Peak Sect. The towering mountains loom ahead, casting long shadows in the crisp morning light. (Dynamic Scene Intro)

As Ali approaches, a group of disciples block his way, sneering. "Outsiders aren't welcome here," one of them taunts. Undeterred, Ali smiles, radiating calm confidence. (Character Focus)

Suddenly, the ground trembles, and massive rocks start hurtling down the mountain. An environmental disaster! Ali springs into action, swiftly dodging and deflecting the rocks with precise movements. (Engaging Conflict)

Ali channels his cultivation technique, the "Flowing Wind Palm," a technique from his past life that harnesses the energy of the air to create powerful gusts. The qi around him shimmers with vibrant azure hues, enhancing his movements. (Visual Cultivation Showcase)

"Work together!" Ali shouts to the disciples, who, impressed by his skill, join in, combining their powers to quell the rockslide. The unity forged in crisis strengthens their bond. (Believable Character Interactions)

With the danger averted, the disciples look at Ali with newfound respect. One of them, Mei, steps forward. "You've proven your worth. Come, let me show you our techniques," she says, leading Ali inside. (Clear Consequences & Progression)

As they walk, Mei explains the sect's struggles and the need for alliances. Ali listens, his mind already formulating ways to help. The chapter ends with Mei offering Ali a chance to learn the sect's ancient "Azure Serpent Stance." (Intriguing Ending)

---

[/STORY]

[CHOICES]
1. Ali eagerly accepts Mei's offer to learn the ancient "Azure Serpent Stance," eager to deepen his bond with the sect and gain valuable knowledge for forging alliances.
2. Ali suggests a joint training session with Mei and the other disciples, aiming to showcase his skills further and strengthen the camaraderie between them before diving into specific techniques.
3. Ali requests a private audience with the sect leader to discuss a potential collaboration strategy, wanting to establish a deeper connection at the leadership level to secure a strong alliance.
[/CHOICES]
2025-06-10 19:55:13,956 - app.models.base_genre - INFO - ============================================================
2025-06-10 19:55:13,957 - app.models.base_genre - INFO - Successfully parsed genre response: story=1595 chars, choices=3
2025-06-10 19:55:13,957 - app.storage.storage - INFO - Using provided arc goals: 5 goals
2025-06-10 19:55:13,958 - app.storage.storage - INFO - Using provided arc goal: Travel to different sects and clans to build alliances.
2025-06-10 19:55:13,958 - app.storage.storage - INFO - Initialized memory with big goal: 'Unite the fractured martial clans under one rule.' and arc goal: 'Travel to different sects and clans to build alliances.'
2025-06-10 19:55:13,958 - app.storage.storage - INFO - Arc progression: 1/5, Chapter: 1/10
2025-06-10 19:55:13,958 - app.storage.storage - INFO - Overall story progress: Chapter 1/50 (2%)
2025-06-10 19:55:14,148 - app.services.firebase_service - INFO - Saved story story_1749610513_2de1b999: Ali's cultivation shonen
2025-06-10 19:55:14,149 - app.storage.storage - INFO - Saved story story_1749610513_2de1b999: Ali's cultivation shonen
2025-06-10 19:55:14,149 - app.storage.storage - INFO - Created new story: story_1749610513_2de1b999: Ali's cultivation shonen
2025-06-10 19:55:14,375 - app.services.usage_service - INFO - Updated usage for user: sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-10 19:55:14,672 - werkzeug - INFO - 127.0.0.1 - - [10/Jun/2025 19:55:14] "POST /api/stories HTTP/1.1" 200 -
2025-06-10 19:55:14,884 - app.services.firebase_service - INFO - Retrieved story story_1749610513_2de1b999: Ali's cultivation shonen
2025-06-10 19:55:14,885 - app.storage.storage - INFO - Retrieved story story_1749610513_2de1b999: Ali's cultivation shonen
2025-06-10 19:55:14,886 - werkzeug - INFO - 127.0.0.1 - - [10/Jun/2025 19:55:14] "OPTIONS /api/stories/story_1749610513_2de1b999 HTTP/1.1" 200 -
2025-06-10 19:55:14,887 - app.services.firebase_service - INFO - Retrieved story story_1749610513_2de1b999: Ali's cultivation shonen
2025-06-10 19:55:14,888 - app.storage.storage - INFO - Retrieved story story_1749610513_2de1b999: Ali's cultivation shonen
2025-06-10 19:55:14,888 - werkzeug - INFO - 127.0.0.1 - - [10/Jun/2025 19:55:14] "OPTIONS /api/stories/story_1749610513_2de1b999 HTTP/1.1" 200 -
2025-06-10 19:55:15,002 - app.services.firebase_service - INFO - Retrieved story story_1749610513_2de1b999: Ali's cultivation shonen
2025-06-10 19:55:15,003 - app.storage.storage - INFO - Retrieved story story_1749610513_2de1b999: Ali's cultivation shonen
2025-06-10 19:55:15,004 - werkzeug - INFO - 127.0.0.1 - - [10/Jun/2025 19:55:15] "GET /api/stories/story_1749610513_2de1b999 HTTP/1.1" 200 -
2025-06-10 19:55:15,106 - app.services.firebase_service - INFO - Retrieved story story_1749610513_2de1b999: Ali's cultivation shonen
2025-06-10 19:55:15,107 - app.storage.storage - INFO - Retrieved story story_1749610513_2de1b999: Ali's cultivation shonen
2025-06-10 19:55:15,108 - werkzeug - INFO - 127.0.0.1 - - [10/Jun/2025 19:55:15] "GET /api/stories/story_1749610513_2de1b999 HTTP/1.1" 200 -
2025-06-10 20:22:10,984 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/services/story_planner.py', reloading
2025-06-10 20:22:13,092 - werkzeug - INFO -  * Restarting with stat
2025-06-10 20:22:13,690 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-10 20:22:13,749 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-10 20:22:13,749 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-10 20:22:13,753 - root - INFO - Starting StoryTeller API server...
2025-06-10 20:22:13,753 - root - INFO - Host: 0.0.0.0
2025-06-10 20:22:13,753 - root - INFO - Port: 5001
2025-06-10 20:22:13,753 - root - INFO - Debug mode: True
2025-06-10 20:22:13,756 - werkzeug - WARNING -  * Debugger is active!
2025-06-10 20:22:13,762 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-10 20:22:26,873 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/services/story_planner.py', reloading
2025-06-10 20:22:26,956 - werkzeug - INFO -  * Restarting with stat
2025-06-10 20:22:27,498 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-10 20:22:27,555 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-10 20:22:27,555 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-10 20:22:27,559 - root - INFO - Starting StoryTeller API server...
2025-06-10 20:22:27,559 - root - INFO - Host: 0.0.0.0
2025-06-10 20:22:27,559 - root - INFO - Port: 5001
2025-06-10 20:22:27,559 - root - INFO - Debug mode: True
2025-06-10 20:22:27,562 - werkzeug - WARNING -  * Debugger is active!
2025-06-10 20:22:27,568 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-10 20:22:40,692 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/storage/storage.py', reloading
2025-06-10 20:22:40,779 - werkzeug - INFO -  * Restarting with stat
2025-06-10 20:22:41,385 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-10 20:22:41,431 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-10 20:22:41,431 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-10 20:22:41,435 - root - INFO - Starting StoryTeller API server...
2025-06-10 20:22:41,435 - root - INFO - Host: 0.0.0.0
2025-06-10 20:22:41,435 - root - INFO - Port: 5001
2025-06-10 20:22:41,435 - root - INFO - Debug mode: True
2025-06-10 20:22:41,438 - werkzeug - WARNING -  * Debugger is active!
2025-06-10 20:22:41,444 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-10 20:22:51,546 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/models/models.py', reloading
2025-06-10 20:22:51,614 - werkzeug - INFO -  * Restarting with stat
2025-06-10 20:22:52,077 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-10 20:22:52,124 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-10 20:22:52,125 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-10 20:22:52,129 - root - INFO - Starting StoryTeller API server...
2025-06-10 20:22:52,129 - root - INFO - Host: 0.0.0.0
2025-06-10 20:22:52,129 - root - INFO - Port: 5001
2025-06-10 20:22:52,129 - root - INFO - Debug mode: True
2025-06-10 20:22:52,131 - werkzeug - WARNING -  * Debugger is active!
2025-06-10 20:22:52,137 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-10 20:26:07,871 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/services/story_planner.py', reloading
2025-06-10 20:26:07,973 - werkzeug - INFO -  * Restarting with stat
2025-06-10 20:26:08,719 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-10 20:26:08,779 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-10 20:26:08,780 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-10 20:26:08,784 - root - INFO - Starting StoryTeller API server...
2025-06-10 20:26:08,784 - root - INFO - Host: 0.0.0.0
2025-06-10 20:26:08,784 - root - INFO - Port: 5001
2025-06-10 20:26:08,784 - root - INFO - Debug mode: True
2025-06-10 20:26:08,786 - werkzeug - WARNING -  * Debugger is active!
2025-06-10 20:26:08,793 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-10 20:26:34,012 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/models/models.py', reloading
2025-06-10 20:26:34,078 - werkzeug - INFO -  * Restarting with stat
2025-06-10 20:26:34,627 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-10 20:26:34,685 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-10 20:26:34,685 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-10 20:26:34,689 - root - INFO - Starting StoryTeller API server...
2025-06-10 20:26:34,689 - root - INFO - Host: 0.0.0.0
2025-06-10 20:26:34,689 - root - INFO - Port: 5001
2025-06-10 20:26:34,689 - root - INFO - Debug mode: True
2025-06-10 20:26:34,692 - werkzeug - WARNING -  * Debugger is active!
2025-06-10 20:26:34,697 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-10 20:26:35,710 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/models/models.py', reloading
2025-06-10 20:26:35,779 - werkzeug - INFO -  * Restarting with stat
2025-06-10 20:26:36,199 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-10 20:26:36,241 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-10 20:26:36,241 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-10 20:26:36,245 - root - INFO - Starting StoryTeller API server...
2025-06-10 20:26:36,245 - root - INFO - Host: 0.0.0.0
2025-06-10 20:26:36,245 - root - INFO - Port: 5001
2025-06-10 20:26:36,245 - root - INFO - Debug mode: True
2025-06-10 20:26:36,247 - werkzeug - WARNING -  * Debugger is active!
2025-06-10 20:26:36,253 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-10 20:26:41,316 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/models/models.py', reloading
2025-06-10 20:26:41,397 - werkzeug - INFO -  * Restarting with stat
2025-06-10 20:26:41,822 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-10 20:26:41,864 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-10 20:26:41,864 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-10 20:26:41,868 - root - INFO - Starting StoryTeller API server...
2025-06-10 20:26:41,868 - root - INFO - Host: 0.0.0.0
2025-06-10 20:26:41,868 - root - INFO - Port: 5001
2025-06-10 20:26:41,868 - root - INFO - Debug mode: True
2025-06-10 20:26:41,870 - werkzeug - WARNING -  * Debugger is active!
2025-06-10 20:26:41,876 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-10 20:28:46,013 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/services/story_planner.py', reloading
2025-06-10 20:28:46,113 - werkzeug - INFO -  * Restarting with stat
2025-06-10 20:28:46,716 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-10 20:28:46,781 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-10 20:28:46,781 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-10 20:28:46,785 - root - INFO - Starting StoryTeller API server...
2025-06-10 20:28:46,785 - root - INFO - Host: 0.0.0.0
2025-06-10 20:28:46,785 - root - INFO - Port: 5001
2025-06-10 20:28:46,785 - root - INFO - Debug mode: True
2025-06-10 20:28:46,788 - werkzeug - WARNING -  * Debugger is active!
2025-06-10 20:28:46,794 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-10 20:28:59,899 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/storage/storage.py', reloading
2025-06-10 20:28:59,975 - werkzeug - INFO -  * Restarting with stat
2025-06-10 20:29:00,546 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-10 20:29:00,606 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-10 20:29:00,607 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-10 20:29:00,611 - root - INFO - Starting StoryTeller API server...
2025-06-10 20:29:00,611 - root - INFO - Host: 0.0.0.0
2025-06-10 20:29:00,611 - root - INFO - Port: 5001
2025-06-10 20:29:00,611 - root - INFO - Debug mode: True
2025-06-10 20:29:00,614 - werkzeug - WARNING -  * Debugger is active!
2025-06-10 20:29:00,620 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-10 20:34:26,560 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/services/story_planner.py', reloading
2025-06-10 20:34:26,639 - werkzeug - INFO -  * Restarting with stat
2025-06-10 20:34:27,223 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-10 20:34:27,284 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-10 20:34:27,284 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-10 20:34:27,288 - root - INFO - Starting StoryTeller API server...
2025-06-10 20:34:27,288 - root - INFO - Host: 0.0.0.0
2025-06-10 20:34:27,288 - root - INFO - Port: 5001
2025-06-10 20:34:27,288 - root - INFO - Debug mode: True
2025-06-10 20:34:27,290 - werkzeug - WARNING -  * Debugger is active!
2025-06-10 20:34:27,297 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-10 20:34:30,326 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_setting.py', reloading
2025-06-10 20:34:30,403 - werkzeug - INFO -  * Restarting with stat
2025-06-10 20:34:30,825 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-10 20:34:30,865 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-10 20:34:30,865 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-10 20:34:30,869 - root - INFO - Starting StoryTeller API server...
2025-06-10 20:34:30,869 - root - INFO - Host: 0.0.0.0
2025-06-10 20:34:30,869 - root - INFO - Port: 5001
2025-06-10 20:34:30,869 - root - INFO - Debug mode: True
2025-06-10 20:34:30,871 - werkzeug - WARNING -  * Debugger is active!
2025-06-10 20:34:30,877 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-10 20:36:05,801 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/services/story_planner.py', reloading
2025-06-10 20:36:05,876 - werkzeug - INFO -  * Restarting with stat
2025-06-10 20:36:06,452 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-10 20:36:06,515 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-10 20:36:06,515 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-10 20:36:06,519 - root - INFO - Starting StoryTeller API server...
2025-06-10 20:36:06,519 - root - INFO - Host: 0.0.0.0
2025-06-10 20:36:06,519 - root - INFO - Port: 5001
2025-06-10 20:36:06,519 - root - INFO - Debug mode: True
2025-06-10 20:36:06,523 - werkzeug - WARNING -  * Debugger is active!
2025-06-10 20:36:06,532 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-10 23:05:53,182 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-10 23:05:53,244 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-10 23:05:53,244 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-10 23:05:53,248 - root - INFO - Starting StoryTeller API server...
2025-06-10 23:05:53,248 - root - INFO - Host: 0.0.0.0
2025-06-10 23:05:53,248 - root - INFO - Port: 5001
2025-06-10 23:05:53,248 - root - INFO - Debug mode: True
2025-06-10 23:05:53,254 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5001
 * Running on http://10.0.0.243:5001
2025-06-10 23:05:53,254 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-10 23:05:53,255 - werkzeug - INFO -  * Restarting with stat
2025-06-10 23:05:53,672 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-10 23:05:53,730 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-10 23:05:53,730 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-10 23:05:53,734 - root - INFO - Starting StoryTeller API server...
2025-06-10 23:05:53,734 - root - INFO - Host: 0.0.0.0
2025-06-10 23:05:53,734 - root - INFO - Port: 5001
2025-06-10 23:05:53,734 - root - INFO - Debug mode: True
2025-06-10 23:05:53,736 - werkzeug - WARNING -  * Debugger is active!
2025-06-10 23:05:53,743 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-10 23:06:22,692 - werkzeug - INFO - 127.0.0.1 - - [10/Jun/2025 23:06:22] "OPTIONS /api/status HTTP/1.1" 200 -
2025-06-10 23:06:22,696 - werkzeug - INFO - 127.0.0.1 - - [10/Jun/2025 23:06:22] "GET /api/status HTTP/1.1" 200 -
2025-06-10 23:06:22,697 - werkzeug - INFO - 127.0.0.1 - - [10/Jun/2025 23:06:22] "GET /api/status HTTP/1.1" 200 -
2025-06-10 23:06:41,838 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-10 23:06:41,900 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-10 23:06:41,900 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-10 23:06:41,904 - root - INFO - Starting StoryTeller API server...
2025-06-10 23:06:41,904 - root - INFO - Host: 0.0.0.0
2025-06-10 23:06:41,904 - root - INFO - Port: 5001
2025-06-10 23:06:41,904 - root - INFO - Debug mode: True
2025-06-10 23:06:41,910 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5001
 * Running on http://10.0.0.243:5001
2025-06-10 23:06:41,910 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-10 23:06:41,911 - werkzeug - INFO -  * Restarting with stat
2025-06-10 23:06:42,319 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-10 23:06:42,359 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-10 23:06:42,360 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-10 23:06:42,364 - root - INFO - Starting StoryTeller API server...
2025-06-10 23:06:42,364 - root - INFO - Host: 0.0.0.0
2025-06-10 23:06:42,364 - root - INFO - Port: 5001
2025-06-10 23:06:42,364 - root - INFO - Debug mode: True
2025-06-10 23:06:42,366 - werkzeug - WARNING -  * Debugger is active!
2025-06-10 23:06:42,373 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-10 23:07:00,564 - app.services.firebase_service - INFO - Retrieved 2 stories
2025-06-10 23:07:00,565 - app.storage.storage - INFO - Retrieved 2 stories
2025-06-10 23:07:00,568 - werkzeug - INFO - 127.0.0.1 - - [10/Jun/2025 23:07:00] "OPTIONS /api/stories HTTP/1.1" 200 -
2025-06-10 23:07:00,572 - app.auth - INFO - Authentication successful for user: sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-10 23:07:00,817 - app.services.firebase_service - INFO - Retrieved 2 stories for user sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-10 23:07:00,818 - app.storage.storage - INFO - Retrieved 2 stories for user sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-10 23:07:01,195 - app.services.ai_service - INFO - Generated big story goal: Protect someone dear to you by becoming strong enough that no force in the world can ever threaten them again.
2025-06-10 23:07:01,195 - app.services.ai_service - INFO - Using cultivation genre for initial story
2025-06-10 23:07:01,196 - app.services.story_planner - INFO - Calculated number of arcs: 7 based on 50 chapters and 7 chapters per arc
2025-06-10 23:07:01,196 - app.services.story_planner - INFO - Found exact match for goal: 'Protect someone dear to you by becoming strong enough that no force in the world can ever threaten them again.'
2025-06-10 23:07:01,197 - app.services.story_planner - INFO - Generated 7 new arc goals for theme: 'protection'
2025-06-10 23:07:01,197 - app.genres.cultivation_setting - INFO - Generated 7 arc goals. Initial arc goal: Sacrifice part of your cultivation to trade for their life.
2025-06-10 23:07:01,197 - app.genres.cultivation_setting - INFO - Generating cultivation progression story for Ali
2025-06-10 23:07:01,198 - app.models.base_genre - INFO - Generating story for Ali
2025-06-10 23:07:09,728 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-10 23:07:09,734 - app.models.base_genre - INFO - ðŸŽ­ GENRE GPT RESPONSE (2368 chars):
2025-06-10 23:07:09,735 - app.models.base_genre - INFO - ============================================================
2025-06-10 23:07:09,735 - app.models.base_genre - INFO - [STORY]
---
In a serene bamboo forest, Ali, a young cultivator with piercing blue eyes and a determined expression, practices his Qi manipulation. Wisps of azure Qi dance around his fingertips, showcasing his proficiency.

Ali recalls memories of his past life, where he was a brilliant scientist. His unique insights into energy manipulation from his previous incarnation give him an edge in cultivation techniques, making his Qi unusually vibrant and potent.

Suddenly, a powerful tremor shakes the forest, startling Ali. A mysterious rift in the sky appears, crackling with chaotic energy. From the tear emerges a fearsome creature, its monstrous form radiating malevolent intent.

With a quick focus, Ali channels his Qi into a defensive barrier, but the creature's attack shatters it effortlessly. As the beast lunges towards him, Ali realizes that defeating this creature will demand a sacrifice greater than he has ever madeâ€”a sacrifice of his cultivation progress.

In a swift move, Ali activates the "Azure Phoenix Dance," a technique from his past life knowledge, enveloping himself in a brilliant azure aura. The technique enhances his speed and agility, allowing him to dodge the creature's attacks with grace.

As the battle intensifies, Ali's Qi pulses with vibrant shades of blue, displaying his mastery over the technique. However, the strain of maintaining it drains his cultivation power rapidly, a sacrifice he must make to ensure his survival and protect his loved one.

As the creature roars in frustration, Ali sees an opening. With a decisive strike infused with his remaining Qi, he delivers a powerful blow, shattering the beast into shards of dark energy that dissipate into the wind.

Exhausted but victorious, Ali stands amidst the remnants of the battle, knowing that his sacrifice will have consequences on his cultivation journey. Yet, he is willing to pay any price to ensure the safety of his dear one.

---
[/STORY]

[CHOICES]
1. Draw upon the remnants of the defeated creature's energy to bolster your cultivation, risking potential unforeseen consequences.
2. Meditate and focus on restoring your Qi through natural methods, prioritizing a slower but safer recovery process.
3. Seek guidance from the ancient spirits of the forest to learn about the repercussions of sacrificing your cultivation and how to mitigate them.
[/CHOICES]
2025-06-10 23:07:09,735 - app.models.base_genre - INFO - ============================================================
2025-06-10 23:07:09,735 - app.models.base_genre - INFO - Successfully parsed genre response: story=1932 chars, choices=3
2025-06-10 23:07:09,736 - app.storage.storage - INFO - Using provided arc goals: 7 goals
2025-06-10 23:07:09,736 - app.storage.storage - INFO - Using provided arc goal: Sacrifice part of your cultivation to trade for their life.
2025-06-10 23:07:09,736 - app.storage.storage - INFO - Initialized memory with big goal: 'Protect someone dear to you by becoming strong enough that no force in the world can ever threaten them again.' and arc goal: 'Sacrifice part of your cultivation to trade for their life.'
2025-06-10 23:07:09,736 - app.storage.storage - INFO - Arc progression: 1/7, Chapter: 1/7
2025-06-10 23:07:09,736 - app.storage.storage - INFO - Overall story progress: Chapter 1/50 (2%)
2025-06-10 23:07:09,908 - app.services.firebase_service - INFO - Saved story story_1749622029_247284f2: Ali's cultivation shonen
2025-06-10 23:07:09,908 - app.storage.storage - INFO - Saved story story_1749622029_247284f2: Ali's cultivation shonen
2025-06-10 23:07:09,909 - app.storage.storage - INFO - Created new story: story_1749622029_247284f2: Ali's cultivation shonen
2025-06-10 23:07:10,267 - app.services.usage_service - INFO - Updated usage for user: sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-10 23:07:10,802 - werkzeug - INFO - 127.0.0.1 - - [10/Jun/2025 23:07:10] "POST /api/stories HTTP/1.1" 200 -
2025-06-10 23:07:11,006 - app.services.firebase_service - INFO - Retrieved story story_1749622029_247284f2: Ali's cultivation shonen
2025-06-10 23:07:11,006 - app.storage.storage - INFO - Retrieved story story_1749622029_247284f2: Ali's cultivation shonen
2025-06-10 23:07:11,008 - werkzeug - INFO - 127.0.0.1 - - [10/Jun/2025 23:07:11] "OPTIONS /api/stories/story_1749622029_247284f2 HTTP/1.1" 200 -
2025-06-10 23:07:11,243 - app.services.firebase_service - INFO - Retrieved story story_1749622029_247284f2: Ali's cultivation shonen
2025-06-10 23:07:11,244 - app.storage.storage - INFO - Retrieved story story_1749622029_247284f2: Ali's cultivation shonen
2025-06-10 23:07:11,246 - werkzeug - INFO - 127.0.0.1 - - [10/Jun/2025 23:07:11] "GET /api/stories/story_1749622029_247284f2 HTTP/1.1" 200 -
2025-06-10 23:07:11,313 - app.services.firebase_service - INFO - Retrieved story story_1749622029_247284f2: Ali's cultivation shonen
2025-06-10 23:07:11,314 - app.storage.storage - INFO - Retrieved story story_1749622029_247284f2: Ali's cultivation shonen
2025-06-10 23:07:11,315 - werkzeug - INFO - 127.0.0.1 - - [10/Jun/2025 23:07:11] "OPTIONS /api/stories/story_1749622029_247284f2 HTTP/1.1" 200 -
2025-06-10 23:07:11,417 - app.services.firebase_service - INFO - Retrieved story story_1749622029_247284f2: Ali's cultivation shonen
2025-06-10 23:07:11,417 - app.storage.storage - INFO - Retrieved story story_1749622029_247284f2: Ali's cultivation shonen
2025-06-10 23:07:11,417 - werkzeug - INFO - 127.0.0.1 - - [10/Jun/2025 23:07:11] "GET /api/stories/story_1749622029_247284f2 HTTP/1.1" 200 -
2025-06-10 23:16:11,942 - werkzeug - INFO - 127.0.0.1 - - [10/Jun/2025 23:16:11] "OPTIONS /api/stories/story_1749622029_247284f2/choices/1 HTTP/1.1" 200 -
2025-06-10 23:16:11,947 - app.auth - INFO - Authentication successful for user: sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-10 23:16:12,184 - app.services.firebase_service - INFO - Retrieved story story_1749622029_247284f2: Ali's cultivation shonen
2025-06-10 23:16:12,185 - app.storage.storage - INFO - Retrieved story story_1749622029_247284f2: Ali's cultivation shonen
2025-06-10 23:16:12,737 - app.services.usage_service - INFO - Updated usage for user: sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-10 23:16:12,890 - app.services.firebase_service - INFO - Retrieved story story_1749622029_247284f2: Ali's cultivation shonen
2025-06-10 23:16:12,890 - app.storage.storage - INFO - Retrieved story story_1749622029_247284f2: Ali's cultivation shonen
2025-06-10 23:16:13,105 - app.services.firebase_service - INFO - Saved story story_1749622029_247284f2: Ali's cultivation shonen
2025-06-10 23:16:13,106 - app.storage.storage - INFO - Saved story story_1749622029_247284f2: Ali's cultivation shonen
2025-06-10 23:16:13,106 - app.storage.storage - INFO - Saved choice 1 for node initial in story story_1749622029_247284f2
2025-06-10 23:16:13,107 - werkzeug - INFO - 127.0.0.1 - - [10/Jun/2025 23:16:13] "[35m[1mPOST /api/stories/story_1749622029_247284f2/choices/1 HTTP/1.1[0m" 500 -
2025-06-10 23:22:18,772 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/services/ai_service.py', reloading
2025-06-10 23:22:20,860 - werkzeug - INFO -  * Restarting with stat
2025-06-10 23:22:21,455 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-10 23:22:21,513 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-10 23:22:21,513 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-10 23:22:21,517 - root - INFO - Starting StoryTeller API server...
2025-06-10 23:22:21,517 - root - INFO - Host: 0.0.0.0
2025-06-10 23:22:21,517 - root - INFO - Port: 5001
2025-06-10 23:22:21,517 - root - INFO - Debug mode: True
2025-06-10 23:22:21,520 - werkzeug - WARNING -  * Debugger is active!
2025-06-10 23:22:21,526 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-10 23:22:34,655 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/storage/storage.py', reloading
2025-06-10 23:22:34,747 - werkzeug - INFO -  * Restarting with stat
2025-06-10 23:22:35,279 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-10 23:22:35,335 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-10 23:22:35,335 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-10 23:22:35,339 - root - INFO - Starting StoryTeller API server...
2025-06-10 23:22:35,339 - root - INFO - Host: 0.0.0.0
2025-06-10 23:22:35,339 - root - INFO - Port: 5001
2025-06-10 23:22:35,339 - root - INFO - Debug mode: True
2025-06-10 23:22:35,342 - werkzeug - WARNING -  * Debugger is active!
2025-06-10 23:22:35,348 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-10 23:23:05,625 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/api.py', reloading
2025-06-10 23:23:05,703 - werkzeug - INFO -  * Restarting with stat
2025-06-10 23:23:06,233 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-10 23:23:06,292 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-10 23:23:06,292 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-10 23:23:06,296 - root - INFO - Starting StoryTeller API server...
2025-06-10 23:23:06,296 - root - INFO - Host: 0.0.0.0
2025-06-10 23:23:06,296 - root - INFO - Port: 5001
2025-06-10 23:23:06,296 - root - INFO - Debug mode: True
2025-06-10 23:23:06,299 - werkzeug - WARNING -  * Debugger is active!
2025-06-10 23:23:06,304 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 14:41:22,900 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/storage/storage.py', reloading
2025-06-11 14:41:22,996 - werkzeug - INFO -  * Restarting with stat
2025-06-11 14:41:24,538 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 14:41:24,611 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 14:41:24,611 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 14:41:24,616 - root - INFO - Starting StoryTeller API server...
2025-06-11 14:41:24,616 - root - INFO - Host: 0.0.0.0
2025-06-11 14:41:24,616 - root - INFO - Port: 5001
2025-06-11 14:41:24,616 - root - INFO - Debug mode: True
2025-06-11 14:41:24,619 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 14:41:24,627 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 14:41:41,772 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/api.py', reloading
2025-06-11 14:41:41,854 - werkzeug - INFO -  * Restarting with stat
2025-06-11 14:41:42,452 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 14:41:42,535 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 14:41:42,535 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 14:41:42,540 - root - INFO - Starting StoryTeller API server...
2025-06-11 14:41:42,540 - root - INFO - Host: 0.0.0.0
2025-06-11 14:41:42,540 - root - INFO - Port: 5001
2025-06-11 14:41:42,540 - root - INFO - Debug mode: True
2025-06-11 14:41:42,544 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 14:41:42,552 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 14:41:47,599 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/services/ai_service.py', reloading
2025-06-11 14:41:47,673 - werkzeug - INFO -  * Restarting with stat
2025-06-11 14:41:48,121 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 14:41:48,163 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 14:41:48,163 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 14:41:48,167 - root - INFO - Starting StoryTeller API server...
2025-06-11 14:41:48,168 - root - INFO - Host: 0.0.0.0
2025-06-11 14:41:48,168 - root - INFO - Port: 5001
2025-06-11 14:41:48,168 - root - INFO - Debug mode: True
2025-06-11 14:41:48,169 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 14:41:48,175 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 14:41:54,963 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 14:41:54] "OPTIONS /api/status HTTP/1.1" 200 -
2025-06-11 14:41:54,964 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 14:41:54] "OPTIONS /api/status HTTP/1.1" 200 -
2025-06-11 14:41:54,967 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 14:41:54] "GET /api/status HTTP/1.1" 200 -
2025-06-11 14:41:54,969 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 14:41:54] "GET /api/status HTTP/1.1" 200 -
2025-06-11 14:42:05,162 - app.services.firebase_service - INFO - Retrieved 3 stories
2025-06-11 14:42:05,165 - app.storage.storage - INFO - Retrieved 3 stories
2025-06-11 14:42:05,166 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 14:42:05] "OPTIONS /api/stories HTTP/1.1" 200 -
2025-06-11 14:42:05,171 - app.auth - INFO - Authentication successful for user: sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-11 14:42:05,339 - app.services.firebase_service - INFO - Retrieved 3 stories for user sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-11 14:42:05,340 - app.storage.storage - INFO - Retrieved 3 stories for user sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-11 14:42:05,706 - app.services.ai_service - INFO - Generated big story goal: Pursue the path to true immortality and enlightenment by mastering the Dao and ascending beyond mortal limits.
2025-06-11 14:42:05,707 - app.services.ai_service - INFO - Using cultivation genre for initial story
2025-06-11 14:42:05,707 - app.services.story_planner - INFO - Calculated number of arcs: 7 based on 50 chapters and 7 chapters per arc
2025-06-11 14:42:05,707 - app.services.story_planner - INFO - Found exact match for goal: 'Pursue the path to true immortality and enlightenment by mastering the Dao and ascending beyond mortal limits.'
2025-06-11 14:42:05,708 - app.services.story_planner - INFO - Generated 7 new arc goals for theme: 'immortality'
2025-06-11 14:42:05,708 - app.genres.cultivation_setting - INFO - Generated 7 arc goals. Initial arc goal: Confront a divine guardian to reach the final stage of transcendence.
2025-06-11 14:42:05,708 - app.genres.cultivation_setting - INFO - Generating cultivation progression story for ali
2025-06-11 14:42:05,708 - app.models.base_genre - INFO - Generating story for ali
2025-06-11 14:42:12,519 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-11 14:42:12,526 - app.models.base_genre - INFO - ðŸŽ­ GENRE GPT RESPONSE (2086 chars):
2025-06-11 14:42:12,527 - app.models.base_genre - INFO - ============================================================
2025-06-11 14:42:12,527 - app.models.base_genre - INFO - [STORY]
---
In a tranquil meadow, the sun casts a warm glow as birds chirp in the background. Ali, a young cultivator with piercing eyes, meditates under a blossoming peach tree. His aura shimmers with golden Qi, resonating with the essence of the world around him.

---
A sudden gust of wind disrupts the peaceful scene, revealing a hidden entrance beneath the peach tree. Intrigued, Ali approaches cautiously, his past life's memories guiding his steps.

---
Entering the hidden passage, Ali discovers an ancient chamber filled with intricate runes and mysterious artifacts. A voice echoes, "Only the worthy can face the guardian and transcend."

---
Before him materializes a divine guardian, a towering figure wreathed in lightning. The guardian challenges Ali with a thunderous roar, testing his resolve and determination.

---
Ali focuses his Qi, unleashing the "Flowing Thunder Palm" technique, channeling lightning through his palms. The vibrant azure Qi clashes with the guardian's power, creating a dazzling spectacle of elemental energy.

---
As the battle intensifies, Ali's past life insights guide him to exploit a weakness in the guardian's defenses. With a swift strike, he shatters the guardian's shield, revealing its vulnerable core.

---
In a moment of clarity, Ali realizes the guardian's true natureâ€”a test of inner strength and understanding. With a humble bow, Ali acknowledges the guardian's wisdom and accepts its challenge to achieve true transcendence.

---
As the chamber fades, Ali emerges from his meditation, his eyes ablaze with newfound determination. The path to immortality beckons, filled with challenges and revelations that await his unwavering pursuit.

[/STORY]

[CHOICES]
1. Channel the guardian's lightning energy to enhance your cultivation techniques, seeking harmony with elemental forces.
2. Meditate further to unlock the hidden wisdom of the chamber, delving deeper into the mysteries of the Dao.
3. Seek guidance from a fellow cultivator on how to navigate the trials ahead, forging alliances in your quest for transcendence.
[/CHOICES]
2025-06-11 14:42:12,528 - app.models.base_genre - INFO - ============================================================
2025-06-11 14:42:12,528 - app.models.base_genre - INFO - Successfully parsed genre response: story=1684 chars, choices=3
2025-06-11 14:42:12,529 - app.storage.storage - INFO - Using provided arc goals: 7 goals
2025-06-11 14:42:12,529 - app.storage.storage - INFO - Using provided arc goal: Confront a divine guardian to reach the final stage of transcendence.
2025-06-11 14:42:12,529 - app.storage.storage - INFO - Initialized memory with big goal: 'Pursue the path to true immortality and enlightenment by mastering the Dao and ascending beyond mortal limits.' and arc goal: 'Confront a divine guardian to reach the final stage of transcendence.'
2025-06-11 14:42:12,529 - app.storage.storage - INFO - Arc progression: 1/7, Chapter: 1/7
2025-06-11 14:42:12,529 - app.storage.storage - INFO - Overall story progress: Chapter 1/50 (2%)
2025-06-11 14:42:12,661 - app.services.firebase_service - INFO - Saved story story_1749678132_f09af1a9: ali's cultivation shonen
2025-06-11 14:42:12,662 - app.storage.storage - INFO - Saved story story_1749678132_f09af1a9: ali's cultivation shonen
2025-06-11 14:42:12,662 - app.storage.storage - INFO - Created new story: story_1749678132_f09af1a9: ali's cultivation shonen
2025-06-11 14:42:13,089 - app.services.usage_service - INFO - Updated usage for user: sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-11 14:42:13,754 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 14:42:13] "POST /api/stories HTTP/1.1" 200 -
2025-06-11 14:42:13,998 - app.services.firebase_service - INFO - Retrieved story story_1749678132_f09af1a9: ali's cultivation shonen
2025-06-11 14:42:13,998 - app.storage.storage - INFO - Retrieved story story_1749678132_f09af1a9: ali's cultivation shonen
2025-06-11 14:42:14,000 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 14:42:14] "OPTIONS /api/stories/story_1749678132_f09af1a9 HTTP/1.1" 200 -
2025-06-11 14:42:14,158 - app.services.firebase_service - INFO - Retrieved story story_1749678132_f09af1a9: ali's cultivation shonen
2025-06-11 14:42:14,159 - app.storage.storage - INFO - Retrieved story story_1749678132_f09af1a9: ali's cultivation shonen
2025-06-11 14:42:14,160 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 14:42:14] "OPTIONS /api/stories/story_1749678132_f09af1a9 HTTP/1.1" 200 -
2025-06-11 14:42:14,176 - app.services.firebase_service - INFO - Retrieved story story_1749678132_f09af1a9: ali's cultivation shonen
2025-06-11 14:42:14,177 - app.storage.storage - INFO - Retrieved story story_1749678132_f09af1a9: ali's cultivation shonen
2025-06-11 14:42:14,178 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 14:42:14] "GET /api/stories/story_1749678132_f09af1a9 HTTP/1.1" 200 -
2025-06-11 14:42:14,282 - app.services.firebase_service - INFO - Retrieved story story_1749678132_f09af1a9: ali's cultivation shonen
2025-06-11 14:42:14,282 - app.storage.storage - INFO - Retrieved story story_1749678132_f09af1a9: ali's cultivation shonen
2025-06-11 14:42:14,283 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 14:42:14] "GET /api/stories/story_1749678132_f09af1a9 HTTP/1.1" 200 -
2025-06-11 14:42:20,833 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 14:42:20] "OPTIONS /api/stories/story_1749678132_f09af1a9/choices/1 HTTP/1.1" 200 -
2025-06-11 14:42:20,838 - app.auth - INFO - Authentication successful for user: sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-11 14:42:20,936 - app.services.firebase_service - INFO - Retrieved story story_1749678132_f09af1a9: ali's cultivation shonen
2025-06-11 14:42:20,936 - app.storage.storage - INFO - Retrieved story story_1749678132_f09af1a9: ali's cultivation shonen
2025-06-11 14:42:21,603 - app.services.usage_service - INFO - Updated usage for user: sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-11 14:42:21,733 - app.services.firebase_service - INFO - Retrieved story story_1749678132_f09af1a9: ali's cultivation shonen
2025-06-11 14:42:21,734 - app.storage.storage - INFO - Retrieved story story_1749678132_f09af1a9: ali's cultivation shonen
2025-06-11 14:42:22,074 - app.services.firebase_service - INFO - Saved story story_1749678132_f09af1a9: ali's cultivation shonen
2025-06-11 14:42:22,075 - app.storage.storage - INFO - Saved story story_1749678132_f09af1a9: ali's cultivation shonen
2025-06-11 14:42:22,075 - app.storage.storage - INFO - Saved choice 1 for node initial in story story_1749678132_f09af1a9
2025-06-11 14:42:22,097 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 14:42:22] "[35m[1mPOST /api/stories/story_1749678132_f09af1a9/choices/1 HTTP/1.1[0m" 500 -
2025-06-11 14:47:03,217 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/api.py', reloading
2025-06-11 14:47:05,320 - werkzeug - INFO -  * Restarting with stat
2025-06-11 14:47:05,938 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 14:47:06,000 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 14:47:06,000 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 14:47:06,004 - root - INFO - Starting StoryTeller API server...
2025-06-11 14:47:06,004 - root - INFO - Host: 0.0.0.0
2025-06-11 14:47:06,004 - root - INFO - Port: 5001
2025-06-11 14:47:06,004 - root - INFO - Debug mode: True
2025-06-11 14:47:06,007 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 14:47:06,013 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 14:47:35,261 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/api.py', reloading
2025-06-11 14:47:35,334 - werkzeug - INFO -  * Restarting with stat
2025-06-11 14:47:35,884 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 14:47:35,948 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 14:47:35,948 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 14:47:35,953 - root - INFO - Starting StoryTeller API server...
2025-06-11 14:47:35,953 - root - INFO - Host: 0.0.0.0
2025-06-11 14:47:35,953 - root - INFO - Port: 5001
2025-06-11 14:47:35,953 - root - INFO - Debug mode: True
2025-06-11 14:47:35,955 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 14:47:35,961 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 14:47:39,985 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/api.py', reloading
2025-06-11 14:47:40,053 - werkzeug - INFO -  * Restarting with stat
2025-06-11 14:47:40,560 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 14:47:40,607 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 14:47:40,607 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 14:47:40,611 - root - INFO - Starting StoryTeller API server...
2025-06-11 14:47:40,611 - root - INFO - Host: 0.0.0.0
2025-06-11 14:47:40,611 - root - INFO - Port: 5001
2025-06-11 14:47:40,611 - root - INFO - Debug mode: True
2025-06-11 14:47:40,613 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 14:47:40,619 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 14:47:47,671 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/api.py', reloading
2025-06-11 14:47:47,748 - werkzeug - INFO -  * Restarting with stat
2025-06-11 14:47:48,218 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 14:47:48,267 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 14:47:48,267 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 14:47:48,271 - root - INFO - Starting StoryTeller API server...
2025-06-11 14:47:48,271 - root - INFO - Host: 0.0.0.0
2025-06-11 14:47:48,271 - root - INFO - Port: 5001
2025-06-11 14:47:48,271 - root - INFO - Debug mode: True
2025-06-11 14:47:48,273 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 14:47:48,281 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 14:47:50,296 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/api.py', reloading
2025-06-11 14:47:50,366 - werkzeug - INFO -  * Restarting with stat
2025-06-11 14:47:50,812 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 14:47:50,858 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 14:47:50,858 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 14:47:50,862 - root - INFO - Starting StoryTeller API server...
2025-06-11 14:47:50,862 - root - INFO - Host: 0.0.0.0
2025-06-11 14:47:50,862 - root - INFO - Port: 5001
2025-06-11 14:47:50,862 - root - INFO - Debug mode: True
2025-06-11 14:47:50,864 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 14:47:50,870 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 14:47:55,920 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/api.py', reloading
2025-06-11 14:47:55,995 - werkzeug - INFO -  * Restarting with stat
2025-06-11 14:47:56,460 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 14:47:56,507 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 14:47:56,508 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 14:47:56,512 - root - INFO - Starting StoryTeller API server...
2025-06-11 14:47:56,512 - root - INFO - Host: 0.0.0.0
2025-06-11 14:47:56,512 - root - INFO - Port: 5001
2025-06-11 14:47:56,512 - root - INFO - Debug mode: True
2025-06-11 14:47:56,514 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 14:47:56,521 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 14:48:02,566 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/api.py', reloading
2025-06-11 14:48:02,643 - werkzeug - INFO -  * Restarting with stat
2025-06-11 14:48:03,122 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 14:48:03,173 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 14:48:03,173 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 14:48:03,177 - root - INFO - Starting StoryTeller API server...
2025-06-11 14:48:03,177 - root - INFO - Host: 0.0.0.0
2025-06-11 14:48:03,177 - root - INFO - Port: 5001
2025-06-11 14:48:03,177 - root - INFO - Debug mode: True
2025-06-11 14:48:03,180 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 14:48:03,187 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 14:48:08,659 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 14:48:08,705 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 14:48:08,705 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 14:48:08,709 - root - INFO - Starting StoryTeller API server...
2025-06-11 14:48:08,710 - root - INFO - Host: 0.0.0.0
2025-06-11 14:48:08,710 - root - INFO - Port: 5001
2025-06-11 14:48:08,710 - root - INFO - Debug mode: True
2025-06-11 14:48:08,718 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5001
 * Running on http://10.0.0.243:5001
2025-06-11 14:48:08,718 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-11 14:48:08,718 - werkzeug - INFO -  * Restarting with stat
2025-06-11 14:48:09,228 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 14:48:09,273 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 14:48:09,273 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 14:48:09,278 - root - INFO - Starting StoryTeller API server...
2025-06-11 14:48:09,278 - root - INFO - Host: 0.0.0.0
2025-06-11 14:48:09,278 - root - INFO - Port: 5001
2025-06-11 14:48:09,278 - root - INFO - Debug mode: True
2025-06-11 14:48:09,280 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 14:48:09,287 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 14:48:13,561 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 14:48:13,611 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 14:48:13,611 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 14:48:13,616 - root - INFO - Starting StoryTeller API server...
2025-06-11 14:48:13,616 - root - INFO - Host: 0.0.0.0
2025-06-11 14:48:13,616 - root - INFO - Port: 5001
2025-06-11 14:48:13,616 - root - INFO - Debug mode: True
2025-06-11 14:48:13,621 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5001
 * Running on http://10.0.0.243:5001
2025-06-11 14:48:13,621 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-11 14:48:13,622 - werkzeug - INFO -  * Restarting with stat
2025-06-11 14:48:14,053 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 14:48:14,096 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 14:48:14,096 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 14:48:14,100 - root - INFO - Starting StoryTeller API server...
2025-06-11 14:48:14,100 - root - INFO - Host: 0.0.0.0
2025-06-11 14:48:14,100 - root - INFO - Port: 5001
2025-06-11 14:48:14,100 - root - INFO - Debug mode: True
2025-06-11 14:48:14,102 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 14:48:14,108 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 14:48:26,410 - app.services.firebase_service - INFO - Retrieved 4 stories
2025-06-11 14:48:26,411 - app.storage.storage - INFO - Retrieved 4 stories
2025-06-11 14:48:26,412 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 14:48:26] "OPTIONS /api/stories HTTP/1.1" 200 -
2025-06-11 14:48:26,418 - app.auth - INFO - Authentication successful for user: sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-11 14:48:26,574 - app.services.firebase_service - INFO - Retrieved 4 stories for user sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-11 14:48:26,575 - app.storage.storage - INFO - Retrieved 4 stories for user sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-11 14:48:26,803 - app.services.ai_service - INFO - Generated big story goal: Awaken the memories and powers of your past life to reclaim your former glory and settle unfinished karma.
2025-06-11 14:48:26,803 - app.services.ai_service - INFO - Using cultivation genre for initial story
2025-06-11 14:48:26,804 - app.services.story_planner - INFO - Calculated number of arcs: 7 based on 50 chapters and 7 chapters per arc
2025-06-11 14:48:26,804 - app.services.story_planner - INFO - Found exact match for goal: 'Awaken the memories and powers of your past life to reclaim your former glory and settle unfinished karma.'
2025-06-11 14:48:26,804 - app.services.story_planner - INFO - Generated 7 new arc goals for theme: 'past_life'
2025-06-11 14:48:26,804 - app.genres.cultivation_setting - INFO - Generated 7 arc goals. Initial arc goal: Fuse your current and past cultivation paths to ascend.
2025-06-11 14:48:26,804 - app.genres.cultivation_setting - INFO - Generating cultivation progression story for Ali
2025-06-11 14:48:26,804 - app.models.base_genre - INFO - Generating story for Ali
2025-06-11 14:48:33,998 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-11 14:48:34,006 - app.models.base_genre - INFO - ðŸŽ­ GENRE GPT RESPONSE (2525 chars):
2025-06-11 14:48:34,006 - app.models.base_genre - INFO - ============================================================
2025-06-11 14:48:34,006 - app.models.base_genre - INFO - [STORY]
---
Ali stood at the edge of a tranquil lake, the setting sun casting a golden hue over the water. With determination in his eyes, he focused his mind, preparing to embark on his cultivation journey to fuse his current and past paths.

As Ali closed his eyes, memories from his past life flooded his mindâ€”memories of ancient techniques and forgotten powers waiting to be unlocked. The whispers of his past self echoed in his thoughts, guiding him towards a new path of cultivation unlike any other.

Suddenly, a shimmering figure materialized before Ali, a manifestation of his past life's knowledge. "To ascend, you must first harmonize the elements within," the figure advised, as vibrant colors of qi began swirling around Ali, each representing a different aspect of his cultivation.

Ali concentrated his qi, manifesting the Fusion Star Techniqueâ€”a rare skill known to few. Threads of Qi intertwined around him, blending the essence of his past and present cultivation methods. The air crackled with energy as the fusion took place, marking the beginning of his journey towards ascension.

Just as Ali felt the energy stabilize, a thunderous roar shook the ground. A colossal stone golem emerged from the depths of the lake, its eyes gleaming with ancient power. This unexpected challenge tested Ali's newfound abilities, pushing him to the limits of his skills.

In a flurry of motion, Ali dodged the golem's crushing fists, his movements guided by a combination of instinct and past-life insights. With a swift strike, he channeled the Fusion Star Technique, sending a surge of energy towards the golem's core.

The golem staggered, revealing a crack in its stone exterior. Ali seized the opportunity, channeling his qi to exploit the weakness. As the golem crumbled into rubble, a radiant glow enveloped Ali, a tangible reward for overcoming this formidable trial.

Breathing heavily, Ali looked up at the fading sunlight, a sense of accomplishment swelling within him. The fusion of his cultivation paths had set him on a new course, one that would lead him closer to his ultimate goal.

---
[/STORY]

[CHOICES]
1. Channel the residual energy from the defeated golem to strengthen your Fusion Star Technique, seeking mastery over this newfound power.
2. Meditate by the lake to attune your qi to the natural surroundings, unlocking hidden potential within yourself.
3. Seek out the mysterious figure from your past life for further guidance on how to navigate the fusion of your cultivation paths.
[/CHOICES]
2025-06-11 14:48:34,007 - app.models.base_genre - INFO - ============================================================
2025-06-11 14:48:34,007 - app.models.base_genre - INFO - Successfully parsed genre response: story=2100 chars, choices=3
2025-06-11 14:48:34,007 - app.storage.storage - INFO - Using provided arc goals: 7 goals
2025-06-11 14:48:34,008 - app.storage.storage - INFO - Using provided arc goal: Fuse your current and past cultivation paths to ascend.
2025-06-11 14:48:34,008 - app.storage.storage - INFO - Initialized memory with big goal: 'Awaken the memories and powers of your past life to reclaim your former glory and settle unfinished karma.' and arc goal: 'Fuse your current and past cultivation paths to ascend.'
2025-06-11 14:48:34,008 - app.storage.storage - INFO - Arc progression: 1/7, Chapter: 1/7
2025-06-11 14:48:34,008 - app.storage.storage - INFO - Overall story progress: Chapter 1/50 (2%)
2025-06-11 14:48:34,197 - app.services.firebase_service - INFO - Saved story story_1749678514_8d198313: Ali's cultivation shonen
2025-06-11 14:48:34,198 - app.storage.storage - INFO - Saved story story_1749678514_8d198313: Ali's cultivation shonen
2025-06-11 14:48:34,198 - app.storage.storage - INFO - Created new story: story_1749678514_8d198313: Ali's cultivation shonen
2025-06-11 14:48:34,428 - app.services.usage_service - INFO - Updated usage for user: sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-11 14:48:34,845 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 14:48:34] "POST /api/stories HTTP/1.1" 200 -
2025-06-11 14:48:35,046 - app.services.firebase_service - INFO - Retrieved story story_1749678514_8d198313: Ali's cultivation shonen
2025-06-11 14:48:35,046 - app.storage.storage - INFO - Retrieved story story_1749678514_8d198313: Ali's cultivation shonen
2025-06-11 14:48:35,048 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 14:48:35] "OPTIONS /api/stories/story_1749678514_8d198313 HTTP/1.1" 200 -
2025-06-11 14:48:35,144 - app.services.firebase_service - INFO - Retrieved story story_1749678514_8d198313: Ali's cultivation shonen
2025-06-11 14:48:35,145 - app.storage.storage - INFO - Retrieved story story_1749678514_8d198313: Ali's cultivation shonen
2025-06-11 14:48:35,146 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 14:48:35] "OPTIONS /api/stories/story_1749678514_8d198313 HTTP/1.1" 200 -
2025-06-11 14:48:35,152 - app.services.firebase_service - INFO - Retrieved story story_1749678514_8d198313: Ali's cultivation shonen
2025-06-11 14:48:35,153 - app.storage.storage - INFO - Retrieved story story_1749678514_8d198313: Ali's cultivation shonen
2025-06-11 14:48:35,154 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 14:48:35] "GET /api/stories/story_1749678514_8d198313 HTTP/1.1" 200 -
2025-06-11 14:48:35,259 - app.services.firebase_service - INFO - Retrieved story story_1749678514_8d198313: Ali's cultivation shonen
2025-06-11 14:48:35,260 - app.storage.storage - INFO - Retrieved story story_1749678514_8d198313: Ali's cultivation shonen
2025-06-11 14:48:35,261 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 14:48:35] "GET /api/stories/story_1749678514_8d198313 HTTP/1.1" 200 -
2025-06-11 14:48:38,710 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 14:48:38] "OPTIONS /api/stories/story_1749678514_8d198313/choices/1 HTTP/1.1" 200 -
2025-06-11 14:48:38,713 - app.auth - INFO - Authentication successful for user: sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-11 14:48:38,809 - app.services.firebase_service - INFO - Retrieved story story_1749678514_8d198313: Ali's cultivation shonen
2025-06-11 14:48:38,810 - app.storage.storage - INFO - Retrieved story story_1749678514_8d198313: Ali's cultivation shonen
2025-06-11 14:48:39,118 - app.services.usage_service - INFO - Updated usage for user: sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-11 14:48:39,224 - app.services.firebase_service - INFO - Retrieved story story_1749678514_8d198313: Ali's cultivation shonen
2025-06-11 14:48:39,225 - app.storage.storage - INFO - Retrieved story story_1749678514_8d198313: Ali's cultivation shonen
2025-06-11 14:48:39,359 - app.services.firebase_service - INFO - Saved story story_1749678514_8d198313: Ali's cultivation shonen
2025-06-11 14:48:39,359 - app.storage.storage - INFO - Saved story story_1749678514_8d198313: Ali's cultivation shonen
2025-06-11 14:48:39,360 - app.storage.storage - INFO - Saved choice 1 for node initial in story story_1749678514_8d198313
2025-06-11 14:48:39,360 - app.api - INFO - Generating continuation for story story_1749678514_8d198313, choice 1
2025-06-11 14:48:39,360 - app.api - INFO - Character: Ali, Setting: cultivation
2025-06-11 14:48:39,361 - app.api - INFO - Selected choice: 'Channel the residual energy from the defeated golem to strengthen your Fusion Star Technique, seeking mastery over this newfound power.'
2025-06-11 14:48:39,361 - app.services.ai_service - INFO - Memory before processing - chapters_completed: 0, current_arc_index: 0, chapters_per_arc: 7
2025-06-11 14:48:39,361 - app.services.ai_service - INFO - Memory arcs: 7 arcs total
2025-06-11 14:48:39,361 - app.services.ai_service - INFO - Current arc: 'Fuse your current and past cultivation paths to ascend.'
2025-06-11 14:48:39,361 - app.services.ai_service - INFO - Chapter 1 of arc 'Fuse your current and past cultivation paths to ascend.' completed
2025-06-11 14:48:39,361 - app.services.ai_service - INFO - Using cultivation genre for story continuation
2025-06-11 14:48:39,361 - app.services.ai_service - INFO - Using big story goal for cultivation continuation: Awaken the memories and powers of your past life to reclaim your former glory and settle unfinished karma.
2025-06-11 14:48:39,362 - app.genres.cultivation_setting - INFO - Continuing cultivation progression story for Ali
2025-06-11 14:48:39,362 - app.models.base_genre - INFO - Generating story for Ali
2025-06-11 14:48:44,952 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-11 14:48:44,957 - app.models.base_genre - INFO - ðŸŽ­ GENRE GPT RESPONSE (2539 chars):
2025-06-11 14:48:44,958 - app.models.base_genre - INFO - ============================================================
2025-06-11 14:48:44,958 - app.models.base_genre - INFO - Ali focused his mind, drawing in the residual energy from the defeated golem. The vibrant qi swirled around him, merging with his own, infusing the Fusion Star Technique with newfound strength. Colors danced in the air, blending seamlessly as Ali sought to master this enhanced power.

As the energy settled within him, Ali felt a surge of power unlike anything he had experienced before. The Fusion Star Technique pulsed with a brilliant light, illuminating the surrounding area with its intensity. Ali could sense the intricate threads of qi weaving together, forming a harmonious balance between his past and present cultivation paths.

However, the sudden influx of energy was overwhelming. Waves of power threatened to engulf Ali, testing his control and resolve. Sweat beaded on his brow as he struggled to contain the newfound strength within him, his muscles trembling with the effort.

Just as Ali thought he might be consumed by the sheer force of the enhanced technique, a voice echoed in his mind, a whisper from his past self. "Balance, control, mastery," it urged, guiding Ali to focus his mind and bring order to the chaos within.

With a deep breath, Ali centered himself, embracing the raw power coursing through him. Slowly, he began to shape the energy, refining it into a controlled form. The Fusion Star Technique responded to his will, becoming a beacon of his mastery over the fusion of his cultivation paths.

As the last threads of qi settled into place, Ali opened his eyes to see the shimmering figure of his past self nodding in approval. The sense of accomplishment filled Ali's heart, knowing that he had taken a significant step towards his ultimate goal of awakening his past life's powers.

But, as the echoes of his success faded, a ripple of disturbance coursed through the air. Dark clouds gathered overhead, and a chilling wind swept through the tranquil landscape. A shadow loomed in the horizon, a formidable presence that threatened to challenge Ali's newfound mastery.

Ali's heart quickened with anticipation and a hint of uncertainty. The next trial awaited him, a test of his strength and determination on this path of fusion and ascension.

---

[CHOICES]
1. Embrace the approaching challenge head-on, ready to face whatever formidable opponent awaits you.
2. Seek guidance from the shimmering figure of your past self to prepare for the looming trial ahead.
3. Meditate and focus on further refining your mastery over the enhanced Fusion Star Technique before confronting the impending threat.
2025-06-11 14:48:44,958 - app.models.base_genre - INFO - ============================================================
2025-06-11 14:48:44,960 - app.models.base_genre - INFO - Successfully parsed genre response: story=2191 chars, choices=3
2025-06-11 14:48:45,072 - app.services.firebase_service - INFO - Retrieved story story_1749678514_8d198313: Ali's cultivation shonen
2025-06-11 14:48:45,072 - app.storage.storage - INFO - Retrieved story story_1749678514_8d198313: Ali's cultivation shonen
2025-06-11 14:48:45,073 - app.storage.storage - INFO - Updated story memory with node node_2161154777
2025-06-11 14:48:45,258 - app.services.firebase_service - INFO - Saved story story_1749678514_8d198313: Ali's cultivation shonen
2025-06-11 14:48:45,258 - app.storage.storage - INFO - Saved story story_1749678514_8d198313: Ali's cultivation shonen
2025-06-11 14:48:45,258 - app.storage.storage - INFO - Added node node_2161154777 to story story_1749678514_8d198313
2025-06-11 14:48:45,457 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 14:48:45] "POST /api/stories/story_1749678514_8d198313/choices/1 HTTP/1.1" 200 -
2025-06-11 14:48:47,984 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 14:48:47] "OPTIONS /api/stories/story_1749678514_8d198313/choices/1 HTTP/1.1" 200 -
2025-06-11 14:48:47,986 - app.auth - INFO - Authentication successful for user: sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-11 14:48:48,085 - app.services.firebase_service - INFO - Retrieved story story_1749678514_8d198313: Ali's cultivation shonen
2025-06-11 14:48:48,086 - app.storage.storage - INFO - Retrieved story story_1749678514_8d198313: Ali's cultivation shonen
2025-06-11 14:48:48,405 - app.services.usage_service - INFO - Updated usage for user: sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-11 14:48:48,515 - app.services.firebase_service - INFO - Retrieved story story_1749678514_8d198313: Ali's cultivation shonen
2025-06-11 14:48:48,516 - app.storage.storage - INFO - Retrieved story story_1749678514_8d198313: Ali's cultivation shonen
2025-06-11 14:48:48,653 - app.services.firebase_service - INFO - Saved story story_1749678514_8d198313: Ali's cultivation shonen
2025-06-11 14:48:48,653 - app.storage.storage - INFO - Saved story story_1749678514_8d198313: Ali's cultivation shonen
2025-06-11 14:48:48,654 - app.storage.storage - INFO - Saved choice 1 for node node_2161154777 in story story_1749678514_8d198313
2025-06-11 14:48:48,654 - app.api - INFO - Generating continuation for story story_1749678514_8d198313, choice 1
2025-06-11 14:48:48,655 - app.api - INFO - Character: Ali, Setting: cultivation
2025-06-11 14:48:48,655 - app.api - INFO - Selected choice: 'Embrace the approaching challenge head-on, ready to face whatever formidable opponent awaits you.'
2025-06-11 14:48:48,655 - app.services.ai_service - INFO - Memory before processing - chapters_completed: 0, current_arc_index: 0, chapters_per_arc: 7
2025-06-11 14:48:48,655 - app.services.ai_service - INFO - Memory arcs: 7 arcs total
2025-06-11 14:48:48,655 - app.services.ai_service - INFO - Current arc: 'Fuse your current and past cultivation paths to ascend.'
2025-06-11 14:48:48,655 - app.services.ai_service - INFO - Chapter 1 of arc 'Fuse your current and past cultivation paths to ascend.' completed
2025-06-11 14:48:48,655 - app.services.ai_service - INFO - Using cultivation genre for story continuation
2025-06-11 14:48:48,655 - app.services.ai_service - INFO - Using big story goal for cultivation continuation: Awaken the memories and powers of your past life to reclaim your former glory and settle unfinished karma.
2025-06-11 14:48:48,656 - app.genres.cultivation_setting - INFO - Continuing cultivation progression story for Ali
2025-06-11 14:48:48,656 - app.models.base_genre - INFO - Generating story for Ali
2025-06-11 14:48:53,143 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-11 14:48:53,149 - app.models.base_genre - INFO - ðŸŽ­ GENRE GPT RESPONSE (2892 chars):
2025-06-11 14:48:53,149 - app.models.base_genre - INFO - ============================================================
2025-06-11 14:48:53,149 - app.models.base_genre - INFO - **Chapter 2: The Shadow's Challenge**

As Ali prepared himself to face the approaching challenge, a figure emerged from the shadows. The silhouette coalesced into a towering warrior, clad in dark armor that seemed to absorb the very light around it. His eyes glowed with a fierce intensity, a challenge burning within them.

Panel 1:
The ominous figure stepped forward, each movement deliberate and powerful. The ground trembled beneath his feet, a sign of his formidable strength. Ali stood his ground, his expression determined as he readied himself for the confrontation.

Panel 2:
A surge of dark qi emanated from the warrior, twisting the air around him with its malevolent presence. Ali sensed the oppressive aura, a stark contrast to the vibrant energy he had just mastered. The clash of light and darkness was palpable, creating an intense atmosphere of anticipation.

Panel 3:
In a swift motion, the warrior raised his hand, unleashing a wave of shadow energy towards Ali. The dark tendrils lashed out, seeking to overwhelm him with their corrosive touch. Ali reacted quickly, channeling the Fusion Star Technique to create a barrier of light to shield himself from the impending attack.

Panel 4:
The collision of light and darkness sent shockwaves rippling through the landscape, the very earth trembling at their power. Ali gritted his teeth, pushing against the force of the shadow energy with all his might. Beads of sweat formed on his brow, his muscles straining under the pressure.

Panel 5:
As the clash reached its peak, Ali felt a surge of determination welling up within him. This was not just a test of strength but a battle of wills, a struggle to prove his mastery over both light and darkness. With a fierce cry, he poured his resolve into the Fusion Star Technique, pushing back against the encroaching shadows.

Panel 6:
The warrior's eyes widened in surprise, a hint of respect flickering in their depths. He slowly lowered his hand, the dark energy dissipating into the air. Ali stood tall, his chest heaving with exertion but his gaze unwavering. The shadow warrior nodded solemnly, acknowledging Ali's strength and determination.

Panel 7:
As the tension eased, a sense of accomplishment settled over Ali. He had faced the shadow's challenge head-on, emerging victorious through his mastery of the Fusion Star Technique. The warrior faded back into the shadows, leaving behind a trail of flickering darkness. Ali knew that more trials awaited him on his path of fusion and ascension, but he was ready to confront them with newfound confidence and resolve.

[CHOICES]
1. Seek out the next trial proactively, eager to continue testing your fusion abilities.
2. Reflect on the recent challenge and meditate on the lessons learned before moving forward.
3. Investigate the remnants of the shadow warrior's energy to uncover clues about your past life's adversaries.
2025-06-11 14:48:53,149 - app.models.base_genre - INFO - ============================================================
2025-06-11 14:48:53,150 - app.models.base_genre - INFO - Successfully parsed genre response: story=2588 chars, choices=3
2025-06-11 14:48:53,256 - app.services.firebase_service - INFO - Retrieved story story_1749678514_8d198313: Ali's cultivation shonen
2025-06-11 14:48:53,257 - app.storage.storage - INFO - Retrieved story story_1749678514_8d198313: Ali's cultivation shonen
2025-06-11 14:48:53,257 - app.storage.storage - INFO - Updated story memory with node node_4153238498
2025-06-11 14:48:53,451 - app.services.firebase_service - INFO - Saved story story_1749678514_8d198313: Ali's cultivation shonen
2025-06-11 14:48:53,452 - app.storage.storage - INFO - Saved story story_1749678514_8d198313: Ali's cultivation shonen
2025-06-11 14:48:53,452 - app.storage.storage - INFO - Added node node_4153238498 to story story_1749678514_8d198313
2025-06-11 14:48:53,652 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 14:48:53] "POST /api/stories/story_1749678514_8d198313/choices/1 HTTP/1.1" 200 -
2025-06-11 14:48:59,946 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 14:48:59] "OPTIONS /api/stories/story_1749678514_8d198313/choices/1 HTTP/1.1" 200 -
2025-06-11 14:48:59,949 - app.auth - INFO - Authentication successful for user: sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-11 14:49:00,049 - app.services.firebase_service - INFO - Retrieved story story_1749678514_8d198313: Ali's cultivation shonen
2025-06-11 14:49:00,049 - app.storage.storage - INFO - Retrieved story story_1749678514_8d198313: Ali's cultivation shonen
2025-06-11 14:49:00,360 - app.services.usage_service - INFO - Updated usage for user: sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-11 14:49:00,467 - app.services.firebase_service - INFO - Retrieved story story_1749678514_8d198313: Ali's cultivation shonen
2025-06-11 14:49:00,467 - app.storage.storage - INFO - Retrieved story story_1749678514_8d198313: Ali's cultivation shonen
2025-06-11 14:49:00,610 - app.services.firebase_service - INFO - Saved story story_1749678514_8d198313: Ali's cultivation shonen
2025-06-11 14:49:00,610 - app.storage.storage - INFO - Saved story story_1749678514_8d198313: Ali's cultivation shonen
2025-06-11 14:49:00,611 - app.storage.storage - INFO - Saved choice 1 for node node_4153238498 in story story_1749678514_8d198313
2025-06-11 14:49:00,611 - app.api - INFO - Generating continuation for story story_1749678514_8d198313, choice 1
2025-06-11 14:49:00,611 - app.api - INFO - Character: Ali, Setting: cultivation
2025-06-11 14:49:00,612 - app.api - INFO - Selected choice: 'Seek out the next trial proactively, eager to continue testing your fusion abilities.'
2025-06-11 14:49:00,612 - app.services.ai_service - INFO - Memory before processing - chapters_completed: 0, current_arc_index: 0, chapters_per_arc: 7
2025-06-11 14:49:00,612 - app.services.ai_service - INFO - Memory arcs: 7 arcs total
2025-06-11 14:49:00,612 - app.services.ai_service - INFO - Current arc: 'Fuse your current and past cultivation paths to ascend.'
2025-06-11 14:49:00,612 - app.services.ai_service - INFO - Chapter 1 of arc 'Fuse your current and past cultivation paths to ascend.' completed
2025-06-11 14:49:00,613 - app.services.ai_service - INFO - Using cultivation genre for story continuation
2025-06-11 14:49:00,613 - app.services.ai_service - INFO - Using big story goal for cultivation continuation: Awaken the memories and powers of your past life to reclaim your former glory and settle unfinished karma.
2025-06-11 14:49:00,613 - app.genres.cultivation_setting - INFO - Continuing cultivation progression story for Ali
2025-06-11 14:49:00,613 - app.models.base_genre - INFO - Generating story for Ali
2025-06-11 14:49:05,432 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-11 14:49:05,436 - app.models.base_genre - INFO - ðŸŽ­ GENRE GPT RESPONSE (2468 chars):
2025-06-11 14:49:05,437 - app.models.base_genre - INFO - ============================================================
2025-06-11 14:49:05,437 - app.models.base_genre - INFO - [STORY]
Panel 1:
Motivated by his recent victory, Ali set out in search of the next trial. The path ahead was shrouded in mist, an eerie silence hanging heavy in the air. Determination burned in Ali's eyes as he navigated the mysterious surroundings, his every step echoing through the fog.

Panel 2:
Suddenly, a series of glowing runes materialized on the ground before Ali. Each symbol pulsed with energy, beckoning him to step forward. Intrigued, Ali cautiously approached, his senses on high alert for any sign of danger or challenge.

Panel 3:
As Ali neared the runes, a surge of ancient power washed over him, resonating with his very soul. The symbols glowed brighter, reacting to his presence in a way that felt almost... familiar. A sense of recognition stirred within Ali, hinting at a connection to his past life.

Panel 4:
Intrigued by this revelation, Ali focused his qi, allowing it to flow freely and interact with the runes. As he did, a rush of memories flooded his mind, fragments of a forgotten past surfacing with startling clarity. Visions of battles fought, techniques mastered, and a profound sense of duty filled his consciousness.

Panel 5:
Emotions welled up within Ali, a mixture of nostalgia, determination, and a burning desire to reclaim his lost legacy. The fusion of his current and past selves felt within reach, a tantalizing prospect that spurred him to delve deeper into the mysteries of the runes and his past life.

Panel 6:
As Ali delved further into the connection between the symbols and his past, a surge of power coursed through him. The runes glowed intensely, enveloping him in a radiant aura that pulsed with both light and darkness. The fusion of energies was a sight to behold, a testament to Ali's growing mastery over his dual cultivation paths.

Panel 7:
With a newfound sense of purpose and understanding, Ali knew that the next trial awaited him within the depths of his own memories. The runes faded away, leaving him standing alone in the mist, ready to embark on a journey of self-discovery and fusion unlike any other.

[/STORY]

[CHOICES]
1. Meditate on the memories and insights gained from the runes to unlock hidden techniques from your past life.
2. Seek out a mentor or guide who can help you navigate the complexities of fusing your current and past cultivation paths.
3. Embrace the dual nature of your cultivation and embark on a journey to uncover the secrets of your past life on your own.
[/CHOICES]
2025-06-11 14:49:05,437 - app.models.base_genre - INFO - ============================================================
2025-06-11 14:49:05,438 - app.models.base_genre - INFO - Successfully parsed genre response: story=2067 chars, choices=3
2025-06-11 14:49:05,547 - app.services.firebase_service - INFO - Retrieved story story_1749678514_8d198313: Ali's cultivation shonen
2025-06-11 14:49:05,548 - app.storage.storage - INFO - Retrieved story story_1749678514_8d198313: Ali's cultivation shonen
2025-06-11 14:49:05,548 - app.storage.storage - INFO - Updated story memory with node node_2531742772
2025-06-11 14:49:05,691 - app.services.firebase_service - INFO - Saved story story_1749678514_8d198313: Ali's cultivation shonen
2025-06-11 14:49:05,692 - app.storage.storage - INFO - Saved story story_1749678514_8d198313: Ali's cultivation shonen
2025-06-11 14:49:05,693 - app.storage.storage - INFO - Added node node_2531742772 to story story_1749678514_8d198313
2025-06-11 14:49:05,887 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 14:49:05] "POST /api/stories/story_1749678514_8d198313/choices/1 HTTP/1.1" 200 -
2025-06-11 14:56:55,240 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_setting.py', reloading
2025-06-11 14:56:57,326 - werkzeug - INFO -  * Restarting with stat
2025-06-11 14:56:57,938 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 14:56:57,997 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 14:56:57,997 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 14:56:58,001 - root - INFO - Starting StoryTeller API server...
2025-06-11 14:56:58,001 - root - INFO - Host: 0.0.0.0
2025-06-11 14:56:58,001 - root - INFO - Port: 5001
2025-06-11 14:56:58,001 - root - INFO - Debug mode: True
2025-06-11 14:56:58,004 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 14:56:58,010 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 14:57:05,092 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/services/ai_service.py', reloading
2025-06-11 14:57:05,182 - werkzeug - INFO -  * Restarting with stat
2025-06-11 14:57:05,602 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 14:57:05,645 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 14:57:05,646 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 14:57:05,650 - root - INFO - Starting StoryTeller API server...
2025-06-11 14:57:05,650 - root - INFO - Host: 0.0.0.0
2025-06-11 14:57:05,650 - root - INFO - Port: 5001
2025-06-11 14:57:05,650 - root - INFO - Debug mode: True
2025-06-11 14:57:05,652 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 14:57:05,657 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 14:57:13,741 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/services/ai_service.py', reloading
2025-06-11 14:57:13,826 - werkzeug - INFO -  * Restarting with stat
2025-06-11 14:57:14,250 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 14:57:14,291 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 14:57:14,291 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 14:57:14,295 - root - INFO - Starting StoryTeller API server...
2025-06-11 14:57:14,295 - root - INFO - Host: 0.0.0.0
2025-06-11 14:57:14,295 - root - INFO - Port: 5001
2025-06-11 14:57:14,295 - root - INFO - Debug mode: True
2025-06-11 14:57:14,296 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 14:57:14,303 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 14:59:29,601 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_setting.py', reloading
2025-06-11 14:59:29,694 - werkzeug - INFO -  * Restarting with stat
2025-06-11 14:59:30,271 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 14:59:30,331 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 14:59:30,331 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 14:59:30,335 - root - INFO - Starting StoryTeller API server...
2025-06-11 14:59:30,335 - root - INFO - Host: 0.0.0.0
2025-06-11 14:59:30,335 - root - INFO - Port: 5001
2025-06-11 14:59:30,335 - root - INFO - Debug mode: True
2025-06-11 14:59:30,338 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 14:59:30,344 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 14:59:54,593 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/services/ai_service.py', reloading
2025-06-11 14:59:54,661 - werkzeug - INFO -  * Restarting with stat
2025-06-11 14:59:55,099 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 14:59:55,145 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 14:59:55,145 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 14:59:55,150 - root - INFO - Starting StoryTeller API server...
2025-06-11 14:59:55,150 - root - INFO - Host: 0.0.0.0
2025-06-11 14:59:55,150 - root - INFO - Port: 5001
2025-06-11 14:59:55,150 - root - INFO - Debug mode: True
2025-06-11 14:59:55,152 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 14:59:55,158 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 15:07:31,729 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_setting.py', reloading
2025-06-11 15:07:31,857 - werkzeug - INFO -  * Restarting with stat
2025-06-11 15:07:32,467 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 15:07:32,527 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 15:07:32,527 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 15:07:32,531 - root - INFO - Starting StoryTeller API server...
2025-06-11 15:07:32,531 - root - INFO - Host: 0.0.0.0
2025-06-11 15:07:32,531 - root - INFO - Port: 5001
2025-06-11 15:07:32,531 - root - INFO - Debug mode: True
2025-06-11 15:07:32,534 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 15:07:32,540 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 15:10:25,009 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_setting.py', reloading
2025-06-11 15:10:25,098 - werkzeug - INFO -  * Restarting with stat
2025-06-11 15:10:25,709 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 15:10:25,772 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 15:10:25,773 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 15:10:25,777 - root - INFO - Starting StoryTeller API server...
2025-06-11 15:10:25,777 - root - INFO - Host: 0.0.0.0
2025-06-11 15:10:25,777 - root - INFO - Port: 5001
2025-06-11 15:10:25,777 - root - INFO - Debug mode: True
2025-06-11 15:10:25,779 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 15:10:25,787 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 15:23:07,559 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_setting.py', reloading
2025-06-11 15:23:07,635 - werkzeug - INFO -  * Restarting with stat
2025-06-11 15:23:08,289 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 15:23:08,355 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 15:23:08,355 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 15:23:08,360 - root - INFO - Starting StoryTeller API server...
2025-06-11 15:23:08,360 - root - INFO - Host: 0.0.0.0
2025-06-11 15:23:08,360 - root - INFO - Port: 5001
2025-06-11 15:23:08,360 - root - INFO - Debug mode: True
2025-06-11 15:23:08,363 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 15:23:08,377 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 15:23:26,537 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/models/models.py', reloading
2025-06-11 15:23:26,628 - werkzeug - INFO -  * Restarting with stat
2025-06-11 15:23:27,186 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 15:23:27,263 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 15:23:27,263 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 15:23:27,270 - root - INFO - Starting StoryTeller API server...
2025-06-11 15:23:27,271 - root - INFO - Host: 0.0.0.0
2025-06-11 15:23:27,271 - root - INFO - Port: 5001
2025-06-11 15:23:27,271 - root - INFO - Debug mode: True
2025-06-11 15:23:27,275 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 15:23:27,288 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 15:23:41,426 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_setting.py', reloading
2025-06-11 15:23:41,598 - werkzeug - INFO -  * Restarting with stat
2025-06-11 15:23:42,174 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 15:23:42,231 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 15:23:42,231 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 15:23:42,235 - root - INFO - Starting StoryTeller API server...
2025-06-11 15:23:42,235 - root - INFO - Host: 0.0.0.0
2025-06-11 15:23:42,235 - root - INFO - Port: 5001
2025-06-11 15:23:42,235 - root - INFO - Debug mode: True
2025-06-11 15:23:42,238 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 15:23:42,245 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 15:24:07,498 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/services/ai_service.py', reloading
2025-06-11 15:24:07,581 - werkzeug - INFO -  * Restarting with stat
2025-06-11 15:24:08,170 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 15:24:08,234 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 15:24:08,234 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 15:24:08,238 - root - INFO - Starting StoryTeller API server...
2025-06-11 15:24:08,238 - root - INFO - Host: 0.0.0.0
2025-06-11 15:24:08,239 - root - INFO - Port: 5001
2025-06-11 15:24:08,239 - root - INFO - Debug mode: True
2025-06-11 15:24:08,242 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 15:24:08,249 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 15:24:20,385 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/services/ai_service.py', reloading
2025-06-11 15:24:20,446 - werkzeug - INFO -  * Restarting with stat
2025-06-11 15:24:20,905 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 15:24:20,973 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 15:24:20,975 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 15:24:20,980 - root - INFO - Starting StoryTeller API server...
2025-06-11 15:24:20,980 - root - INFO - Host: 0.0.0.0
2025-06-11 15:24:20,980 - root - INFO - Port: 5001
2025-06-11 15:24:20,980 - root - INFO - Debug mode: True
2025-06-11 15:24:20,982 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 15:24:20,988 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 15:32:51,653 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_setting.py', reloading
2025-06-11 15:32:51,727 - werkzeug - INFO -  * Restarting with stat
2025-06-11 15:32:52,281 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 15:32:52,342 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 15:32:52,342 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 15:32:52,347 - root - INFO - Starting StoryTeller API server...
2025-06-11 15:32:52,347 - root - INFO - Host: 0.0.0.0
2025-06-11 15:32:52,347 - root - INFO - Port: 5001
2025-06-11 15:32:52,347 - root - INFO - Debug mode: True
2025-06-11 15:32:52,349 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 15:32:52,356 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 15:32:55,386 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_setting.py', reloading
2025-06-11 15:32:55,477 - werkzeug - INFO -  * Restarting with stat
2025-06-11 15:32:55,922 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 15:32:55,964 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 15:32:55,964 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 15:32:55,969 - root - INFO - Starting StoryTeller API server...
2025-06-11 15:32:55,969 - root - INFO - Host: 0.0.0.0
2025-06-11 15:32:55,969 - root - INFO - Port: 5001
2025-06-11 15:32:55,969 - root - INFO - Debug mode: True
2025-06-11 15:32:55,971 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 15:32:55,977 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 15:34:58,195 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_setting.py', reloading
2025-06-11 15:34:58,277 - werkzeug - INFO -  * Restarting with stat
2025-06-11 15:34:58,862 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 15:34:58,924 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 15:34:58,924 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 15:34:58,928 - root - INFO - Starting StoryTeller API server...
2025-06-11 15:34:58,928 - root - INFO - Host: 0.0.0.0
2025-06-11 15:34:58,928 - root - INFO - Port: 5001
2025-06-11 15:34:58,928 - root - INFO - Debug mode: True
2025-06-11 15:34:58,931 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 15:34:58,937 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 15:36:33,877 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_setting.py', reloading
2025-06-11 15:36:33,940 - werkzeug - INFO -  * Restarting with stat
2025-06-11 15:36:34,485 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 15:36:34,544 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 15:36:34,544 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 15:36:34,549 - root - INFO - Starting StoryTeller API server...
2025-06-11 15:36:34,549 - root - INFO - Host: 0.0.0.0
2025-06-11 15:36:34,549 - root - INFO - Port: 5001
2025-06-11 15:36:34,549 - root - INFO - Debug mode: True
2025-06-11 15:36:34,552 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 15:36:34,558 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 15:37:15,955 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_setting.py', reloading
2025-06-11 15:37:16,050 - werkzeug - INFO -  * Restarting with stat
2025-06-11 15:37:16,635 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 15:37:16,698 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 15:37:16,698 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 15:37:16,703 - root - INFO - Starting StoryTeller API server...
2025-06-11 15:37:16,703 - root - INFO - Host: 0.0.0.0
2025-06-11 15:37:16,703 - root - INFO - Port: 5001
2025-06-11 15:37:16,703 - root - INFO - Debug mode: True
2025-06-11 15:37:16,705 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 15:37:16,712 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 15:37:30,833 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_setting.py', reloading
2025-06-11 15:37:30,904 - werkzeug - INFO -  * Restarting with stat
2025-06-11 15:37:31,354 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 15:37:31,398 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 15:37:31,398 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 15:37:31,403 - root - INFO - Starting StoryTeller API server...
2025-06-11 15:37:31,403 - root - INFO - Host: 0.0.0.0
2025-06-11 15:37:31,403 - root - INFO - Port: 5001
2025-06-11 15:37:31,403 - root - INFO - Debug mode: True
2025-06-11 15:37:31,405 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 15:37:31,411 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 15:37:51,601 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_setting.py', reloading
2025-06-11 15:37:51,681 - werkzeug - INFO -  * Restarting with stat
2025-06-11 15:37:52,234 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 15:37:52,294 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 15:37:52,294 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 15:37:52,298 - root - INFO - Starting StoryTeller API server...
2025-06-11 15:37:52,298 - root - INFO - Host: 0.0.0.0
2025-06-11 15:37:52,298 - root - INFO - Port: 5001
2025-06-11 15:37:52,298 - root - INFO - Debug mode: True
2025-06-11 15:37:52,300 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 15:37:52,306 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 15:38:03,396 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_setting.py', reloading
2025-06-11 15:38:03,488 - werkzeug - INFO -  * Restarting with stat
2025-06-11 15:48:10,797 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 15:48:10,856 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 15:48:10,856 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 15:48:10,861 - root - INFO - Starting StoryTeller API server...
2025-06-11 15:48:10,861 - root - INFO - Host: 0.0.0.0
2025-06-11 15:48:10,861 - root - INFO - Port: 5001
2025-06-11 15:48:10,861 - root - INFO - Debug mode: True
2025-06-11 15:48:10,867 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5001
 * Running on http://10.0.0.243:5001
2025-06-11 15:48:10,867 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-11 15:48:10,868 - werkzeug - INFO -  * Restarting with stat
2025-06-11 15:48:11,280 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 15:48:11,322 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 15:48:11,322 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 15:48:11,326 - root - INFO - Starting StoryTeller API server...
2025-06-11 15:48:11,326 - root - INFO - Host: 0.0.0.0
2025-06-11 15:48:11,326 - root - INFO - Port: 5001
2025-06-11 15:48:11,326 - root - INFO - Debug mode: True
2025-06-11 15:48:11,328 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 15:48:11,336 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 15:48:19,315 - app.services.firebase_service - INFO - Retrieved 5 stories
2025-06-11 15:48:19,316 - app.storage.storage - INFO - Retrieved 5 stories
2025-06-11 15:48:19,319 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 15:48:19] "OPTIONS /api/stories HTTP/1.1" 200 -
2025-06-11 15:48:19,319 - app.services.firebase_service - INFO - Retrieved 5 stories
2025-06-11 15:48:19,320 - app.storage.storage - INFO - Retrieved 5 stories
2025-06-11 15:48:19,321 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 15:48:19] "OPTIONS /api/stories HTTP/1.1" 200 -
2025-06-11 15:48:19,502 - app.services.firebase_service - INFO - Retrieved 5 stories for user sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-11 15:48:19,504 - app.storage.storage - INFO - Retrieved 5 stories for user sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-11 15:48:19,505 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 15:48:19] "GET /api/stories HTTP/1.1" 200 -
2025-06-11 15:48:19,742 - app.services.firebase_service - INFO - Retrieved 5 stories for user sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-11 15:48:19,742 - app.storage.storage - INFO - Retrieved 5 stories for user sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-11 15:48:19,743 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 15:48:19] "GET /api/stories HTTP/1.1" 200 -
2025-06-11 15:48:22,043 - app.services.firebase_service - INFO - Retrieved story story_1749678514_8d198313: Ali's cultivation shonen
2025-06-11 15:48:22,043 - app.storage.storage - INFO - Retrieved story story_1749678514_8d198313: Ali's cultivation shonen
2025-06-11 15:48:22,045 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 15:48:22] "OPTIONS /api/stories/story_1749678514_8d198313 HTTP/1.1" 200 -
2025-06-11 15:48:22,047 - app.auth - INFO - Authentication successful for user: sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-11 15:48:22,257 - app.services.firebase_service - INFO - Retrieved story story_1749678514_8d198313: Ali's cultivation shonen
2025-06-11 15:48:22,257 - app.storage.storage - INFO - Retrieved story story_1749678514_8d198313: Ali's cultivation shonen
2025-06-11 15:48:22,415 - app.services.firebase_service - INFO - Deleted story story_1749678514_8d198313
2025-06-11 15:48:22,416 - app.storage.storage - INFO - Deleted story story_1749678514_8d198313
2025-06-11 15:48:22,768 - app.services.usage_service - INFO - Updated usage for user: sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-11 15:48:22,769 - app.services.usage_service - INFO - Decremented stories created for user sTttyhSg8VdcI4Axw1Nj9WOBXv33: 4
2025-06-11 15:48:22,769 - root - INFO - [API] Decremented usage count for user sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-11 15:48:22,770 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 15:48:22] "DELETE /api/stories/story_1749678514_8d198313 HTTP/1.1" 200 -
2025-06-11 15:48:24,227 - app.services.firebase_service - INFO - Retrieved story story_1749678132_f09af1a9: ali's cultivation shonen
2025-06-11 15:48:24,228 - app.storage.storage - INFO - Retrieved story story_1749678132_f09af1a9: ali's cultivation shonen
2025-06-11 15:48:24,229 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 15:48:24] "OPTIONS /api/stories/story_1749678132_f09af1a9 HTTP/1.1" 200 -
2025-06-11 15:48:24,231 - app.auth - INFO - Authentication successful for user: sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-11 15:48:24,460 - app.services.firebase_service - INFO - Retrieved story story_1749678132_f09af1a9: ali's cultivation shonen
2025-06-11 15:48:24,461 - app.storage.storage - INFO - Retrieved story story_1749678132_f09af1a9: ali's cultivation shonen
2025-06-11 15:48:24,599 - app.services.firebase_service - INFO - Deleted story story_1749678132_f09af1a9
2025-06-11 15:48:24,600 - app.storage.storage - INFO - Deleted story story_1749678132_f09af1a9
2025-06-11 15:48:24,960 - app.services.usage_service - INFO - Updated usage for user: sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-11 15:48:24,961 - app.services.usage_service - INFO - Decremented stories created for user sTttyhSg8VdcI4Axw1Nj9WOBXv33: 3
2025-06-11 15:48:24,961 - root - INFO - [API] Decremented usage count for user sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-11 15:48:24,962 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 15:48:24] "DELETE /api/stories/story_1749678132_f09af1a9 HTTP/1.1" 200 -
2025-06-11 15:48:26,359 - app.services.firebase_service - INFO - Retrieved story story_1749622029_247284f2: Ali's cultivation shonen
2025-06-11 15:48:26,360 - app.storage.storage - INFO - Retrieved story story_1749622029_247284f2: Ali's cultivation shonen
2025-06-11 15:48:26,361 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 15:48:26] "OPTIONS /api/stories/story_1749622029_247284f2 HTTP/1.1" 200 -
2025-06-11 15:48:26,365 - app.auth - INFO - Authentication successful for user: sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-11 15:48:26,464 - app.services.firebase_service - INFO - Retrieved story story_1749622029_247284f2: Ali's cultivation shonen
2025-06-11 15:48:26,464 - app.storage.storage - INFO - Retrieved story story_1749622029_247284f2: Ali's cultivation shonen
2025-06-11 15:48:26,586 - app.services.firebase_service - INFO - Deleted story story_1749622029_247284f2
2025-06-11 15:48:26,587 - app.storage.storage - INFO - Deleted story story_1749622029_247284f2
2025-06-11 15:48:26,850 - app.services.usage_service - INFO - Updated usage for user: sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-11 15:48:26,851 - app.services.usage_service - INFO - Decremented stories created for user sTttyhSg8VdcI4Axw1Nj9WOBXv33: 2
2025-06-11 15:48:26,851 - root - INFO - [API] Decremented usage count for user sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-11 15:48:26,853 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 15:48:26] "DELETE /api/stories/story_1749622029_247284f2 HTTP/1.1" 200 -
2025-06-11 15:48:35,564 - app.services.firebase_service - INFO - Retrieved 2 stories
2025-06-11 15:48:35,565 - app.storage.storage - INFO - Retrieved 2 stories
2025-06-11 15:48:35,566 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 15:48:35] "OPTIONS /api/stories HTTP/1.1" 200 -
2025-06-11 15:48:35,571 - app.auth - INFO - Authentication successful for user: sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-11 15:48:35,733 - app.services.firebase_service - INFO - Retrieved 2 stories for user sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-11 15:48:35,734 - app.storage.storage - INFO - Retrieved 2 stories for user sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-11 15:48:35,926 - app.services.ai_service - INFO - Generated big story goal: Pursue the path to true immortality and enlightenment by mastering the Dao and ascending beyond mortal limits.
2025-06-11 15:48:35,926 - app.services.ai_service - INFO - Using cultivation genre for initial story
2025-06-11 15:48:35,927 - app.services.story_planner - INFO - Calculated number of arcs: 7 based on 50 chapters and 7 chapters per arc
2025-06-11 15:48:35,927 - app.services.story_planner - INFO - Found exact match for goal: 'Pursue the path to true immortality and enlightenment by mastering the Dao and ascending beyond mortal limits.'
2025-06-11 15:48:35,928 - app.services.story_planner - INFO - Generated 7 new arc goals for theme: 'immortality'
2025-06-11 15:48:35,928 - app.genres.cultivation_setting - INFO - Generated 7 arc goals. Initial arc goal: Build your foundation by mastering elemental or spiritual techniques.
2025-06-11 15:48:35,929 - app.genres.cultivation_setting - INFO - Generating cultivation progression story for Ali
2025-06-11 15:48:35,929 - app.models.base_genre - INFO - Generating story for Ali
2025-06-11 15:48:41,126 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-11 15:48:41,133 - app.models.base_genre - INFO - ðŸŽ­ GENRE GPT RESPONSE (2097 chars):
2025-06-11 15:48:41,134 - app.models.base_genre - INFO - ============================================================
2025-06-11 15:48:41,134 - app.models.base_genre - INFO - [STORY]
Panel 1:
--- 
A vibrant sunset illuminates a tranquil valley, where Ali, a young cultivator with determination in his eyes, practices his Qi manipulation. His Qi, a shimmering azure color, dances around him in intricate patterns as he focuses intensely.

Panel 2:
---
Suddenly, a fierce gust of wind disrupts Ali's concentration, scattering his Qi erratically. A mysterious figure emerges from the shadows, cloaked in swirling mist, challenging Ali's control.

Mysterious Figure: "Your elemental control falters, young one. Prove your mastery to pass."

Panel 3:
---
Ali's eyes narrow in determination as he recognizes this as a test of his elemental manipulation skills. With a deep breath, he channels his Qi, gathering it into a concentrated sphere of energy, the Azure Cyclone.

Panel 4:
---
The Mysterious Figure watches intently as Ali releases the Azure Cyclone, a powerful whirlwind of azure Qi that cuts through the wind, enveloping the figure in its intense energy. 

Mysterious Figure: "Impressive, but can you maintain this power?"

Panel 5:
---
As the Azure Cyclone rages on, Ali's focus starts to waver, sweat beading on his brow. The figure's misty form seems unaffected, challenging Ali's endurance and determination.

Panel 6:
---
With a resolute expression, Ali digs deep, drawing on his past life's knowledge of Qi circulation techniques. He stabilizes the Azure Cyclone, maintaining its power with newfound control and confidence.

Panel 7:
---
The Mysterious Figure nods in approval, dispersing the mist to reveal a wise old master beneath. 

Master: "You have shown prowess, young one. Your journey to master elemental techniques has just begun. Seek the Elemental Monastery to continue your training."

[CHOICES]
1. Embrace the challenge and set out immediately for the Elemental Monastery to further hone your elemental skills.
2. Inquire about the Master's past experiences and teachings to gain more insights before deciding on your next step.
3. Thank the Master for the guidance and request a demonstration of a different cultivation technique before departing.
2025-06-11 15:48:41,134 - app.models.base_genre - INFO - ============================================================
2025-06-11 15:48:41,136 - app.models.base_genre - INFO - Successfully parsed genre response: story=1733 chars, choices=3
2025-06-11 15:48:41,136 - app.storage.storage - INFO - Using provided arc goals: 7 goals
2025-06-11 15:48:41,137 - app.storage.storage - INFO - Using provided arc goal: Build your foundation by mastering elemental or spiritual techniques.
2025-06-11 15:48:41,137 - app.storage.storage - INFO - Initialized memory with big goal: 'Pursue the path to true immortality and enlightenment by mastering the Dao and ascending beyond mortal limits.' and arc goal: 'Build your foundation by mastering elemental or spiritual techniques.'
2025-06-11 15:48:41,137 - app.storage.storage - INFO - Arc progression: 1/7, Chapter: 1/7
2025-06-11 15:48:41,137 - app.storage.storage - INFO - Overall story progress: Chapter 1/50 (2%)
2025-06-11 15:48:42,154 - app.services.firebase_service - INFO - Saved story story_1749682121_28678b13: Ali's cultivation shonen
2025-06-11 15:48:42,154 - app.storage.storage - INFO - Saved story story_1749682121_28678b13: Ali's cultivation shonen
2025-06-11 15:48:42,155 - app.storage.storage - INFO - Created new story: story_1749682121_28678b13: Ali's cultivation shonen
2025-06-11 15:48:42,621 - app.services.usage_service - INFO - Updated usage for user: sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-11 15:48:43,104 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 15:48:43] "POST /api/stories HTTP/1.1" 200 -
2025-06-11 15:48:43,307 - app.services.firebase_service - INFO - Retrieved story story_1749682121_28678b13: Ali's cultivation shonen
2025-06-11 15:48:43,308 - app.storage.storage - INFO - Retrieved story story_1749682121_28678b13: Ali's cultivation shonen
2025-06-11 15:48:43,309 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 15:48:43] "OPTIONS /api/stories/story_1749682121_28678b13 HTTP/1.1" 200 -
2025-06-11 15:48:43,373 - app.services.firebase_service - INFO - Retrieved story story_1749682121_28678b13: Ali's cultivation shonen
2025-06-11 15:48:43,373 - app.storage.storage - INFO - Retrieved story story_1749682121_28678b13: Ali's cultivation shonen
2025-06-11 15:48:43,375 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 15:48:43] "OPTIONS /api/stories/story_1749682121_28678b13 HTTP/1.1" 200 -
2025-06-11 15:48:43,457 - app.services.firebase_service - INFO - Retrieved story story_1749682121_28678b13: Ali's cultivation shonen
2025-06-11 15:48:43,457 - app.storage.storage - INFO - Retrieved story story_1749682121_28678b13: Ali's cultivation shonen
2025-06-11 15:48:43,459 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 15:48:43] "GET /api/stories/story_1749682121_28678b13 HTTP/1.1" 200 -
2025-06-11 15:48:43,553 - app.services.firebase_service - INFO - Retrieved story story_1749682121_28678b13: Ali's cultivation shonen
2025-06-11 15:48:43,554 - app.storage.storage - INFO - Retrieved story story_1749682121_28678b13: Ali's cultivation shonen
2025-06-11 15:48:43,555 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 15:48:43] "GET /api/stories/story_1749682121_28678b13 HTTP/1.1" 200 -
2025-06-11 15:50:13,988 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 15:50:13] "OPTIONS /api/stories/story_1749682121_28678b13/choices/1 HTTP/1.1" 200 -
2025-06-11 15:50:13,992 - app.auth - INFO - Authentication successful for user: sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-11 15:50:14,177 - app.services.firebase_service - INFO - Retrieved story story_1749682121_28678b13: Ali's cultivation shonen
2025-06-11 15:50:14,178 - app.storage.storage - INFO - Retrieved story story_1749682121_28678b13: Ali's cultivation shonen
2025-06-11 15:50:14,770 - app.services.usage_service - INFO - Updated usage for user: sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-11 15:50:14,882 - app.services.firebase_service - INFO - Retrieved story story_1749682121_28678b13: Ali's cultivation shonen
2025-06-11 15:50:14,883 - app.storage.storage - INFO - Retrieved story story_1749682121_28678b13: Ali's cultivation shonen
2025-06-11 15:50:15,132 - app.services.firebase_service - INFO - Saved story story_1749682121_28678b13: Ali's cultivation shonen
2025-06-11 15:50:15,132 - app.storage.storage - INFO - Saved story story_1749682121_28678b13: Ali's cultivation shonen
2025-06-11 15:50:15,132 - app.storage.storage - INFO - Saved choice 1 for node initial in story story_1749682121_28678b13
2025-06-11 15:50:15,133 - app.api - INFO - Generating continuation for story story_1749682121_28678b13, choice 1
2025-06-11 15:50:15,133 - app.api - INFO - Character: Ali, Setting: cultivation
2025-06-11 15:50:15,133 - app.api - INFO - Selected choice: 'Embrace the challenge and set out immediately for the Elemental Monastery to further hone your elemental skills.'
2025-06-11 15:50:15,133 - app.services.ai_service - INFO - Memory before processing - chapters_completed: 0, current_arc_index: 0, chapters_per_arc: 7
2025-06-11 15:50:15,133 - app.services.ai_service - INFO - Memory arcs: 7 arcs total
2025-06-11 15:50:15,133 - app.services.ai_service - INFO - Current arc: 'Build your foundation by mastering elemental or spiritual techniques.'
2025-06-11 15:50:15,133 - app.services.ai_service - INFO - Chapter 1 of arc 'Build your foundation by mastering elemental or spiritual techniques.' completed
2025-06-11 15:50:15,133 - app.services.ai_service - INFO - Using cultivation genre for story continuation
2025-06-11 15:50:15,133 - app.services.ai_service - INFO - Using big story goal for cultivation continuation: Pursue the path to true immortality and enlightenment by mastering the Dao and ascending beyond mortal limits.
2025-06-11 15:50:15,133 - app.genres.cultivation_setting - INFO - Continuing cultivation progression story for Ali with style: shonen
2025-06-11 15:50:15,134 - app.models.base_genre - INFO - Generating story for Ali
2025-06-11 15:50:19,709 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-11 15:50:19,716 - app.models.base_genre - INFO - ðŸŽ­ GENRE GPT RESPONSE (2015 chars):
2025-06-11 15:50:19,716 - app.models.base_genre - INFO - ============================================================
2025-06-11 15:50:19,717 - app.models.base_genre - INFO - [STORY]
Panel 1:
---
Determined and resolute, Ali sets out at dawn, his azure Qi pulsing with newfound vigor as he follows the ancient path to the Elemental Monastery. The air crackles with energy, reflecting his inner fire.
Panel 2:
---
As Ali journeys through the dense forest, a sudden rustling in the bushes alerts him to an unseen presence. His instincts sharpen, and he readies himself for a potential confrontation, his Qi swirling around him protectively.
Panel 3:
---
Emerging from the shadows, a group of bandits, their eyes gleaming with malice, block Ali's path. One of them steps forward, a sneer on his face.
Bandit Leader: "Hand over your valuables, kid. Or prepare to face the consequences."
Panel 4:
---
Ali's eyes narrow, his resolve unwavering as he assesses the situation. With a calm demeanor, he speaks, his voice steady and firm.
Ali: "I seek only the path of enlightenment. Stand aside, and no harm will come to you."
Panel 5:
---
The bandit leader laughs scornfully, unsheathing his sword, the blade glinting menacingly in the sunlight. The bandits close in, ready to attack, underestimating Ali's strength and determination.
Panel 6:
---
With a swift movement, Ali channels his Qi, unleashing the Azure Cyclone once more, the powerful whirlwind engulfing the bandits in a dazzling display of azure energy. They are thrown back, stunned by the force of Ali's elemental mastery.
Panel 7:
---
As the dust settles, the bandits lie defeated, staring wide-eyed at Ali in awe. Their leader, humbled, steps forward, a newfound respect in his gaze.
Bandit Leader: "I... I have never seen such power. Please, forgive our ignorance. Go forth, seeker of enlightenment. The Elemental Monastery awaits you."
[END OF CHAPTER]

[CHOICES]
1. Proceed to the Elemental Monastery, leaving the bandits behind in peace.
2. Offer to share basic Qi cultivation techniques with the bandits as a gesture of goodwill.
3. Stay and help the bandits reform their ways through Qi training before continuing your journey.
2025-06-11 15:50:19,717 - app.models.base_genre - INFO - ============================================================
2025-06-11 15:50:19,717 - app.models.base_genre - INFO - Successfully parsed genre response: story=1746 chars, choices=3
2025-06-11 15:50:19,829 - app.services.firebase_service - INFO - Retrieved story story_1749682121_28678b13: Ali's cultivation shonen
2025-06-11 15:50:19,830 - app.storage.storage - INFO - Retrieved story story_1749682121_28678b13: Ali's cultivation shonen
2025-06-11 15:50:19,831 - app.storage.storage - INFO - Updated story memory with node node_2757877420
2025-06-11 15:50:20,142 - app.services.firebase_service - INFO - Saved story story_1749682121_28678b13: Ali's cultivation shonen
2025-06-11 15:50:20,142 - app.storage.storage - INFO - Saved story story_1749682121_28678b13: Ali's cultivation shonen
2025-06-11 15:50:20,143 - app.storage.storage - INFO - Added node node_2757877420 to story story_1749682121_28678b13
2025-06-11 15:50:20,464 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 15:50:20] "POST /api/stories/story_1749682121_28678b13/choices/1 HTTP/1.1" 200 -
2025-06-11 15:50:30,714 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 15:50:30] "OPTIONS /api/status HTTP/1.1" 200 -
2025-06-11 15:50:30,717 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 15:50:30] "GET /api/status HTTP/1.1" 200 -
2025-06-11 15:50:30,720 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 15:50:30] "GET /api/status HTTP/1.1" 200 -
2025-06-11 15:54:13,797 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_setting.py', reloading
2025-06-11 15:54:15,888 - werkzeug - INFO -  * Restarting with stat
2025-06-11 15:54:16,490 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 15:54:16,549 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 15:54:16,549 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 15:54:16,553 - root - INFO - Starting StoryTeller API server...
2025-06-11 15:54:16,553 - root - INFO - Host: 0.0.0.0
2025-06-11 15:54:16,553 - root - INFO - Port: 5001
2025-06-11 15:54:16,553 - root - INFO - Debug mode: True
2025-06-11 15:54:16,556 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 15:54:16,562 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 15:54:26,660 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_setting.py', reloading
2025-06-11 15:54:26,728 - werkzeug - INFO -  * Restarting with stat
2025-06-11 15:54:27,152 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 15:54:27,194 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 15:54:27,194 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 15:54:27,198 - root - INFO - Starting StoryTeller API server...
2025-06-11 15:54:27,198 - root - INFO - Host: 0.0.0.0
2025-06-11 15:54:27,198 - root - INFO - Port: 5001
2025-06-11 15:54:27,198 - root - INFO - Debug mode: True
2025-06-11 15:54:27,200 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 15:54:27,205 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 15:54:47,392 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_setting.py', reloading
2025-06-11 15:54:47,459 - werkzeug - INFO -  * Restarting with stat
2025-06-11 15:54:48,115 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 15:54:48,174 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 15:54:48,174 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 15:54:48,178 - root - INFO - Starting StoryTeller API server...
2025-06-11 15:54:48,178 - root - INFO - Host: 0.0.0.0
2025-06-11 15:54:48,178 - root - INFO - Port: 5001
2025-06-11 15:54:48,178 - root - INFO - Debug mode: True
2025-06-11 15:54:48,180 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 15:54:48,188 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 15:54:58,275 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_setting.py', reloading
2025-06-11 15:54:58,367 - werkzeug - INFO -  * Restarting with stat
2025-06-11 15:54:58,872 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 15:54:58,918 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 15:54:58,918 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 15:54:58,922 - root - INFO - Starting StoryTeller API server...
2025-06-11 15:54:58,922 - root - INFO - Host: 0.0.0.0
2025-06-11 15:54:58,922 - root - INFO - Port: 5001
2025-06-11 15:54:58,922 - root - INFO - Debug mode: True
2025-06-11 15:54:58,924 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 15:54:58,930 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 15:55:30,213 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_setting.py', reloading
2025-06-11 15:55:30,296 - werkzeug - INFO -  * Restarting with stat
2025-06-11 15:55:30,861 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 15:55:30,903 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 15:55:30,903 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 15:55:30,907 - root - INFO - Starting StoryTeller API server...
2025-06-11 15:55:30,908 - root - INFO - Host: 0.0.0.0
2025-06-11 15:55:30,908 - root - INFO - Port: 5001
2025-06-11 15:55:30,908 - root - INFO - Debug mode: True
2025-06-11 15:55:30,910 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 15:55:30,916 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 15:55:41,004 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_setting.py', reloading
2025-06-11 15:55:41,081 - werkzeug - INFO -  * Restarting with stat
2025-06-11 15:55:41,529 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 15:55:41,574 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 15:55:41,574 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 15:55:41,579 - root - INFO - Starting StoryTeller API server...
2025-06-11 15:55:41,579 - root - INFO - Host: 0.0.0.0
2025-06-11 15:55:41,579 - root - INFO - Port: 5001
2025-06-11 15:55:41,579 - root - INFO - Debug mode: True
2025-06-11 15:55:41,581 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 15:55:41,587 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 15:55:46,628 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_setting.py', reloading
2025-06-11 15:55:46,709 - werkzeug - INFO -  * Restarting with stat
2025-06-11 15:55:47,169 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 15:55:47,217 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 15:55:47,217 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 15:55:47,222 - root - INFO - Starting StoryTeller API server...
2025-06-11 15:55:47,222 - root - INFO - Host: 0.0.0.0
2025-06-11 15:55:47,222 - root - INFO - Port: 5001
2025-06-11 15:55:47,222 - root - INFO - Debug mode: True
2025-06-11 15:55:47,224 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 15:55:47,230 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 15:55:58,310 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_setting.py', reloading
2025-06-11 15:55:58,397 - werkzeug - INFO -  * Restarting with stat
2025-06-11 15:55:58,912 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 15:55:58,962 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 15:55:58,962 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 15:55:58,966 - root - INFO - Starting StoryTeller API server...
2025-06-11 15:55:58,966 - root - INFO - Host: 0.0.0.0
2025-06-11 15:55:58,966 - root - INFO - Port: 5001
2025-06-11 15:55:58,966 - root - INFO - Debug mode: True
2025-06-11 15:55:58,969 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 15:55:58,976 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 15:56:13,086 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_setting.py', reloading
2025-06-11 15:56:13,185 - werkzeug - INFO -  * Restarting with stat
2025-06-11 15:56:13,707 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 15:56:13,757 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 15:56:13,757 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 15:56:13,762 - root - INFO - Starting StoryTeller API server...
2025-06-11 15:56:13,762 - root - INFO - Host: 0.0.0.0
2025-06-11 15:56:13,762 - root - INFO - Port: 5001
2025-06-11 15:56:13,762 - root - INFO - Debug mode: True
2025-06-11 15:56:13,764 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 15:56:13,770 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 15:56:20,825 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_setting.py', reloading
2025-06-11 15:56:20,901 - werkzeug - INFO -  * Restarting with stat
2025-06-11 15:56:21,367 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 15:56:21,415 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 15:56:21,415 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 15:56:21,419 - root - INFO - Starting StoryTeller API server...
2025-06-11 15:56:21,419 - root - INFO - Host: 0.0.0.0
2025-06-11 15:56:21,419 - root - INFO - Port: 5001
2025-06-11 15:56:21,419 - root - INFO - Debug mode: True
2025-06-11 15:56:21,422 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 15:56:21,428 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 15:56:48,676 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_setting.py', reloading
2025-06-11 15:56:48,828 - werkzeug - INFO -  * Restarting with stat
2025-06-11 15:56:49,435 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 15:56:49,496 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 15:56:49,496 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 15:56:49,500 - root - INFO - Starting StoryTeller API server...
2025-06-11 15:56:49,500 - root - INFO - Host: 0.0.0.0
2025-06-11 15:56:49,500 - root - INFO - Port: 5001
2025-06-11 15:56:49,501 - root - INFO - Debug mode: True
2025-06-11 15:56:49,503 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 15:56:49,510 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 15:56:50,517 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_setting.py', reloading
2025-06-11 15:56:50,593 - werkzeug - INFO -  * Restarting with stat
2025-06-11 15:56:51,036 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 15:56:51,081 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 15:56:51,081 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 15:56:51,085 - root - INFO - Starting StoryTeller API server...
2025-06-11 15:56:51,085 - root - INFO - Host: 0.0.0.0
2025-06-11 15:56:51,086 - root - INFO - Port: 5001
2025-06-11 15:56:51,086 - root - INFO - Debug mode: True
2025-06-11 15:56:51,088 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 15:56:51,093 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 16:02:45,337 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_setting.py', reloading
2025-06-11 16:02:45,427 - werkzeug - INFO -  * Restarting with stat
2025-06-11 16:02:45,964 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 16:02:46,023 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 16:02:46,023 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 16:02:46,027 - root - INFO - Starting StoryTeller API server...
2025-06-11 16:02:46,027 - root - INFO - Host: 0.0.0.0
2025-06-11 16:02:46,028 - root - INFO - Port: 5001
2025-06-11 16:02:46,028 - root - INFO - Debug mode: True
2025-06-11 16:02:46,030 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 16:02:46,037 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 16:02:55,124 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_setting.py', reloading
2025-06-11 16:02:55,200 - werkzeug - INFO -  * Restarting with stat
2025-06-11 16:02:55,645 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 16:02:55,687 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 16:02:55,687 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 16:02:55,693 - root - INFO - Starting StoryTeller API server...
2025-06-11 16:02:55,693 - root - INFO - Host: 0.0.0.0
2025-06-11 16:02:55,693 - root - INFO - Port: 5001
2025-06-11 16:02:55,693 - root - INFO - Debug mode: True
2025-06-11 16:02:55,695 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 16:02:55,701 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 16:03:06,815 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_setting.py', reloading
2025-06-11 16:03:06,882 - werkzeug - INFO -  * Restarting with stat
2025-06-11 16:03:07,318 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 16:03:07,364 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 16:03:07,365 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 16:03:07,369 - root - INFO - Starting StoryTeller API server...
2025-06-11 16:03:07,370 - root - INFO - Host: 0.0.0.0
2025-06-11 16:03:07,370 - root - INFO - Port: 5001
2025-06-11 16:03:07,370 - root - INFO - Debug mode: True
2025-06-11 16:03:07,372 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 16:03:07,381 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 16:03:16,468 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_setting.py', reloading
2025-06-11 16:03:16,553 - werkzeug - INFO -  * Restarting with stat
2025-06-11 16:03:17,053 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 16:03:17,103 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 16:03:17,103 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 16:03:17,107 - root - INFO - Starting StoryTeller API server...
2025-06-11 16:03:17,107 - root - INFO - Host: 0.0.0.0
2025-06-11 16:03:17,107 - root - INFO - Port: 5001
2025-06-11 16:03:17,107 - root - INFO - Debug mode: True
2025-06-11 16:03:17,109 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 16:03:17,115 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 16:03:28,208 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_setting.py', reloading
2025-06-11 16:03:28,300 - werkzeug - INFO -  * Restarting with stat
2025-06-11 16:03:28,746 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 16:03:28,787 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 16:03:28,787 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 16:03:28,791 - root - INFO - Starting StoryTeller API server...
2025-06-11 16:03:28,791 - root - INFO - Host: 0.0.0.0
2025-06-11 16:03:28,791 - root - INFO - Port: 5001
2025-06-11 16:03:28,792 - root - INFO - Debug mode: True
2025-06-11 16:03:28,793 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 16:03:28,799 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 16:03:39,892 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_setting.py', reloading
2025-06-11 16:03:39,967 - werkzeug - INFO -  * Restarting with stat
2025-06-11 16:03:40,523 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 16:03:40,579 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 16:03:40,579 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 16:03:40,583 - root - INFO - Starting StoryTeller API server...
2025-06-11 16:03:40,583 - root - INFO - Host: 0.0.0.0
2025-06-11 16:03:40,583 - root - INFO - Port: 5001
2025-06-11 16:03:40,583 - root - INFO - Debug mode: True
2025-06-11 16:03:40,586 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 16:03:40,591 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 16:03:48,703 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_setting.py', reloading
2025-06-11 16:03:48,773 - werkzeug - INFO -  * Restarting with stat
2025-06-11 16:03:49,250 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 16:03:49,374 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 16:03:49,374 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 16:03:49,379 - root - INFO - Starting StoryTeller API server...
2025-06-11 16:03:49,379 - root - INFO - Host: 0.0.0.0
2025-06-11 16:03:49,379 - root - INFO - Port: 5001
2025-06-11 16:03:49,379 - root - INFO - Debug mode: True
2025-06-11 16:03:49,385 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 16:03:49,392 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 16:03:56,458 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_setting.py', reloading
2025-06-11 16:03:56,519 - werkzeug - INFO -  * Restarting with stat
2025-06-11 16:03:57,003 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 16:03:57,050 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 16:03:57,050 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 16:03:57,054 - root - INFO - Starting StoryTeller API server...
2025-06-11 16:03:57,054 - root - INFO - Host: 0.0.0.0
2025-06-11 16:03:57,054 - root - INFO - Port: 5001
2025-06-11 16:03:57,054 - root - INFO - Debug mode: True
2025-06-11 16:03:57,056 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 16:03:57,063 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 16:13:52,909 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 16:13:52,971 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 16:13:52,971 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 16:13:52,975 - root - INFO - Starting StoryTeller API server...
2025-06-11 16:13:52,975 - root - INFO - Host: 0.0.0.0
2025-06-11 16:13:52,975 - root - INFO - Port: 5001
2025-06-11 16:13:52,975 - root - INFO - Debug mode: True
2025-06-11 16:13:52,983 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5001
 * Running on http://10.0.0.243:5001
2025-06-11 16:13:52,983 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-11 16:13:52,984 - werkzeug - INFO -  * Restarting with stat
2025-06-11 16:13:53,398 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 16:13:53,439 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 16:13:53,440 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 16:13:53,444 - root - INFO - Starting StoryTeller API server...
2025-06-11 16:13:53,444 - root - INFO - Host: 0.0.0.0
2025-06-11 16:13:53,444 - root - INFO - Port: 5001
2025-06-11 16:13:53,444 - root - INFO - Debug mode: True
2025-06-11 16:13:53,446 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 16:13:53,454 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 16:14:07,739 - app.services.firebase_service - INFO - Retrieved 3 stories
2025-06-11 16:14:07,741 - app.storage.storage - INFO - Retrieved 3 stories
2025-06-11 16:14:07,743 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 16:14:07] "OPTIONS /api/stories HTTP/1.1" 200 -
2025-06-11 16:14:07,748 - app.auth - INFO - Authentication successful for user: sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-11 16:14:07,923 - app.services.firebase_service - INFO - Retrieved 3 stories for user sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-11 16:14:07,924 - app.storage.storage - INFO - Retrieved 3 stories for user sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-11 16:14:08,190 - app.services.ai_service - INFO - Generated big story goal: Climb from the weakest rank to the peak of cultivation in order to defeat the powerful enemies who destroyed your family and bring justice to those who wronged you.
2025-06-11 16:14:08,190 - app.services.ai_service - INFO - Using cultivation genre for initial story
2025-06-11 16:14:08,191 - app.services.story_planner - INFO - Calculated number of arcs: 7 based on 50 chapters and 7 chapters per arc
2025-06-11 16:14:08,191 - app.services.story_planner - INFO - Found exact match for goal: 'Climb from the weakest rank to the peak of cultivation in order to defeat the powerful enemies who destroyed your family and bring justice to those who wronged you.'
2025-06-11 16:14:08,191 - app.services.story_planner - INFO - Generated 7 new arc goals for theme: 'revenge'
2025-06-11 16:14:08,191 - app.genres.cultivation_setting - INFO - Generated 7 arc goals. Initial arc goal: Join a prestigious academy or sect and prove yourself through deadly tournaments.
2025-06-11 16:14:08,191 - app.genres.cultivation_setting - INFO - Generating cultivation progression story for Ali
2025-06-11 16:14:08,191 - app.models.base_genre - INFO - Generating story for Ali
2025-06-11 16:14:11,518 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-11 16:14:11,524 - app.models.base_genre - INFO - ðŸŽ­ GENRE GPT RESPONSE (2548 chars):
2025-06-11 16:14:11,524 - app.models.base_genre - INFO - ============================================================
2025-06-11 16:14:11,524 - app.models.base_genre - INFO - [STORY]
  
A serene bamboo forest bathed in the glow of a setting sun. Ali, a young cultivator with piercing eyes and a determined expression, practices his Qi manipulation. His past life memories guide his hands with precision, forming intricate patterns of azure Qi that shimmer in the air.

---
  
Suddenly, a powerful gust of wind disrupts Ali's concentration, causing his Qi manipulation to falter. A mysterious figure emerges from the shadows, clad in dark robes, exuding an oppressive aura. "You dare to practice here, in my territory?" the figure demands, eyes gleaming with malice.

---
  
Ali stands his ground, his eyes narrowing as he assesses the situation. With a cool demeanor, he replies, "I seek no trouble, but I won't back down from a challenge." His past life instincts warn him of danger, urging him to tread carefully.

---
  
The mysterious figure chuckles darkly, launching a swift attack towards Ali. Drawing upon his knowledge from his previous life, Ali counters with the "Azure Serpent Fist" technique, a rare form known for its fluid movements and devastating power. The clash of Qi colors illuminates the forest in a dazzling display of azure and crimson.

---
  
As the battle intensifies, Ali's opponent reveals surprising agility and skill, pushing him to his limits. The atmosphere crackles with tension as their Qi clashes in a symphony of colors and energy. Ali's past memories guide him, offering insights into his opponent's weaknesses.

---
  
With a sudden burst of energy, Ali unleashes a new technique, the "Crimson Phoenix Dance," a fusion of fire and wind Qi that engulfs his opponent in a blazing whirlwind. The mysterious figure staggers back, impressed by Ali's growth and determination.

---
  
Breathing heavily, Ali stands victorious, his clothes singed but his spirit unbroken. The mysterious figure nods in acknowledgment before vanishing into the shadows. As the forest falls silent once more, Ali's resolve strengthens, knowing that challenges lie ahead on his path to the prestigious academy.

---
  
[CHOICES]
1. Channeling the lingering Qi energies, Ali decides to meditate and reflect on the duel, seeking further insights into his opponent's techniques.
2. Feeling the rush of adrenaline, Ali chooses to continue his training, honing his skills to prepare for future encounters in the deadly tournaments.
3. With the encounter fresh in his mind, Ali opts to explore the forest, hoping to uncover any potential clues or hidden secrets that may aid him in his cultivation journey.
[/CHOICES]
2025-06-11 16:14:11,524 - app.models.base_genre - INFO - ============================================================
2025-06-11 16:14:11,525 - app.models.base_genre - INFO - Successfully parsed genre response: story=2034 chars, choices=3
2025-06-11 16:14:11,525 - app.storage.storage - INFO - Using provided arc goals: 7 goals
2025-06-11 16:14:11,525 - app.storage.storage - INFO - Using provided arc goal: Join a prestigious academy or sect and prove yourself through deadly tournaments.
2025-06-11 16:14:11,525 - app.storage.storage - INFO - Initialized memory with big goal: 'Climb from the weakest rank to the peak of cultivation in order to defeat the powerful enemies who destroyed your family and bring justice to those who wronged you.' and arc goal: 'Join a prestigious academy or sect and prove yourself through deadly tournaments.'
2025-06-11 16:14:11,525 - app.storage.storage - INFO - Arc progression: 1/7, Chapter: 1/7
2025-06-11 16:14:11,525 - app.storage.storage - INFO - Overall story progress: Chapter 1/50 (2%)
2025-06-11 16:14:11,621 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_setting.py', reloading
2025-06-11 16:14:13,703 - werkzeug - INFO -  * Restarting with stat
2025-06-11 16:14:14,273 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 16:14:14,330 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 16:14:14,331 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 16:14:14,335 - root - INFO - Starting StoryTeller API server...
2025-06-11 16:14:14,335 - root - INFO - Host: 0.0.0.0
2025-06-11 16:14:14,335 - root - INFO - Port: 5001
2025-06-11 16:14:14,335 - root - INFO - Debug mode: True
2025-06-11 16:14:14,337 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 16:14:14,343 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 16:14:49,851 - app.services.firebase_service - INFO - Retrieved 4 stories
2025-06-11 16:14:49,852 - app.storage.storage - INFO - Retrieved 4 stories
2025-06-11 16:14:49,853 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 16:14:49] "OPTIONS /api/stories HTTP/1.1" 200 -
2025-06-11 16:14:49,856 - app.auth - INFO - Authentication successful for user: sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-11 16:14:50,060 - app.services.firebase_service - INFO - Retrieved 4 stories for user sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-11 16:14:50,060 - app.storage.storage - INFO - Retrieved 4 stories for user sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-11 16:14:50,181 - app.services.usage_service - INFO - Auto-correcting count for sTttyhSg8VdcI4Axw1Nj9WOBXv33: 3 -> 4
2025-06-11 16:14:50,534 - app.services.ai_service - INFO - Generated big story goal: Protect someone dear to you by becoming strong enough that no force in the world can ever threaten them again.
2025-06-11 16:14:50,534 - app.services.ai_service - INFO - Using cultivation genre for initial story
2025-06-11 16:14:50,534 - app.services.story_planner - INFO - Calculated number of arcs: 7 based on 50 chapters and 7 chapters per arc
2025-06-11 16:14:50,535 - app.services.story_planner - INFO - Found exact match for goal: 'Protect someone dear to you by becoming strong enough that no force in the world can ever threaten them again.'
2025-06-11 16:14:50,535 - app.services.story_planner - INFO - Generated 7 new arc goals for theme: 'protection'
2025-06-11 16:14:50,535 - app.genres.cultivation_setting - INFO - Generated 7 arc goals. Initial arc goal: Start with a peaceful life that's shattered by loss or illness.
2025-06-11 16:14:50,535 - app.genres.cultivation_setting - INFO - Generating cultivation progression story for Ali
2025-06-11 16:14:50,535 - app.models.base_genre - INFO - Generating story for Ali
2025-06-11 16:14:58,514 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-11 16:14:58,521 - app.models.base_genre - INFO - ðŸŽ­ GENRE GPT RESPONSE (2619 chars):
2025-06-11 16:14:58,521 - app.models.base_genre - INFO - ============================================================
2025-06-11 16:14:58,521 - app.models.base_genre - INFO - [STORY]
  
Ali, a young cultivator with a determined gaze, trains diligently in a serene bamboo forest. The rustling leaves and the faint glow of Qi around him set a tranquil yet focused atmosphere.  

---  

Suddenly, a piercing scream echoes through the forest, snapping Ali out of his meditation. Rushing towards the source, he finds his master, Elder Chen, collapsed on the ground, his face pale and sweating profusely.  

---  

Elder Chen weakly raises a hand, his voice strained, "Ali, a dark energy has invaded my meridians... I fear this is beyond my ability to heal." Ali's eyes widen in shock and determination.  

---  

Ali grits his teeth, his mind racing with knowledge from his past life. He recalls a rare technique, the Celestial Meridian Cleansing, known for purging dark energies. He vows to find the ingredients and master this technique to save his master.  

---  

Setting out on his quest, Ali navigates through a dense, fog-covered mountain, his heart heavy with worry for Elder Chen. The mist swirls ominously around him as he seeks the rare herbs required for the cleansing technique.  

---  

As Ali finally discovers the first herb, a sudden roar shakes the mountain, causing the ground to tremble. From the shadows emerges a massive Thunder Beast, its fur crackling with electricity, blocking Ali's path to the remaining herbs.  

---  

Drawing on his cultivation knowledge, Ali forms a protective barrier of Qi around him, preparing to face the Thunder Beast head-on. The clash of energies illuminates the forest as Ali's determination shines through his eyes.  

---  

The battle intensifies, with the Thunder Beast unleashing devastating lightning strikes that crackle through the air. Ali focuses his Qi, ready to unleash a new technique, the Thunder-Quell Palm, to subdue the beast and continue his quest.  

---  

With a resounding strike, Ali's Thunder-Quell Palm collides with the Thunder Beast, creating a dazzling explosion of energy. The beast staggers back, giving Ali a chance to gather the remaining herbs and continue towards mastering the Celestial Meridian Cleansing.  

[/STORY]

[CHOICES]
1. Channel the Thunder-Quell Palm's energy into a defensive shield to protect yourself and find an alternative path to the remaining herbs.
2. Confront the Thunder Beast head-on, aiming to incapacitate it with a precise strike from the Thunder-Quell Palm and secure the remaining herbs swiftly.
3. Attempt to communicate with the Thunder Beast using your Qi mastery, seeking a peaceful resolution to bypass it and reach the remaining herbs without further conflict.
[/CHOICES]
2025-06-11 16:14:58,522 - app.models.base_genre - INFO - ============================================================
2025-06-11 16:14:58,523 - app.models.base_genre - INFO - Successfully parsed genre response: story=2108 chars, choices=3
2025-06-11 16:14:58,524 - app.storage.storage - INFO - Using provided arc goals: 7 goals
2025-06-11 16:14:58,525 - app.storage.storage - INFO - Using provided arc goal: Start with a peaceful life that's shattered by loss or illness.
2025-06-11 16:14:58,525 - app.storage.storage - INFO - Initialized memory with big goal: 'Protect someone dear to you by becoming strong enough that no force in the world can ever threaten them again.' and arc goal: 'Start with a peaceful life that's shattered by loss or illness.'
2025-06-11 16:14:58,525 - app.storage.storage - INFO - Arc progression: 1/7, Chapter: 1/7
2025-06-11 16:14:58,525 - app.storage.storage - INFO - Overall story progress: Chapter 1/50 (2%)
2025-06-11 16:14:58,687 - app.services.firebase_service - INFO - Saved story story_1749683698_d0c760ca: Ali's cultivation shonen
2025-06-11 16:14:58,688 - app.storage.storage - INFO - Saved story story_1749683698_d0c760ca: Ali's cultivation shonen
2025-06-11 16:14:58,689 - app.storage.storage - INFO - Created new story: story_1749683698_d0c760ca: Ali's cultivation shonen
2025-06-11 16:14:59,042 - app.services.usage_service - INFO - Updated usage for user: sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-11 16:14:59,531 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 16:14:59] "POST /api/stories HTTP/1.1" 200 -
2025-06-11 16:14:59,730 - app.services.firebase_service - INFO - Retrieved story story_1749683698_d0c760ca: Ali's cultivation shonen
2025-06-11 16:14:59,731 - app.storage.storage - INFO - Retrieved story story_1749683698_d0c760ca: Ali's cultivation shonen
2025-06-11 16:14:59,732 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 16:14:59] "OPTIONS /api/stories/story_1749683698_d0c760ca HTTP/1.1" 200 -
2025-06-11 16:14:59,969 - app.services.firebase_service - INFO - Retrieved story story_1749683698_d0c760ca: Ali's cultivation shonen
2025-06-11 16:14:59,970 - app.storage.storage - INFO - Retrieved story story_1749683698_d0c760ca: Ali's cultivation shonen
2025-06-11 16:14:59,971 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 16:14:59] "OPTIONS /api/stories/story_1749683698_d0c760ca HTTP/1.1" 200 -
2025-06-11 16:14:59,977 - app.services.firebase_service - INFO - Retrieved story story_1749683698_d0c760ca: Ali's cultivation shonen
2025-06-11 16:14:59,978 - app.storage.storage - INFO - Retrieved story story_1749683698_d0c760ca: Ali's cultivation shonen
2025-06-11 16:14:59,979 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 16:14:59] "GET /api/stories/story_1749683698_d0c760ca HTTP/1.1" 200 -
2025-06-11 16:15:00,086 - app.services.firebase_service - INFO - Retrieved story story_1749683698_d0c760ca: Ali's cultivation shonen
2025-06-11 16:15:00,086 - app.storage.storage - INFO - Retrieved story story_1749683698_d0c760ca: Ali's cultivation shonen
2025-06-11 16:15:00,087 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 16:15:00] "GET /api/stories/story_1749683698_d0c760ca HTTP/1.1" 200 -
2025-06-11 16:26:30,683 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/services/story_planner.py', reloading
2025-06-11 16:26:32,776 - werkzeug - INFO -  * Restarting with stat
2025-06-11 16:26:33,388 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 16:26:33,452 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 16:26:33,452 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 16:26:33,456 - root - INFO - Starting StoryTeller API server...
2025-06-11 16:26:33,456 - root - INFO - Host: 0.0.0.0
2025-06-11 16:26:33,456 - root - INFO - Port: 5001
2025-06-11 16:26:33,456 - root - INFO - Debug mode: True
2025-06-11 16:26:33,459 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 16:26:33,465 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 16:26:58,729 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/api.py', reloading
2025-06-11 16:26:58,790 - werkzeug - INFO -  * Restarting with stat
2025-06-11 16:26:59,331 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 16:26:59,389 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 16:26:59,389 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 16:26:59,393 - root - INFO - Starting StoryTeller API server...
2025-06-11 16:26:59,393 - root - INFO - Host: 0.0.0.0
2025-06-11 16:26:59,393 - root - INFO - Port: 5001
2025-06-11 16:26:59,393 - root - INFO - Debug mode: True
2025-06-11 16:26:59,396 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 16:26:59,402 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 16:27:44,885 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/services/ai_service.py', reloading
2025-06-11 16:27:44,980 - werkzeug - INFO -  * Restarting with stat
2025-06-11 16:27:45,523 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 16:27:45,580 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 16:27:45,580 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 16:27:45,584 - root - INFO - Starting StoryTeller API server...
2025-06-11 16:27:45,584 - root - INFO - Host: 0.0.0.0
2025-06-11 16:27:45,584 - root - INFO - Port: 5001
2025-06-11 16:27:45,584 - root - INFO - Debug mode: True
2025-06-11 16:27:45,587 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 16:27:45,593 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 16:27:58,727 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_setting.py', reloading
2025-06-11 16:27:58,818 - werkzeug - INFO -  * Restarting with stat
2025-06-11 16:27:59,358 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 16:27:59,414 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 16:27:59,414 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 16:27:59,418 - root - INFO - Starting StoryTeller API server...
2025-06-11 16:27:59,418 - root - INFO - Host: 0.0.0.0
2025-06-11 16:27:59,418 - root - INFO - Port: 5001
2025-06-11 16:27:59,419 - root - INFO - Debug mode: True
2025-06-11 16:27:59,421 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 16:27:59,427 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 16:28:10,541 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_setting.py', reloading
2025-06-11 16:28:10,618 - werkzeug - INFO -  * Restarting with stat
2025-06-11 16:28:11,179 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 16:28:11,238 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 16:28:11,238 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 16:28:11,242 - root - INFO - Starting StoryTeller API server...
2025-06-11 16:28:11,242 - root - INFO - Host: 0.0.0.0
2025-06-11 16:28:11,242 - root - INFO - Port: 5001
2025-06-11 16:28:11,242 - root - INFO - Debug mode: True
2025-06-11 16:28:11,244 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 16:28:11,251 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 16:28:39,493 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/services/story_planner.py', reloading
2025-06-11 16:28:39,568 - werkzeug - INFO -  * Restarting with stat
2025-06-11 16:28:40,109 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 16:28:40,166 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 16:28:40,166 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 16:28:40,170 - root - INFO - Starting StoryTeller API server...
2025-06-11 16:28:40,171 - root - INFO - Host: 0.0.0.0
2025-06-11 16:28:40,171 - root - INFO - Port: 5001
2025-06-11 16:28:40,171 - root - INFO - Debug mode: True
2025-06-11 16:28:40,173 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 16:28:40,180 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 16:30:11,907 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/services/story_planner.py', reloading
2025-06-11 16:30:11,982 - werkzeug - INFO -  * Restarting with stat
2025-06-11 16:30:12,537 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 16:30:12,601 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 16:30:12,601 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 16:30:12,605 - root - INFO - Starting StoryTeller API server...
2025-06-11 16:30:12,605 - root - INFO - Host: 0.0.0.0
2025-06-11 16:30:12,605 - root - INFO - Port: 5001
2025-06-11 16:30:12,605 - root - INFO - Debug mode: True
2025-06-11 16:30:12,608 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 16:30:12,614 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 16:30:15,632 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/services/ai_service.py', reloading
2025-06-11 16:30:15,700 - werkzeug - INFO -  * Restarting with stat
2025-06-11 16:30:16,141 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 16:30:16,184 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 16:30:16,184 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 16:30:16,188 - root - INFO - Starting StoryTeller API server...
2025-06-11 16:30:16,188 - root - INFO - Host: 0.0.0.0
2025-06-11 16:30:16,188 - root - INFO - Port: 5001
2025-06-11 16:30:16,188 - root - INFO - Debug mode: True
2025-06-11 16:30:16,190 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 16:30:16,196 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 16:30:31,311 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_setting.py', reloading
2025-06-11 16:30:31,383 - werkzeug - INFO -  * Restarting with stat
2025-06-11 16:30:32,003 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 16:30:32,066 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 16:30:32,066 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 16:30:32,071 - root - INFO - Starting StoryTeller API server...
2025-06-11 16:30:32,071 - root - INFO - Host: 0.0.0.0
2025-06-11 16:30:32,071 - root - INFO - Port: 5001
2025-06-11 16:30:32,071 - root - INFO - Debug mode: True
2025-06-11 16:30:32,073 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 16:30:32,080 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 16:30:33,089 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_setting.py', reloading
2025-06-11 16:30:33,158 - werkzeug - INFO -  * Restarting with stat
2025-06-11 16:30:33,653 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 16:30:33,699 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 16:30:33,699 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 16:30:33,704 - root - INFO - Starting StoryTeller API server...
2025-06-11 16:30:33,704 - root - INFO - Host: 0.0.0.0
2025-06-11 16:30:33,704 - root - INFO - Port: 5001
2025-06-11 16:30:33,704 - root - INFO - Debug mode: True
2025-06-11 16:30:33,706 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 16:30:33,712 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 16:30:34,722 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_setting.py', reloading
2025-06-11 16:30:34,791 - werkzeug - INFO -  * Restarting with stat
2025-06-11 16:30:35,231 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 16:30:35,280 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 16:30:35,280 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 16:30:35,284 - root - INFO - Starting StoryTeller API server...
2025-06-11 16:30:35,284 - root - INFO - Host: 0.0.0.0
2025-06-11 16:30:35,284 - root - INFO - Port: 5001
2025-06-11 16:30:35,284 - root - INFO - Debug mode: True
2025-06-11 16:30:35,286 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 16:30:35,294 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 16:30:48,380 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/api.py', reloading
2025-06-11 16:30:48,456 - werkzeug - INFO -  * Restarting with stat
2025-06-11 16:30:48,918 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 16:30:48,969 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 16:30:48,969 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 16:30:48,974 - root - INFO - Starting StoryTeller API server...
2025-06-11 16:30:48,974 - root - INFO - Host: 0.0.0.0
2025-06-11 16:30:48,974 - root - INFO - Port: 5001
2025-06-11 16:30:48,974 - root - INFO - Debug mode: True
2025-06-11 16:30:48,976 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 16:30:48,983 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 16:30:57,038 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/services/story_planner.py', reloading
2025-06-11 16:30:57,107 - werkzeug - INFO -  * Restarting with stat
2025-06-11 16:30:57,554 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 16:30:57,599 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 16:30:57,599 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 16:30:57,603 - root - INFO - Starting StoryTeller API server...
2025-06-11 16:30:57,603 - root - INFO - Host: 0.0.0.0
2025-06-11 16:30:57,603 - root - INFO - Port: 5001
2025-06-11 16:30:57,603 - root - INFO - Debug mode: True
2025-06-11 16:30:57,605 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 16:30:57,611 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 16:31:02,648 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/api.py', reloading
2025-06-11 16:31:02,725 - werkzeug - INFO -  * Restarting with stat
2025-06-11 16:31:03,160 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 16:31:03,205 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 16:31:03,205 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 16:31:03,209 - root - INFO - Starting StoryTeller API server...
2025-06-11 16:31:03,210 - root - INFO - Host: 0.0.0.0
2025-06-11 16:31:03,210 - root - INFO - Port: 5001
2025-06-11 16:31:03,210 - root - INFO - Debug mode: True
2025-06-11 16:31:03,211 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 16:31:03,217 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 16:36:43,233 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_setting.py', reloading
2025-06-11 16:36:43,323 - werkzeug - INFO -  * Restarting with stat
2025-06-11 16:36:43,901 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 16:36:43,959 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 16:36:43,959 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 16:36:43,963 - root - INFO - Starting StoryTeller API server...
2025-06-11 16:36:43,963 - root - INFO - Host: 0.0.0.0
2025-06-11 16:36:43,963 - root - INFO - Port: 5001
2025-06-11 16:36:43,963 - root - INFO - Debug mode: True
2025-06-11 16:36:43,966 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 16:36:43,972 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 16:37:26,287 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/models/base_genre.py', reloading
2025-06-11 16:37:26,362 - werkzeug - INFO -  * Restarting with stat
2025-06-11 16:37:26,915 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 16:37:26,973 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 16:37:26,974 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 16:37:26,978 - root - INFO - Starting StoryTeller API server...
2025-06-11 16:37:26,978 - root - INFO - Host: 0.0.0.0
2025-06-11 16:37:26,978 - root - INFO - Port: 5001
2025-06-11 16:37:26,978 - root - INFO - Debug mode: True
2025-06-11 16:37:26,981 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 16:37:26,987 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 16:38:26,546 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_setting.py', reloading
2025-06-11 16:38:26,635 - werkzeug - INFO -  * Restarting with stat
2025-06-11 16:38:27,171 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 16:38:27,227 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 16:38:27,227 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 16:38:27,231 - root - INFO - Starting StoryTeller API server...
2025-06-11 16:38:27,231 - root - INFO - Host: 0.0.0.0
2025-06-11 16:38:27,231 - root - INFO - Port: 5001
2025-06-11 16:38:27,231 - root - INFO - Debug mode: True
2025-06-11 16:38:27,234 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 16:38:27,239 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 16:38:55,494 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_setting.py', reloading
2025-06-11 16:38:55,589 - werkzeug - INFO -  * Restarting with stat
2025-06-11 17:15:00,219 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 17:15:00,282 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 17:15:00,282 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 17:15:00,286 - root - INFO - Starting StoryTeller API server...
2025-06-11 17:15:00,286 - root - INFO - Host: 0.0.0.0
2025-06-11 17:15:00,286 - root - INFO - Port: 5001
2025-06-11 17:15:00,286 - root - INFO - Debug mode: True
2025-06-11 17:15:00,293 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5001
 * Running on http://10.0.0.243:5001
2025-06-11 17:15:00,293 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-11 17:15:00,294 - werkzeug - INFO -  * Restarting with stat
2025-06-11 17:15:00,709 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 17:15:00,750 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 17:15:00,751 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 17:15:00,755 - root - INFO - Starting StoryTeller API server...
2025-06-11 17:15:00,755 - root - INFO - Host: 0.0.0.0
2025-06-11 17:15:00,755 - root - INFO - Port: 5001
2025-06-11 17:15:00,755 - root - INFO - Debug mode: True
2025-06-11 17:15:00,756 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 17:15:00,765 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 17:15:21,902 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 17:15:21,961 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 17:15:21,961 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 17:15:21,965 - root - INFO - Starting StoryTeller API server...
2025-06-11 17:15:21,966 - root - INFO - Host: 0.0.0.0
2025-06-11 17:15:21,966 - root - INFO - Port: 5001
2025-06-11 17:15:21,966 - root - INFO - Debug mode: True
2025-06-11 17:15:21,971 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5001
 * Running on http://10.0.0.243:5001
2025-06-11 17:15:21,971 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-11 17:15:21,972 - werkzeug - INFO -  * Restarting with stat
2025-06-11 17:15:22,410 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 17:15:22,463 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 17:15:22,463 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 17:15:22,469 - root - INFO - Starting StoryTeller API server...
2025-06-11 17:15:22,469 - root - INFO - Host: 0.0.0.0
2025-06-11 17:15:22,469 - root - INFO - Port: 5001
2025-06-11 17:15:22,469 - root - INFO - Debug mode: True
2025-06-11 17:15:22,471 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 17:15:22,478 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 17:15:35,404 - app.services.firebase_service - INFO - Retrieved 5 stories
2025-06-11 17:15:35,404 - app.storage.storage - INFO - Retrieved 5 stories
2025-06-11 17:15:35,406 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 17:15:35] "OPTIONS /api/stories HTTP/1.1" 200 -
2025-06-11 17:15:35,410 - app.auth - INFO - Authentication successful for user: sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-11 17:15:35,666 - app.services.firebase_service - INFO - Retrieved 5 stories for user sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-11 17:15:35,667 - app.storage.storage - INFO - Retrieved 5 stories for user sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-11 17:15:36,462 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 17:15:36] "[31m[1mPOST /api/stories HTTP/1.1[0m" 429 -
2025-06-11 17:15:49,532 - app.services.firebase_service - INFO - Retrieved 5 stories
2025-06-11 17:15:49,532 - app.storage.storage - INFO - Retrieved 5 stories
2025-06-11 17:15:49,533 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 17:15:49] "OPTIONS /api/stories HTTP/1.1" 200 -
2025-06-11 17:15:49,754 - app.services.firebase_service - INFO - Retrieved 5 stories
2025-06-11 17:15:49,755 - app.storage.storage - INFO - Retrieved 5 stories
2025-06-11 17:15:49,756 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 17:15:49] "OPTIONS /api/stories HTTP/1.1" 200 -
2025-06-11 17:15:49,770 - app.services.firebase_service - INFO - Retrieved 5 stories for user sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-11 17:15:49,771 - app.storage.storage - INFO - Retrieved 5 stories for user sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-11 17:15:49,772 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 17:15:49] "GET /api/stories HTTP/1.1" 200 -
2025-06-11 17:15:49,938 - app.services.firebase_service - INFO - Retrieved 5 stories for user sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-11 17:15:49,939 - app.storage.storage - INFO - Retrieved 5 stories for user sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-11 17:15:49,940 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 17:15:49] "GET /api/stories HTTP/1.1" 200 -
2025-06-11 17:15:52,672 - app.services.firebase_service - INFO - Retrieved story story_1749683698_d0c760ca: Ali's cultivation shonen
2025-06-11 17:15:52,672 - app.storage.storage - INFO - Retrieved story story_1749683698_d0c760ca: Ali's cultivation shonen
2025-06-11 17:15:52,673 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 17:15:52] "OPTIONS /api/stories/story_1749683698_d0c760ca HTTP/1.1" 200 -
2025-06-11 17:15:52,674 - app.auth - INFO - Authentication successful for user: sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-11 17:15:52,894 - app.services.firebase_service - INFO - Retrieved story story_1749683698_d0c760ca: Ali's cultivation shonen
2025-06-11 17:15:52,895 - app.storage.storage - INFO - Retrieved story story_1749683698_d0c760ca: Ali's cultivation shonen
2025-06-11 17:15:53,030 - app.services.firebase_service - INFO - Deleted story story_1749683698_d0c760ca
2025-06-11 17:15:53,030 - app.storage.storage - INFO - Deleted story story_1749683698_d0c760ca
2025-06-11 17:15:53,381 - app.services.usage_service - INFO - Updated usage for user: sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-11 17:15:53,382 - app.services.usage_service - INFO - Decremented stories created for user sTttyhSg8VdcI4Axw1Nj9WOBXv33: 4
2025-06-11 17:15:53,382 - root - INFO - [API] Decremented usage count for user sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-11 17:15:53,383 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 17:15:53] "DELETE /api/stories/story_1749683698_d0c760ca HTTP/1.1" 200 -
2025-06-11 17:15:54,987 - app.services.firebase_service - INFO - Retrieved story story_1749683651_a1256463: Ali's cultivation shonen
2025-06-11 17:15:54,987 - app.storage.storage - INFO - Retrieved story story_1749683651_a1256463: Ali's cultivation shonen
2025-06-11 17:15:54,988 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 17:15:54] "OPTIONS /api/stories/story_1749683651_a1256463 HTTP/1.1" 200 -
2025-06-11 17:15:54,991 - app.auth - INFO - Authentication successful for user: sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-11 17:15:55,217 - app.services.firebase_service - INFO - Retrieved story story_1749683651_a1256463: Ali's cultivation shonen
2025-06-11 17:15:55,218 - app.storage.storage - INFO - Retrieved story story_1749683651_a1256463: Ali's cultivation shonen
2025-06-11 17:15:55,347 - app.services.firebase_service - INFO - Deleted story story_1749683651_a1256463
2025-06-11 17:15:55,347 - app.storage.storage - INFO - Deleted story story_1749683651_a1256463
2025-06-11 17:15:55,687 - app.services.usage_service - INFO - Updated usage for user: sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-11 17:15:55,688 - app.services.usage_service - INFO - Decremented stories created for user sTttyhSg8VdcI4Axw1Nj9WOBXv33: 3
2025-06-11 17:15:55,688 - root - INFO - [API] Decremented usage count for user sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-11 17:15:55,689 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 17:15:55] "DELETE /api/stories/story_1749683651_a1256463 HTTP/1.1" 200 -
2025-06-11 17:15:57,119 - app.services.firebase_service - INFO - Retrieved story story_1749682121_28678b13: Ali's cultivation shonen
2025-06-11 17:15:57,119 - app.storage.storage - INFO - Retrieved story story_1749682121_28678b13: Ali's cultivation shonen
2025-06-11 17:15:57,120 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 17:15:57] "OPTIONS /api/stories/story_1749682121_28678b13 HTTP/1.1" 200 -
2025-06-11 17:15:57,130 - app.auth - INFO - Authentication successful for user: sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-11 17:15:57,347 - app.services.firebase_service - INFO - Retrieved story story_1749682121_28678b13: Ali's cultivation shonen
2025-06-11 17:15:57,348 - app.storage.storage - INFO - Retrieved story story_1749682121_28678b13: Ali's cultivation shonen
2025-06-11 17:15:57,479 - app.services.firebase_service - INFO - Deleted story story_1749682121_28678b13
2025-06-11 17:15:57,480 - app.storage.storage - INFO - Deleted story story_1749682121_28678b13
2025-06-11 17:15:57,837 - app.services.usage_service - INFO - Updated usage for user: sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-11 17:15:57,838 - app.services.usage_service - INFO - Decremented stories created for user sTttyhSg8VdcI4Axw1Nj9WOBXv33: 2
2025-06-11 17:15:57,838 - root - INFO - [API] Decremented usage count for user sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-11 17:15:57,839 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 17:15:57] "DELETE /api/stories/story_1749682121_28678b13 HTTP/1.1" 200 -
2025-06-11 17:15:59,223 - app.services.firebase_service - INFO - Retrieved story story_1749610513_2de1b999: Ali's cultivation shonen
2025-06-11 17:15:59,224 - app.storage.storage - INFO - Retrieved story story_1749610513_2de1b999: Ali's cultivation shonen
2025-06-11 17:15:59,225 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 17:15:59] "OPTIONS /api/stories/story_1749610513_2de1b999 HTTP/1.1" 200 -
2025-06-11 17:15:59,235 - app.auth - INFO - Authentication successful for user: sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-11 17:15:59,447 - app.services.firebase_service - INFO - Retrieved story story_1749610513_2de1b999: Ali's cultivation shonen
2025-06-11 17:15:59,448 - app.storage.storage - INFO - Retrieved story story_1749610513_2de1b999: Ali's cultivation shonen
2025-06-11 17:15:59,587 - app.services.firebase_service - INFO - Deleted story story_1749610513_2de1b999
2025-06-11 17:15:59,588 - app.storage.storage - INFO - Deleted story story_1749610513_2de1b999
2025-06-11 17:15:59,937 - app.services.usage_service - INFO - Updated usage for user: sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-11 17:15:59,937 - app.services.usage_service - INFO - Decremented stories created for user sTttyhSg8VdcI4Axw1Nj9WOBXv33: 1
2025-06-11 17:15:59,938 - root - INFO - [API] Decremented usage count for user sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-11 17:15:59,939 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 17:15:59] "DELETE /api/stories/story_1749610513_2de1b999 HTTP/1.1" 200 -
2025-06-11 17:16:08,322 - app.services.firebase_service - INFO - Retrieved 1 stories
2025-06-11 17:16:08,323 - app.storage.storage - INFO - Retrieved 1 stories
2025-06-11 17:16:08,325 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 17:16:08] "OPTIONS /api/stories HTTP/1.1" 200 -
2025-06-11 17:16:08,329 - app.auth - INFO - Authentication successful for user: sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-11 17:16:08,537 - app.services.firebase_service - INFO - Retrieved 1 stories for user sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-11 17:16:08,538 - app.storage.storage - INFO - Retrieved 1 stories for user sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-11 17:16:08,857 - app.services.ai_service - INFO - Generated big story goal: Use your knowledge of a tragic future life to change fate, protect your loved ones, and prevent the fall of your world.
2025-06-11 17:16:08,858 - app.services.ai_service - INFO - Using cultivation genre for initial story
2025-06-11 17:16:08,858 - app.services.story_planner - INFO - Calculated number of arcs: 7 based on 50 chapters and 7 chapters per arc
2025-06-11 17:16:08,858 - app.services.story_planner - INFO - Found exact match for goal: 'Use your knowledge of a tragic future life to change fate, protect your loved ones, and prevent the fall of your world.'
2025-06-11 17:16:08,858 - app.services.story_planner - INFO - Generated 7 new arc goals for theme: 'past_life'
2025-06-11 17:16:08,859 - app.genres.cultivation_setting - INFO - Generated 7 arc goals. Initial arc goal: Travel to higher realms and train under powerful masters.
2025-06-11 17:16:08,860 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 17:16:08] "[35m[1mPOST /api/stories HTTP/1.1[0m" 500 -
2025-06-11 17:21:48,926 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/models/base_genre.py', reloading
2025-06-11 17:21:51,027 - werkzeug - INFO -  * Restarting with stat
2025-06-11 17:21:51,628 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 17:21:51,687 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 17:21:51,688 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 17:21:51,692 - root - INFO - Starting StoryTeller API server...
2025-06-11 17:21:51,692 - root - INFO - Host: 0.0.0.0
2025-06-11 17:21:51,692 - root - INFO - Port: 5001
2025-06-11 17:21:51,692 - root - INFO - Debug mode: True
2025-06-11 17:21:51,694 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 17:21:51,701 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 17:22:01,802 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_setting.py', reloading
2025-06-11 17:22:01,875 - werkzeug - INFO -  * Restarting with stat
2025-06-11 17:22:02,412 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 17:22:02,469 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 17:22:02,469 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 17:22:02,473 - root - INFO - Starting StoryTeller API server...
2025-06-11 17:22:02,473 - root - INFO - Host: 0.0.0.0
2025-06-11 17:22:02,473 - root - INFO - Port: 5001
2025-06-11 17:22:02,473 - root - INFO - Debug mode: True
2025-06-11 17:22:02,476 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 17:22:02,482 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 17:22:23,660 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_setting.py', reloading
2025-06-11 17:22:23,728 - werkzeug - INFO -  * Restarting with stat
2025-06-11 17:49:29,468 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 17:49:29,533 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 17:49:29,533 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 17:49:29,537 - root - INFO - Starting StoryTeller API server...
2025-06-11 17:49:29,537 - root - INFO - Host: 0.0.0.0
2025-06-11 17:49:29,537 - root - INFO - Port: 5001
2025-06-11 17:49:29,537 - root - INFO - Debug mode: True
2025-06-11 17:49:29,544 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5001
 * Running on http://10.0.0.243:5001
2025-06-11 17:49:29,544 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-11 17:49:29,544 - werkzeug - INFO -  * Restarting with stat
2025-06-11 17:49:29,969 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 17:49:30,012 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 17:49:30,012 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 17:49:30,016 - root - INFO - Starting StoryTeller API server...
2025-06-11 17:49:30,016 - root - INFO - Host: 0.0.0.0
2025-06-11 17:49:30,017 - root - INFO - Port: 5001
2025-06-11 17:49:30,017 - root - INFO - Debug mode: True
2025-06-11 17:49:30,018 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 17:49:30,026 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 17:49:40,695 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 17:49:40,736 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 17:49:40,736 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 17:49:40,741 - root - INFO - Starting StoryTeller API server...
2025-06-11 17:49:40,741 - root - INFO - Host: 0.0.0.0
2025-06-11 17:49:40,741 - root - INFO - Port: 5001
2025-06-11 17:49:40,741 - root - INFO - Debug mode: True
2025-06-11 17:49:40,745 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5001
 * Running on http://10.0.0.243:5001
2025-06-11 17:49:40,745 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-11 17:49:40,746 - werkzeug - INFO -  * Restarting with stat
2025-06-11 17:49:41,193 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 17:49:41,235 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 17:49:41,235 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 17:49:41,240 - root - INFO - Starting StoryTeller API server...
2025-06-11 17:49:41,240 - root - INFO - Host: 0.0.0.0
2025-06-11 17:49:41,240 - root - INFO - Port: 5001
2025-06-11 17:49:41,240 - root - INFO - Debug mode: True
2025-06-11 17:49:41,242 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 17:49:41,248 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 17:49:48,145 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 17:49:48] "OPTIONS /api/status HTTP/1.1" 200 -
2025-06-11 17:49:48,147 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 17:49:48] "OPTIONS /api/status HTTP/1.1" 200 -
2025-06-11 17:49:48,149 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 17:49:48] "GET /api/status HTTP/1.1" 200 -
2025-06-11 17:49:48,151 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 17:49:48] "GET /api/status HTTP/1.1" 200 -
2025-06-11 17:49:57,836 - app.services.firebase_service - INFO - Retrieved 1 stories
2025-06-11 17:49:57,837 - app.storage.storage - INFO - Retrieved 1 stories
2025-06-11 17:49:57,839 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 17:49:57] "OPTIONS /api/stories HTTP/1.1" 200 -
2025-06-11 17:49:57,843 - app.auth - INFO - Authentication successful for user: sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-11 17:49:57,999 - app.services.firebase_service - INFO - Retrieved 1 stories for user sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-11 17:49:57,999 - app.storage.storage - INFO - Retrieved 1 stories for user sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-11 17:49:58,240 - app.services.ai_service - INFO - Generated big story goal: Awaken the memories and powers of your past life to reclaim your former glory and settle unfinished karma.
2025-06-11 17:49:58,240 - app.services.ai_service - INFO - Using cultivation genre for initial story
2025-06-11 17:49:58,241 - app.services.story_planner - INFO - Calculated number of arcs: 7 based on 50 chapters and 7 chapters per arc
2025-06-11 17:49:58,241 - app.services.story_planner - INFO - Found exact match for goal: 'Awaken the memories and powers of your past life to reclaim your former glory and settle unfinished karma.'
2025-06-11 17:49:58,241 - app.services.story_planner - INFO - Generated 7 new arc goals for theme: 'past_life'
2025-06-11 17:49:58,241 - app.genres.cultivation_setting - INFO - Generated 7 arc goals. Initial arc goal: Rebuild the sect or empire you once led.
2025-06-11 17:49:58,242 - app.genres.cultivation_setting - INFO - Generating cultivation progression story for Ali
2025-06-11 17:49:58,242 - app.models.base_genre - INFO - Generating story for Ali
2025-06-11 17:50:03,485 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-11 17:50:03,492 - app.models.base_genre - INFO - ðŸŽ­ GENRE GPT RESPONSE (2666 chars):
2025-06-11 17:50:03,492 - app.models.base_genre - INFO - ============================================================
2025-06-11 17:50:03,492 - app.models.base_genre - INFO - [STORY]
Ali, a young cultivator with memories of a past life, stands at the entrance of the Hidden Mountain Sect. The wind carries the whispers of ancient qi techniques, igniting a spark of recognition in Ali's eyes. He takes a deep breath, ready to embark on his journey to rebuild his former empire.

---
Inside the sect, Ali encounters Master Jin, a wise elder with a formidable reputation. Master Jin's eyes narrow as he studies Ali, sensing something extraordinary about the young cultivator. "Prove your worth," Master Jin demands, his voice echoing through the training grounds.

---
With a determined expression, Ali steps forward, channeling his qi into the Water-Willow Palm technique. The energy flows gracefully from his fingertips, creating ripples in the air. Master Jin nods in approval, recognizing the ancient technique passed down through generations.

---
As the sun sets, Ali finds himself in the library, poring over scrolls detailing cultivation methods lost to time. Suddenly, a hidden compartment reveals an ancient relic - the Phoenix Feather Fan, a legendary artifact said to grant its wielder unmatched speed and agility.

---
A shadow falls over Ali as a rival sect member, Kaito, steps into the library. "You may have the fan, but without true mastery, it's just a trinket," Kaito sneers, challenging Ali to a duel to prove his worth.

---
The clash of qi fills the room as Ali and Kaito engage in a fierce battle, their techniques weaving a dance of power and skill. With a final burst of energy, Ali unleashes a fusion technique, combining the Water-Willow Palm with the Phoenix Feather Fan's speed, catching Kaito off guard.

---
Defeated, Kaito grudgingly acknowledges Ali's strength, his eyes holding a glint of respect. As the tension dissipates, Master Jin enters the library, his expression unreadable. "You have potential, Ali. But true strength comes from within," he advises before leaving Ali with a cryptic smile.

---
The library falls into silence, leaving Ali to contemplate Master Jin's words. The path to rebuilding his sect is fraught with challenges, but each victory brings him closer to his ultimate goal.

[/STORY]

[CHOICES]
1. Embrace Master Jin's advice and delve deeper into internal cultivation methods, seeking strength from within to enhance your skills.
2. Seek out the assistance of a fellow sect member known for their expertise in ancient relics, hoping to uncover more hidden treasures to aid in your sect's restoration.
3. Challenge Kaito to a friendly sparring match, aiming to build a bond of mutual respect and understanding between rival sects as a step towards unity and collaboration.
[/CHOICES]
2025-06-11 17:50:03,492 - app.models.base_genre - INFO - ============================================================
2025-06-11 17:50:03,493 - app.models.base_genre - INFO - Successfully parsed genre response: story=2148 chars, choices=3
2025-06-11 17:50:03,494 - app.storage.storage - INFO - Using provided arc goals: 7 goals
2025-06-11 17:50:03,494 - app.storage.storage - INFO - Using provided arc goal: Rebuild the sect or empire you once led.
2025-06-11 17:50:03,495 - app.storage.storage - INFO - Initialized memory with big goal: 'Awaken the memories and powers of your past life to reclaim your former glory and settle unfinished karma.' and arc goal: 'Rebuild the sect or empire you once led.'
2025-06-11 17:50:03,495 - app.storage.storage - INFO - Arc progression: 1/7, Chapter: 1/7
2025-06-11 17:50:03,495 - app.storage.storage - INFO - Overall story progress: Chapter 1/50 (2%)
2025-06-11 17:50:03,793 - app.services.firebase_service - INFO - Saved story story_1749689403_080e0411: Ali's cultivation shonen
2025-06-11 17:50:03,793 - app.storage.storage - INFO - Saved story story_1749689403_080e0411: Ali's cultivation shonen
2025-06-11 17:50:03,794 - app.storage.storage - INFO - Created new story: story_1749689403_080e0411: Ali's cultivation shonen
2025-06-11 17:50:04,076 - app.services.usage_service - INFO - Updated usage for user: sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-11 17:50:04,513 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 17:50:04] "POST /api/stories HTTP/1.1" 200 -
2025-06-11 17:50:04,741 - app.services.firebase_service - INFO - Retrieved story story_1749689403_080e0411: Ali's cultivation shonen
2025-06-11 17:50:04,742 - app.storage.storage - INFO - Retrieved story story_1749689403_080e0411: Ali's cultivation shonen
2025-06-11 17:50:04,743 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 17:50:04] "OPTIONS /api/stories/story_1749689403_080e0411 HTTP/1.1" 200 -
2025-06-11 17:50:04,773 - app.services.firebase_service - INFO - Retrieved story story_1749689403_080e0411: Ali's cultivation shonen
2025-06-11 17:50:04,774 - app.storage.storage - INFO - Retrieved story story_1749689403_080e0411: Ali's cultivation shonen
2025-06-11 17:50:04,776 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 17:50:04] "OPTIONS /api/stories/story_1749689403_080e0411 HTTP/1.1" 200 -
2025-06-11 17:50:04,855 - app.services.firebase_service - INFO - Retrieved story story_1749689403_080e0411: Ali's cultivation shonen
2025-06-11 17:50:04,855 - app.storage.storage - INFO - Retrieved story story_1749689403_080e0411: Ali's cultivation shonen
2025-06-11 17:50:04,857 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 17:50:04] "GET /api/stories/story_1749689403_080e0411 HTTP/1.1" 200 -
2025-06-11 17:50:04,961 - app.services.firebase_service - INFO - Retrieved story story_1749689403_080e0411: Ali's cultivation shonen
2025-06-11 17:50:04,961 - app.storage.storage - INFO - Retrieved story story_1749689403_080e0411: Ali's cultivation shonen
2025-06-11 17:50:04,962 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 17:50:04] "GET /api/stories/story_1749689403_080e0411 HTTP/1.1" 200 -
2025-06-11 17:57:18,780 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/storage/storage.py', reloading
2025-06-11 17:57:20,899 - werkzeug - INFO -  * Restarting with stat
2025-06-11 17:57:21,494 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 17:57:21,556 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 17:57:21,556 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 17:57:21,560 - root - INFO - Starting StoryTeller API server...
2025-06-11 17:57:21,560 - root - INFO - Host: 0.0.0.0
2025-06-11 17:57:21,560 - root - INFO - Port: 5001
2025-06-11 17:57:21,560 - root - INFO - Debug mode: True
2025-06-11 17:57:21,563 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 17:57:21,569 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 17:57:38,718 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/api.py', reloading
2025-06-11 17:57:38,799 - werkzeug - INFO -  * Restarting with stat
2025-06-11 17:57:39,334 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 17:57:39,394 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 17:57:39,394 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 17:57:39,399 - root - INFO - Starting StoryTeller API server...
2025-06-11 17:57:39,399 - root - INFO - Host: 0.0.0.0
2025-06-11 17:57:39,399 - root - INFO - Port: 5001
2025-06-11 17:57:39,399 - root - INFO - Debug mode: True
2025-06-11 17:57:39,403 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 17:57:39,413 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 18:00:31,788 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/storage/storage.py', reloading
2025-06-11 18:00:31,874 - werkzeug - INFO -  * Restarting with stat
2025-06-11 18:00:32,499 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 18:00:32,561 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 18:00:32,561 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 18:00:32,566 - root - INFO - Starting StoryTeller API server...
2025-06-11 18:00:32,566 - root - INFO - Host: 0.0.0.0
2025-06-11 18:00:32,566 - root - INFO - Port: 5001
2025-06-11 18:00:32,566 - root - INFO - Debug mode: True
2025-06-11 18:00:32,569 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 18:00:32,577 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 18:15:24,841 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/api.py', reloading
2025-06-11 18:15:24,989 - werkzeug - INFO -  * Restarting with stat
2025-06-11 18:15:25,638 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 18:15:25,703 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 18:15:25,703 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 18:15:25,708 - root - INFO - Starting StoryTeller API server...
2025-06-11 18:15:25,708 - root - INFO - Host: 0.0.0.0
2025-06-11 18:15:25,708 - root - INFO - Port: 5001
2025-06-11 18:15:25,708 - root - INFO - Debug mode: True
2025-06-11 18:15:25,710 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 18:15:25,718 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 18:15:36,840 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/api.py', reloading
2025-06-11 18:15:36,909 - werkzeug - INFO -  * Restarting with stat
2025-06-11 18:15:37,496 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 18:15:37,550 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 18:15:37,550 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 18:15:37,554 - root - INFO - Starting StoryTeller API server...
2025-06-11 18:15:37,554 - root - INFO - Host: 0.0.0.0
2025-06-11 18:15:37,554 - root - INFO - Port: 5001
2025-06-11 18:15:37,554 - root - INFO - Debug mode: True
2025-06-11 18:15:37,557 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 18:15:37,563 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 18:16:10,892 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/storage/storage.py', reloading
2025-06-11 18:16:10,989 - werkzeug - INFO -  * Restarting with stat
2025-06-11 18:16:11,602 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 18:16:11,663 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 18:16:11,663 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 18:16:11,667 - root - INFO - Starting StoryTeller API server...
2025-06-11 18:16:11,667 - root - INFO - Host: 0.0.0.0
2025-06-11 18:16:11,668 - root - INFO - Port: 5001
2025-06-11 18:16:11,668 - root - INFO - Debug mode: True
2025-06-11 18:16:11,670 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 18:16:11,678 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 18:16:16,735 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/storage/storage.py', reloading
2025-06-11 18:16:16,812 - werkzeug - INFO -  * Restarting with stat
2025-06-11 18:16:17,231 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 18:16:17,271 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 18:16:17,271 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 18:16:17,275 - root - INFO - Starting StoryTeller API server...
2025-06-11 18:16:17,275 - root - INFO - Host: 0.0.0.0
2025-06-11 18:16:17,275 - root - INFO - Port: 5001
2025-06-11 18:16:17,275 - root - INFO - Debug mode: True
2025-06-11 18:16:17,277 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 18:16:17,282 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 19:16:39,543 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/api.py', reloading
2025-06-11 19:16:39,632 - werkzeug - INFO -  * Restarting with stat
2025-06-11 19:16:40,220 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 19:16:40,287 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 19:16:40,287 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 19:16:40,291 - root - INFO - Starting StoryTeller API server...
2025-06-11 19:16:40,291 - root - INFO - Host: 0.0.0.0
2025-06-11 19:16:40,291 - root - INFO - Port: 5001
2025-06-11 19:16:40,291 - root - INFO - Debug mode: True
2025-06-11 19:16:40,293 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 19:16:40,300 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 19:17:07,516 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/api.py', reloading
2025-06-11 19:17:07,588 - werkzeug - INFO -  * Restarting with stat
2025-06-11 19:17:08,122 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 19:17:08,185 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 19:17:08,185 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 19:17:08,189 - root - INFO - Starting StoryTeller API server...
2025-06-11 19:17:08,189 - root - INFO - Host: 0.0.0.0
2025-06-11 19:17:08,189 - root - INFO - Port: 5001
2025-06-11 19:17:08,189 - root - INFO - Debug mode: True
2025-06-11 19:17:08,192 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 19:17:08,197 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 19:17:24,383 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/storage/storage.py', reloading
2025-06-11 19:17:24,461 - werkzeug - INFO -  * Restarting with stat
2025-06-11 19:17:25,018 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 19:17:25,078 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 19:17:25,078 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 19:17:25,082 - root - INFO - Starting StoryTeller API server...
2025-06-11 19:17:25,082 - root - INFO - Host: 0.0.0.0
2025-06-11 19:17:25,082 - root - INFO - Port: 5001
2025-06-11 19:17:25,082 - root - INFO - Debug mode: True
2025-06-11 19:17:25,085 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 19:17:25,093 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 19:24:53,763 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 19:24:53,823 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 19:24:53,823 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 19:24:53,827 - root - INFO - Starting StoryTeller API server...
2025-06-11 19:24:53,827 - root - INFO - Host: 0.0.0.0
2025-06-11 19:24:53,827 - root - INFO - Port: 5001
2025-06-11 19:24:53,827 - root - INFO - Debug mode: True
2025-06-11 19:24:53,836 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5001
 * Running on http://10.0.0.243:5001
2025-06-11 19:24:53,836 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-11 19:24:53,837 - werkzeug - INFO -  * Restarting with stat
2025-06-11 19:24:54,245 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 19:24:54,286 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 19:24:54,286 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 19:24:54,290 - root - INFO - Starting StoryTeller API server...
2025-06-11 19:24:54,290 - root - INFO - Host: 0.0.0.0
2025-06-11 19:24:54,290 - root - INFO - Port: 5001
2025-06-11 19:24:54,290 - root - INFO - Debug mode: True
2025-06-11 19:24:54,292 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 19:24:54,300 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 19:24:57,270 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 19:24:57] "OPTIONS /api/status HTTP/1.1" 200 -
2025-06-11 19:24:57,271 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 19:24:57] "OPTIONS /api/status HTTP/1.1" 200 -
2025-06-11 19:24:57,274 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 19:24:57] "GET /api/status HTTP/1.1" 200 -
2025-06-11 19:24:57,276 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 19:24:57] "GET /api/status HTTP/1.1" 200 -
2025-06-11 19:25:07,800 - app.services.firebase_service - INFO - Retrieved 2 stories
2025-06-11 19:25:07,801 - app.storage.storage - INFO - Retrieved 2 stories
2025-06-11 19:25:07,803 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 19:25:07] "OPTIONS /api/stories HTTP/1.1" 200 -
2025-06-11 19:25:07,806 - app.auth - INFO - Authentication successful for user: sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-11 19:25:07,945 - app.services.firebase_service - INFO - Retrieved 2 stories for user sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-11 19:25:07,945 - app.storage.storage - INFO - Retrieved 2 stories for user sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-11 19:25:08,174 - app.services.ai_service - INFO - Generated big story goal: Forge a unique cultivation path rejected by the world, overcoming divine resistance to prove your Dao is supreme.
2025-06-11 19:25:08,175 - app.services.ai_service - INFO - Using cultivation genre for initial story
2025-06-11 19:25:08,175 - app.services.story_planner - INFO - Calculated number of arcs: 7 based on 50 chapters and 7 chapters per arc
2025-06-11 19:25:08,175 - app.services.story_planner - INFO - Found exact match for goal: 'Forge a unique cultivation path rejected by the world, overcoming divine resistance to prove your Dao is supreme.'
2025-06-11 19:25:08,176 - app.services.story_planner - INFO - Generated 7 new arc goals for theme: 'unique_dao'
2025-06-11 19:25:08,176 - app.genres.cultivation_setting - INFO - Generated 7 arc goals. Initial arc goal: Challenge the heavens or divine guardians defending the status quo.
2025-06-11 19:25:08,176 - app.genres.cultivation_setting - INFO - Generating cultivation progression story for Ali
2025-06-11 19:25:08,176 - app.models.base_genre - INFO - Generating story for Ali
2025-06-11 19:25:19,554 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-11 19:25:19,559 - app.models.base_genre - INFO - ðŸŽ­ GENRE GPT RESPONSE (2615 chars):
2025-06-11 19:25:19,559 - app.models.base_genre - INFO - ============================================================
2025-06-11 19:25:19,559 - app.models.base_genre - INFO - [STORY]
Ali stood at the edge of the Heavenly Crest Sect's training grounds, feeling the weight of his past life's knowledge pressing against his mind. Images of ancient cultivation techniques flooded his thoughts, pushing him to forge a path unlike any other.

---
The sect elders approached, their expressions a mix of curiosity and skepticism. "Ali, show us your progress in the Lightning Qi technique today," Elder Jin commanded, eyeing him closely.

With a focused gaze, Ali channeled his Qi, summoning crackling bolts of lightning that danced around him, illuminating the training grounds in a dazzling display of power.

---
As the lightning Qi pulsed around him, a sudden surge of resistance filled the air. A divine guardian materialized, its form shimmering with celestial energy, ready to test Ali's resolve.

"You dare to challenge the heavens with your mere mortal techniques?" the guardian boomed, preparing to strike.

---
Ali, undeterred, analyzed the guardian's movements with a calm demeanor. Drawing on insights from his past life, he swiftly countered the guardian's attack, redirecting its celestial energy back at it with precision.

The guardian staggered, surprised by Ali's unconventional approach, but its resolve remained unyielding.

---
In a moment of clarity, Ali realized the guardian's weakness lay not in brute force but in understanding the balance of celestial energies. With a calculated move, he unleashed a combination of Lightning and Wind Qi, disrupting the guardian's equilibrium.

As the guardian faltered, its form flickering, Ali saw a glimpse of progress in his quest to challenge the divine resistance.

---
The elders watched in awe as the guardian dissipated, acknowledging Ali's unorthodox methods with a newfound respect. "Your path may be unconventional, but it holds promise," Elder Jin admitted, impressed by Ali's innovative approach.

With a determined gleam in his eyes, Ali knew this was just the beginning of his journey to forge a unique cultivation path.

---

[CHOICES]
1. Channel the Lightning and Wind Qi to seek guidance from the ancient spirit of the training grounds, unlocking forgotten secrets to strengthen your connection with the elements.
2. Approach Elder Jin to discuss the possibility of forming a new cultivation technique combining Lightning and Wind Qi, aiming to revolutionize the sect's traditional practices.
3. Meditate under the moonlit sky to delve deeper into the mysteries of celestial energies, seeking to unveil a hidden realm where divine guardians challenge cultivators to prove their worth in unconventional ways.
[/CHOICES]
2025-06-11 19:25:19,559 - app.models.base_genre - INFO - ============================================================
2025-06-11 19:25:19,561 - app.models.base_genre - INFO - Successfully parsed genre response: story=2018 chars, choices=3
2025-06-11 19:25:19,562 - app.storage.storage - INFO - Using provided arc goals: 7 goals
2025-06-11 19:25:19,562 - app.storage.storage - INFO - Using provided arc goal: Challenge the heavens or divine guardians defending the status quo.
2025-06-11 19:25:19,562 - app.storage.storage - INFO - Initialized memory with big goal: 'Forge a unique cultivation path rejected by the world, overcoming divine resistance to prove your Dao is supreme.' and arc goal: 'Challenge the heavens or divine guardians defending the status quo.'
2025-06-11 19:25:19,562 - app.storage.storage - INFO - Arc progression: 1/7, Chapter: 1/7
2025-06-11 19:25:19,562 - app.storage.storage - INFO - Overall story progress: Chapter 1/50 (2%)
2025-06-11 19:25:19,713 - app.services.firebase_service - INFO - Saved story story_1749695119_94a410cf: Ali's cultivation shonen
2025-06-11 19:25:19,713 - app.storage.storage - INFO - Saved story story_1749695119_94a410cf: Ali's cultivation shonen
2025-06-11 19:25:19,714 - app.storage.storage - INFO - Created new story: story_1749695119_94a410cf: Ali's cultivation shonen
2025-06-11 19:25:19,938 - app.services.usage_service - INFO - Updated usage for user: sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-11 19:25:20,937 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 19:25:20] "POST /api/stories HTTP/1.1" 200 -
2025-06-11 19:25:21,129 - app.services.firebase_service - INFO - Retrieved story story_1749695119_94a410cf: Ali's cultivation shonen
2025-06-11 19:25:21,129 - app.storage.storage - INFO - Retrieved story story_1749695119_94a410cf: Ali's cultivation shonen
2025-06-11 19:25:21,130 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 19:25:21] "OPTIONS /api/stories/story_1749695119_94a410cf HTTP/1.1" 200 -
2025-06-11 19:25:21,154 - app.services.firebase_service - INFO - Retrieved story story_1749695119_94a410cf: Ali's cultivation shonen
2025-06-11 19:25:21,155 - app.storage.storage - INFO - Retrieved story story_1749695119_94a410cf: Ali's cultivation shonen
2025-06-11 19:25:21,156 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 19:25:21] "OPTIONS /api/stories/story_1749695119_94a410cf HTTP/1.1" 200 -
2025-06-11 19:25:21,263 - app.services.firebase_service - INFO - Retrieved story story_1749695119_94a410cf: Ali's cultivation shonen
2025-06-11 19:25:21,263 - app.storage.storage - INFO - Retrieved story story_1749695119_94a410cf: Ali's cultivation shonen
2025-06-11 19:25:21,265 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 19:25:21] "GET /api/stories/story_1749695119_94a410cf HTTP/1.1" 200 -
2025-06-11 19:25:21,388 - app.services.firebase_service - INFO - Retrieved story story_1749695119_94a410cf: Ali's cultivation shonen
2025-06-11 19:25:21,388 - app.storage.storage - INFO - Retrieved story story_1749695119_94a410cf: Ali's cultivation shonen
2025-06-11 19:25:21,389 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 19:25:21] "GET /api/stories/story_1749695119_94a410cf HTTP/1.1" 200 -
2025-06-11 19:27:08,774 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 19:27:08] "OPTIONS /api/status HTTP/1.1" 200 -
2025-06-11 19:27:08,776 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 19:27:08] "OPTIONS /api/status HTTP/1.1" 200 -
2025-06-11 19:27:08,778 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 19:27:08] "GET /api/status HTTP/1.1" 200 -
2025-06-11 19:27:08,780 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 19:27:08] "GET /api/status HTTP/1.1" 200 -
2025-06-11 19:31:14,254 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/services/story_planner.py', reloading
2025-06-11 19:31:16,339 - werkzeug - INFO -  * Restarting with stat
2025-06-11 19:31:16,894 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 19:31:16,948 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 19:31:16,949 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 19:31:16,953 - root - INFO - Starting StoryTeller API server...
2025-06-11 19:31:16,953 - root - INFO - Host: 0.0.0.0
2025-06-11 19:31:16,953 - root - INFO - Port: 5001
2025-06-11 19:31:16,953 - root - INFO - Debug mode: True
2025-06-11 19:31:16,955 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 19:31:16,961 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 19:31:29,086 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/services/story_planner.py', reloading
2025-06-11 19:31:29,172 - werkzeug - INFO -  * Restarting with stat
2025-06-11 19:31:29,612 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 19:31:29,654 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 19:31:29,654 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 19:31:29,658 - root - INFO - Starting StoryTeller API server...
2025-06-11 19:31:29,658 - root - INFO - Host: 0.0.0.0
2025-06-11 19:31:29,658 - root - INFO - Port: 5001
2025-06-11 19:31:29,658 - root - INFO - Debug mode: True
2025-06-11 19:31:29,660 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 19:31:29,666 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 19:31:40,803 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/services/story_planner.py', reloading
2025-06-11 19:31:40,908 - werkzeug - INFO -  * Restarting with stat
2025-06-11 19:31:41,400 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 19:31:41,444 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 19:31:41,444 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 19:31:41,448 - root - INFO - Starting StoryTeller API server...
2025-06-11 19:31:41,448 - root - INFO - Host: 0.0.0.0
2025-06-11 19:31:41,448 - root - INFO - Port: 5001
2025-06-11 19:31:41,448 - root - INFO - Debug mode: True
2025-06-11 19:31:41,450 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 19:31:41,460 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 19:31:53,586 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/services/story_planner.py', reloading
2025-06-11 19:31:53,666 - werkzeug - INFO -  * Restarting with stat
2025-06-11 19:31:54,183 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 19:31:54,227 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 19:31:54,227 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 19:31:54,231 - root - INFO - Starting StoryTeller API server...
2025-06-11 19:31:54,231 - root - INFO - Host: 0.0.0.0
2025-06-11 19:31:54,231 - root - INFO - Port: 5001
2025-06-11 19:31:54,231 - root - INFO - Debug mode: True
2025-06-11 19:31:54,233 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 19:31:54,239 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 19:32:08,383 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/services/story_planner.py', reloading
2025-06-11 19:32:08,469 - werkzeug - INFO -  * Restarting with stat
2025-06-11 19:32:08,948 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 19:32:08,989 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 19:32:08,989 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 19:32:08,993 - root - INFO - Starting StoryTeller API server...
2025-06-11 19:32:08,993 - root - INFO - Host: 0.0.0.0
2025-06-11 19:32:08,993 - root - INFO - Port: 5001
2025-06-11 19:32:08,993 - root - INFO - Debug mode: True
2025-06-11 19:32:08,995 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 19:32:09,001 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 19:32:17,087 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/services/story_planner.py', reloading
2025-06-11 19:32:17,163 - werkzeug - INFO -  * Restarting with stat
2025-06-11 19:32:17,580 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 19:32:17,620 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 19:32:17,620 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 19:32:17,624 - root - INFO - Starting StoryTeller API server...
2025-06-11 19:32:17,624 - root - INFO - Host: 0.0.0.0
2025-06-11 19:32:17,624 - root - INFO - Port: 5001
2025-06-11 19:32:17,624 - root - INFO - Debug mode: True
2025-06-11 19:32:17,626 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 19:32:17,631 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 19:32:26,721 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/services/story_planner.py', reloading
2025-06-11 19:32:26,804 - werkzeug - INFO -  * Restarting with stat
2025-06-11 19:32:27,257 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-11 19:32:27,298 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-11 19:32:27,298 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-11 19:32:27,302 - root - INFO - Starting StoryTeller API server...
2025-06-11 19:32:27,302 - root - INFO - Host: 0.0.0.0
2025-06-11 19:32:27,302 - root - INFO - Port: 5001
2025-06-11 19:32:27,302 - root - INFO - Debug mode: True
2025-06-11 19:32:27,304 - werkzeug - WARNING -  * Debugger is active!
2025-06-11 19:32:27,310 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-11 19:40:20,841 - app.services.firebase_service - INFO - Retrieved 0 stories
2025-06-11 19:40:20,842 - app.storage.storage - INFO - Retrieved 0 stories
2025-06-11 19:40:20,844 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 19:40:20] "OPTIONS /api/stories HTTP/1.1" 200 -
2025-06-11 19:40:20,849 - app.auth - INFO - Authentication successful for user: sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-11 19:40:21,076 - app.services.firebase_service - INFO - Retrieved 0 stories for user sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-11 19:40:21,076 - app.storage.storage - INFO - Retrieved 0 stories for user sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-11 19:40:21,202 - app.services.usage_service - INFO - Auto-correcting count for sTttyhSg8VdcI4Axw1Nj9WOBXv33: 3 -> 0
2025-06-11 19:40:21,572 - app.services.ai_service - INFO - Generated big story goal: Forge a unique cultivation path rejected by the world, overcoming divine resistance to prove your Dao is supreme.
2025-06-11 19:40:21,573 - app.services.ai_service - INFO - Using cultivation genre for initial story
2025-06-11 19:40:21,573 - app.services.story_planner - INFO - Calculated number of arcs: 7 based on 50 chapters and 7 chapters per arc
2025-06-11 19:40:21,574 - app.services.story_planner - INFO - Found exact match for goal: 'Forge a unique cultivation path rejected by the world, overcoming divine resistance to prove your Dao is supreme.'
2025-06-11 19:40:21,574 - app.services.story_planner - INFO - Generated 7 new arc goals for theme: 'unique_dao'
2025-06-11 19:40:21,574 - app.genres.cultivation_setting - INFO - Generated 7 arc goals. Initial arc goal: Attract disciples who believe in your method.
2025-06-11 19:40:21,574 - app.genres.cultivation_setting - INFO - Generating cultivation progression story for Ali
2025-06-11 19:40:21,575 - app.models.base_genre - INFO - Generating story for Ali
2025-06-11 19:40:31,066 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-11 19:40:31,072 - app.models.base_genre - INFO - ðŸŽ­ GENRE GPT RESPONSE (2887 chars):
2025-06-11 19:40:31,072 - app.models.base_genre - INFO - ============================================================
2025-06-11 19:40:31,073 - app.models.base_genre - INFO - [STORY]
Ali, a reincarnated soul with memories of a past life, stands atop a mist-covered mountain, his keen eyes scanning the horizon. In the distance, a group of young cultivators spar with wooden swords, their movements fluid but lacking finesse. As the sun rises, casting a golden hue over the scene, Ali's expression turns thoughtful. ---
Ali descends the mountain, catching the attention of the young cultivators. Curiosity sparks in their eyes as they watch the enigmatic figure approach. One of them, a bold youth with fiery qi swirling around him, steps forward. "Who are you? What brings you here?" he demands, chin held high. ---
Ali smiles, a knowing glint in his eyes. "I am Ali, a traveler seeking those who dare to forge their own path in cultivation. Who among you is brave enough to follow me?" His words hang in the air, stirring a sense of excitement and uncertainty among the group. ---
The fiery youth steps up, determination etched on his face. "I will follow you, Ali. Show me the path to greatness!" Ali nods approvingly, recognizing the spark of potential in the young cultivator. ---
Together, Ali and the fiery youth set off on a journey, traversing lush forests and rocky terrain. Along the way, Ali imparts wisdom on the cultivation techniques he calls "Storm's Embrace," a powerful form that harnesses the turbulent qi of a storm for lightning-fast strikes. ---
As they reach a clearing, a sudden rumble shakes the earth, and a colossal beast emerges from the shadows, its eyes glowing with malice. The fiery youth tenses, ready for battle, but Ali holds out a hand, his gaze unwavering. ---
"The path to greatness is not always paved with bloodshed," Ali says calmly, stepping forward to face the beast alone. With a deep breath, he channels his qi, creating a protective barrier of swirling winds around him. The beast roars, but Ali stands firm, his resolve unshakable. ---
In a surprising display of power, Ali communicates with the beast through the ancient language of beasts, calming its rage and earning its respect. The creature bows its head, allowing Ali and the fiery youth to pass unharmed. ---
As they continue their journey, the fiery youth looks at Ali with newfound respect and admiration. "You truly are a master of the unexpected, Ali. I am honored to follow you." Ali smiles, his eyes reflecting the vast potential that lies ahead. The journey to attract disciples who believe in his method has only just begun. 

[/STORY]

[CHOICES]
1. Channel the storm's qi to create a diversion, allowing the fiery youth to sneak past the next obstacle.
2. Unveil a hidden cultivation technique, "Whispering Shadows," to cloak your group from the prying eyes of the sects hunting for renegade cultivators.
3. Initiate a friendly spar with the fiery youth to test his growth and determination, strengthening your bond through shared combat.
[/CHOICES]
2025-06-11 19:40:31,074 - app.models.base_genre - INFO - ============================================================
2025-06-11 19:40:31,075 - app.models.base_genre - INFO - Successfully parsed genre response: story=2453 chars, choices=3
2025-06-11 19:40:31,076 - app.storage.storage - INFO - Using provided arc goals: 7 goals
2025-06-11 19:40:31,076 - app.storage.storage - INFO - Using provided arc goal: Attract disciples who believe in your method.
2025-06-11 19:40:31,076 - app.storage.storage - INFO - Initialized memory with big goal: 'Forge a unique cultivation path rejected by the world, overcoming divine resistance to prove your Dao is supreme.' and arc goal: 'Attract disciples who believe in your method.'
2025-06-11 19:40:31,076 - app.storage.storage - INFO - Arc progression: 1/7, Chapter: 1/7
2025-06-11 19:40:31,076 - app.storage.storage - INFO - Overall story progress: Chapter 1/50 (2%)
2025-06-11 19:40:31,535 - app.services.firebase_service - INFO - Saved story story_1749696031_608cb3e5: Ali's cultivation shonen
2025-06-11 19:40:31,536 - app.storage.storage - INFO - Saved story story_1749696031_608cb3e5: Ali's cultivation shonen
2025-06-11 19:40:31,536 - app.storage.storage - INFO - Created new story: story_1749696031_608cb3e5: Ali's cultivation shonen
2025-06-11 19:40:31,898 - app.services.usage_service - INFO - Updated usage for user: sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-11 19:40:32,602 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 19:40:32] "POST /api/stories HTTP/1.1" 200 -
2025-06-11 19:40:32,830 - app.services.firebase_service - INFO - Retrieved story story_1749696031_608cb3e5: Ali's cultivation shonen
2025-06-11 19:40:32,831 - app.storage.storage - INFO - Retrieved story story_1749696031_608cb3e5: Ali's cultivation shonen
2025-06-11 19:40:32,832 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 19:40:32] "OPTIONS /api/stories/story_1749696031_608cb3e5 HTTP/1.1" 200 -
2025-06-11 19:40:33,138 - app.services.firebase_service - INFO - Retrieved story story_1749696031_608cb3e5: Ali's cultivation shonen
2025-06-11 19:40:33,139 - app.services.firebase_service - INFO - Retrieved story story_1749696031_608cb3e5: Ali's cultivation shonen
2025-06-11 19:40:33,139 - app.storage.storage - INFO - Retrieved story story_1749696031_608cb3e5: Ali's cultivation shonen
2025-06-11 19:40:33,140 - app.storage.storage - INFO - Retrieved story story_1749696031_608cb3e5: Ali's cultivation shonen
2025-06-11 19:40:33,140 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 19:40:33] "OPTIONS /api/stories/story_1749696031_608cb3e5 HTTP/1.1" 200 -
2025-06-11 19:40:33,141 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 19:40:33] "GET /api/stories/story_1749696031_608cb3e5 HTTP/1.1" 200 -
2025-06-11 19:40:33,241 - app.services.firebase_service - INFO - Retrieved story story_1749696031_608cb3e5: Ali's cultivation shonen
2025-06-11 19:40:33,242 - app.storage.storage - INFO - Retrieved story story_1749696031_608cb3e5: Ali's cultivation shonen
2025-06-11 19:40:33,243 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 19:40:33] "GET /api/stories/story_1749696031_608cb3e5 HTTP/1.1" 200 -
2025-06-11 19:40:39,728 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 19:40:39] "OPTIONS /api/stories/story_1749696031_608cb3e5/choices/1 HTTP/1.1" 200 -
2025-06-11 19:40:39,731 - app.auth - INFO - Authentication successful for user: sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-11 19:40:39,833 - app.services.firebase_service - INFO - Retrieved story story_1749696031_608cb3e5: Ali's cultivation shonen
2025-06-11 19:40:39,834 - app.storage.storage - INFO - Retrieved story story_1749696031_608cb3e5: Ali's cultivation shonen
2025-06-11 19:40:42,530 - app.services.usage_service - INFO - Updated usage for user: sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-11 19:40:42,841 - app.services.firebase_service - INFO - Retrieved story story_1749696031_608cb3e5: Ali's cultivation shonen
2025-06-11 19:40:42,842 - app.storage.storage - INFO - Retrieved story story_1749696031_608cb3e5: Ali's cultivation shonen
2025-06-11 19:40:43,251 - app.services.firebase_service - INFO - Saved story story_1749696031_608cb3e5: Ali's cultivation shonen
2025-06-11 19:40:43,252 - app.storage.storage - INFO - Saved story story_1749696031_608cb3e5: Ali's cultivation shonen
2025-06-11 19:40:43,252 - app.storage.storage - INFO - Saved choice 1 for node initial in story story_1749696031_608cb3e5
2025-06-11 19:40:43,252 - app.api - INFO - Generating continuation for story story_1749696031_608cb3e5, choice 1
2025-06-11 19:40:43,253 - app.api - INFO - Character: Ali, Setting: cultivation
2025-06-11 19:40:43,253 - app.api - INFO - Selected choice: 'Channel the storm's qi to create a diversion, allowing the fiery youth to sneak past the next obstacle.'
2025-06-11 19:40:43,253 - app.services.ai_service - INFO - Memory before processing - chapters_completed: 0, current_arc_index: 0, chapters_per_arc: 7
2025-06-11 19:40:43,253 - app.services.ai_service - INFO - Memory arcs: 7 arcs total
2025-06-11 19:40:43,253 - app.services.ai_service - INFO - Current arc: 'Attract disciples who believe in your method.'
2025-06-11 19:40:43,253 - app.services.ai_service - INFO - Chapter 1 of arc 'Attract disciples who believe in your method.' completed
2025-06-11 19:40:43,253 - app.services.ai_service - INFO - Using cultivation genre for story continuation
2025-06-11 19:40:43,253 - app.services.ai_service - INFO - Using big story goal for cultivation continuation: Forge a unique cultivation path rejected by the world, overcoming divine resistance to prove your Dao is supreme.
2025-06-11 19:40:43,254 - app.genres.cultivation_setting - INFO - Continuing cultivation progression story for Ali with style: shonen
2025-06-11 19:40:43,254 - app.models.base_genre - INFO - Generating story for Ali
2025-06-11 19:40:49,291 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-11 19:40:49,296 - app.models.base_genre - INFO - ðŸŽ­ GENRE GPT RESPONSE (2965 chars):
2025-06-11 19:40:49,297 - app.models.base_genre - INFO - ============================================================
2025-06-11 19:40:49,297 - app.models.base_genre - INFO - [STORY]
Dark clouds gather overhead as Ali focuses his mind, tapping into the storm's qi that swirls around him. The air crackles with electricity, and a surge of power courses through his veins, eager to be unleashed. With a sweeping motion of his hand, Ali releases the pent-up energy into the sky, causing a dazzling display of lightning to streak across the clouds, illuminating the path ahead.

The sudden burst of light and sound disorients the looming threat, a group of shadowy figures lurking in the trees, their intent unknown. As the fiery youth seizes the opportunity to slip past undetected, Ali stands his ground, his eyes sharp and vigilant, ready for whatever may come next.

--- 

In the aftermath of the diversion, the shadowy figures reveal themselves to be a band of rogue cultivators, their qi tainted with darkness and greed. One of them, a menacing figure with eyes as cold as ice, steps forward, a wicked smile playing on his lips. "Well, well, what do we have here? A little trickster and his naive disciple," he sneers, his aura exuding malice.

Ali's expression remains calm, his gaze unwavering as he assesses the situation. "We seek no quarrel with you, but we will not hesitate to defend ourselves if necessary," he declares, his voice carrying the weight of authority and conviction.

---

The rogue cultivators laugh mockingly, their weapons at the ready, eager for a fight. The fiery youth clenches his fists, his fiery qi blazing in response to the threat. "Let's show them the power of Storm's Embrace, Ali," he says, his voice steady despite the tension in the air.

Ali nods in agreement, his own qi resonating with the turbulent energy of the storm. As the first rogue cultivator charges forward, Ali moves with astonishing speed, his strikes precise and calculated. With each blow, he weaves a dance of wind and lightning, overwhelming his opponents with a display of mastery that leaves them in awe.

---

As the last rogue cultivator falls to the ground, defeated but unharmed, Ali turns to the fiery youth, a silent understanding passing between them. The fiery youth's eyes gleam with newfound respect and determination, his belief in Ali's path strengthened by the display of power and skill.

"Our journey is just beginning," Ali says, his voice carrying a promise of challenges and triumphs yet to come. The path to attracting disciples who believe in his method is fraught with obstacles, but with each victory, Ali's reputation as a master cultivator grows stronger.
[/STORY]

[CHOICES]
1. Confront the rogue cultivators with a peaceful resolution, offering them a chance to change their ways and join your cause.
2. Uncover the source of darkness tainting the rogue cultivators' qi, seeking to cleanse and redeem them through empathy and understanding.
3. Seek out a hidden sanctuary rumored to hold ancient secrets of cultivation, where you may find allies who share your vision of forging a unique path.
[/CHOICES]
2025-06-11 19:40:49,298 - app.models.base_genre - INFO - ============================================================
2025-06-11 19:40:49,298 - app.models.base_genre - INFO - Successfully parsed genre response: story=2506 chars, choices=3
2025-06-11 19:40:49,298 - app.services.story_planner - INFO - Extracting characters from content of length: 2506
2025-06-11 19:40:49,299 - app.services.story_planner - INFO - Content start: Dark clouds gather overhead as Ali focuses his mind, tapping into the storm's qi that swirls around him. The air crackles with electricity, and a surge of power courses through his veins, eager to be 
2025-06-11 19:40:49,418 - app.services.firebase_service - INFO - Retrieved story story_1749696031_608cb3e5: Ali's cultivation shonen
2025-06-11 19:40:49,419 - app.storage.storage - INFO - Retrieved story story_1749696031_608cb3e5: Ali's cultivation shonen
2025-06-11 19:40:49,419 - app.storage.storage - INFO - Updated story memory with node node_4277027475
2025-06-11 19:40:49,700 - app.services.firebase_service - INFO - Saved story story_1749696031_608cb3e5: Ali's cultivation shonen
2025-06-11 19:40:49,701 - app.storage.storage - INFO - Saved story story_1749696031_608cb3e5: Ali's cultivation shonen
2025-06-11 19:40:49,701 - app.storage.storage - INFO - Added node node_4277027475 to story story_1749696031_608cb3e5
2025-06-11 19:40:50,116 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 19:40:50] "POST /api/stories/story_1749696031_608cb3e5/choices/1 HTTP/1.1" 200 -
2025-06-11 19:40:55,838 - app.services.firebase_service - INFO - Retrieved story story_1749696031_608cb3e5: Ali's cultivation shonen
2025-06-11 19:40:55,838 - app.storage.storage - INFO - Retrieved story story_1749696031_608cb3e5: Ali's cultivation shonen
2025-06-11 19:40:55,839 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 19:40:55] "OPTIONS /api/stories/story_1749696031_608cb3e5 HTTP/1.1" 200 -
2025-06-11 19:40:56,068 - app.services.firebase_service - INFO - Retrieved story story_1749696031_608cb3e5: Ali's cultivation shonen
2025-06-11 19:40:56,069 - app.storage.storage - INFO - Retrieved story story_1749696031_608cb3e5: Ali's cultivation shonen
2025-06-11 19:40:56,071 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 19:40:56] "OPTIONS /api/stories/story_1749696031_608cb3e5 HTTP/1.1" 200 -
2025-06-11 19:40:56,077 - app.services.firebase_service - INFO - Retrieved story story_1749696031_608cb3e5: Ali's cultivation shonen
2025-06-11 19:40:56,077 - app.storage.storage - INFO - Retrieved story story_1749696031_608cb3e5: Ali's cultivation shonen
2025-06-11 19:40:56,079 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 19:40:56] "GET /api/stories/story_1749696031_608cb3e5 HTTP/1.1" 200 -
2025-06-11 19:40:56,199 - app.services.firebase_service - INFO - Retrieved story story_1749696031_608cb3e5: Ali's cultivation shonen
2025-06-11 19:40:56,199 - app.storage.storage - INFO - Retrieved story story_1749696031_608cb3e5: Ali's cultivation shonen
2025-06-11 19:40:56,200 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 19:40:56] "GET /api/stories/story_1749696031_608cb3e5 HTTP/1.1" 200 -
2025-06-11 19:40:58,877 - app.services.firebase_service - INFO - Retrieved 1 stories
2025-06-11 19:40:58,877 - app.storage.storage - INFO - Retrieved 1 stories
2025-06-11 19:40:58,879 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 19:40:58] "OPTIONS /api/stories HTTP/1.1" 200 -
2025-06-11 19:40:59,087 - app.services.firebase_service - INFO - Retrieved 1 stories
2025-06-11 19:40:59,087 - app.storage.storage - INFO - Retrieved 1 stories
2025-06-11 19:40:59,090 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 19:40:59] "OPTIONS /api/stories HTTP/1.1" 200 -
2025-06-11 19:40:59,164 - app.services.firebase_service - INFO - Retrieved 1 stories for user sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-11 19:40:59,164 - app.storage.storage - INFO - Retrieved 1 stories for user sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-11 19:40:59,166 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 19:40:59] "GET /api/stories HTTP/1.1" 200 -
2025-06-11 19:40:59,288 - app.services.firebase_service - INFO - Retrieved 1 stories for user sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-11 19:40:59,289 - app.storage.storage - INFO - Retrieved 1 stories for user sTttyhSg8VdcI4Axw1Nj9WOBXv33
2025-06-11 19:40:59,290 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 19:40:59] "GET /api/stories HTTP/1.1" 200 -
2025-06-11 19:41:08,185 - app.services.firebase_service - INFO - Retrieved story story_1749696031_608cb3e5: Ali's cultivation shonen
2025-06-11 19:41:08,185 - app.storage.storage - INFO - Retrieved story story_1749696031_608cb3e5: Ali's cultivation shonen
2025-06-11 19:41:08,187 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 19:41:08] "OPTIONS /api/stories/story_1749696031_608cb3e5 HTTP/1.1" 200 -
2025-06-11 19:41:08,430 - app.services.firebase_service - INFO - Retrieved story story_1749696031_608cb3e5: Ali's cultivation shonen
2025-06-11 19:41:08,431 - app.storage.storage - INFO - Retrieved story story_1749696031_608cb3e5: Ali's cultivation shonen
2025-06-11 19:41:08,432 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 19:41:08] "OPTIONS /api/stories/story_1749696031_608cb3e5 HTTP/1.1" 200 -
2025-06-11 19:41:08,444 - app.services.firebase_service - INFO - Retrieved story story_1749696031_608cb3e5: Ali's cultivation shonen
2025-06-11 19:41:08,445 - app.storage.storage - INFO - Retrieved story story_1749696031_608cb3e5: Ali's cultivation shonen
2025-06-11 19:41:08,445 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 19:41:08] "GET /api/stories/story_1749696031_608cb3e5 HTTP/1.1" 200 -
2025-06-11 19:41:08,557 - app.services.firebase_service - INFO - Retrieved story story_1749696031_608cb3e5: Ali's cultivation shonen
2025-06-11 19:41:08,558 - app.storage.storage - INFO - Retrieved story story_1749696031_608cb3e5: Ali's cultivation shonen
2025-06-11 19:41:08,558 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 19:41:08] "GET /api/stories/story_1749696031_608cb3e5 HTTP/1.1" 200 -
2025-06-11 19:41:21,601 - app.services.firebase_service - INFO - Retrieved story story_1749696031_608cb3e5: Ali's cultivation shonen
2025-06-11 19:41:21,602 - app.storage.storage - INFO - Retrieved story story_1749696031_608cb3e5: Ali's cultivation shonen
2025-06-11 19:41:21,603 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 19:41:21] "OPTIONS /api/stories/story_1749696031_608cb3e5 HTTP/1.1" 200 -
2025-06-11 19:41:21,718 - app.services.firebase_service - INFO - Retrieved story story_1749696031_608cb3e5: Ali's cultivation shonen
2025-06-11 19:41:21,718 - app.storage.storage - INFO - Retrieved story story_1749696031_608cb3e5: Ali's cultivation shonen
2025-06-11 19:41:21,719 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 19:41:21] "GET /api/stories/story_1749696031_608cb3e5 HTTP/1.1" 200 -
2025-06-11 19:41:21,740 - app.services.firebase_service - INFO - Retrieved story story_1749696031_608cb3e5: Ali's cultivation shonen
2025-06-11 19:41:21,741 - app.storage.storage - INFO - Retrieved story story_1749696031_608cb3e5: Ali's cultivation shonen
2025-06-11 19:41:21,742 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 19:41:21] "OPTIONS /api/stories/story_1749696031_608cb3e5 HTTP/1.1" 200 -
2025-06-11 19:41:22,060 - app.services.firebase_service - INFO - Retrieved story story_1749696031_608cb3e5: Ali's cultivation shonen
2025-06-11 19:41:22,061 - app.storage.storage - INFO - Retrieved story story_1749696031_608cb3e5: Ali's cultivation shonen
2025-06-11 19:41:22,062 - werkzeug - INFO - 127.0.0.1 - - [11/Jun/2025 19:41:22] "GET /api/stories/story_1749696031_608cb3e5 HTTP/1.1" 200 -
2025-06-12 09:32:57,781 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/services/story_planner.py', reloading
2025-06-12 09:32:59,883 - werkzeug - INFO -  * Restarting with stat
2025-06-12 09:33:00,731 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-12 09:33:00,795 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-12 09:33:00,795 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-12 09:33:00,799 - root - INFO - Starting StoryTeller API server...
2025-06-12 09:33:00,800 - root - INFO - Host: 0.0.0.0
2025-06-12 09:33:00,800 - root - INFO - Port: 5001
2025-06-12 09:33:00,800 - root - INFO - Debug mode: True
2025-06-12 09:33:00,802 - werkzeug - WARNING -  * Debugger is active!
2025-06-12 09:33:00,809 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-12 09:33:02,828 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/services/story_planner.py', reloading
2025-06-12 09:33:02,900 - werkzeug - INFO -  * Restarting with stat
2025-06-12 09:33:03,349 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-12 09:33:03,393 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-12 09:33:03,393 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-12 09:33:03,397 - root - INFO - Starting StoryTeller API server...
2025-06-12 09:33:03,397 - root - INFO - Host: 0.0.0.0
2025-06-12 09:33:03,397 - root - INFO - Port: 5001
2025-06-12 09:33:03,397 - root - INFO - Debug mode: True
2025-06-12 09:33:03,399 - werkzeug - WARNING -  * Debugger is active!
2025-06-12 09:33:03,406 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-12 09:37:29,718 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/services/story_planner.py', reloading
2025-06-12 09:37:29,797 - werkzeug - INFO -  * Restarting with stat
2025-06-12 09:37:30,437 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-12 09:37:30,498 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-12 09:37:30,498 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-12 09:37:30,502 - root - INFO - Starting StoryTeller API server...
2025-06-12 09:37:30,502 - root - INFO - Host: 0.0.0.0
2025-06-12 09:37:30,502 - root - INFO - Port: 5001
2025-06-12 09:37:30,502 - root - INFO - Debug mode: True
2025-06-12 09:37:30,504 - werkzeug - WARNING -  * Debugger is active!
2025-06-12 09:37:30,511 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-12 09:37:44,653 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_setting.py', reloading
2025-06-12 09:37:44,737 - werkzeug - INFO -  * Restarting with stat
2025-06-12 09:37:45,275 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-12 09:37:45,330 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-12 09:37:45,331 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-12 09:37:45,335 - root - INFO - Starting StoryTeller API server...
2025-06-12 09:37:45,335 - root - INFO - Host: 0.0.0.0
2025-06-12 09:37:45,335 - root - INFO - Port: 5001
2025-06-12 09:37:45,335 - root - INFO - Debug mode: True
2025-06-12 09:37:45,337 - werkzeug - WARNING -  * Debugger is active!
2025-06-12 09:37:45,343 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-12 09:37:58,459 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_setting.py', reloading
2025-06-12 09:37:58,525 - werkzeug - INFO -  * Restarting with stat
2025-06-12 09:37:59,042 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-12 09:37:59,090 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-12 09:37:59,090 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-12 09:37:59,095 - root - INFO - Starting StoryTeller API server...
2025-06-12 09:37:59,095 - root - INFO - Host: 0.0.0.0
2025-06-12 09:37:59,095 - root - INFO - Port: 5001
2025-06-12 09:37:59,095 - root - INFO - Debug mode: True
2025-06-12 09:37:59,097 - werkzeug - WARNING -  * Debugger is active!
2025-06-12 09:37:59,102 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-12 09:42:40,584 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/services/story_planner.py', reloading
2025-06-12 09:42:40,653 - werkzeug - INFO -  * Restarting with stat
2025-06-12 09:42:41,254 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-12 09:42:41,316 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-12 09:42:41,316 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-12 09:42:41,320 - root - INFO - Starting StoryTeller API server...
2025-06-12 09:42:41,320 - root - INFO - Host: 0.0.0.0
2025-06-12 09:42:41,320 - root - INFO - Port: 5001
2025-06-12 09:42:41,320 - root - INFO - Debug mode: True
2025-06-12 09:42:41,323 - werkzeug - WARNING -  * Debugger is active!
2025-06-12 09:42:41,331 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-12 09:44:07,062 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_setting.py', reloading
2025-06-12 09:44:07,151 - werkzeug - INFO -  * Restarting with stat
2025-06-12 09:44:07,761 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-12 09:44:07,824 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-12 09:44:07,825 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-12 09:44:07,829 - root - INFO - Starting StoryTeller API server...
2025-06-12 09:44:07,829 - root - INFO - Host: 0.0.0.0
2025-06-12 09:44:07,829 - root - INFO - Port: 5001
2025-06-12 09:44:07,829 - root - INFO - Debug mode: True
2025-06-12 09:44:07,831 - werkzeug - WARNING -  * Debugger is active!
2025-06-12 09:44:07,838 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-12 09:48:17,990 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_setting.py', reloading
2025-06-12 09:48:18,054 - werkzeug - INFO -  * Restarting with stat
2025-06-12 09:48:18,638 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-12 09:48:18,700 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-12 09:48:18,700 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-12 09:48:18,704 - root - INFO - Starting StoryTeller API server...
2025-06-12 09:48:18,704 - root - INFO - Host: 0.0.0.0
2025-06-12 09:48:18,704 - root - INFO - Port: 5001
2025-06-12 09:48:18,704 - root - INFO - Debug mode: True
2025-06-12 09:48:18,708 - werkzeug - WARNING -  * Debugger is active!
2025-06-12 09:48:18,716 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-12 09:48:26,786 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_setting.py', reloading
2025-06-12 09:48:26,854 - werkzeug - INFO -  * Restarting with stat
2025-06-12 09:48:27,286 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-12 09:48:27,329 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-12 09:48:27,329 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-12 09:48:27,333 - root - INFO - Starting StoryTeller API server...
2025-06-12 09:48:27,334 - root - INFO - Host: 0.0.0.0
2025-06-12 09:48:27,334 - root - INFO - Port: 5001
2025-06-12 09:48:27,334 - root - INFO - Debug mode: True
2025-06-12 09:48:27,335 - werkzeug - WARNING -  * Debugger is active!
2025-06-12 09:48:27,342 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-12 12:26:12,652 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_setting.py', reloading
2025-06-12 12:26:12,730 - werkzeug - INFO -  * Restarting with stat
2025-06-12 12:26:13,351 - app.services.firebase_service - INFO - Initialized with environment credentials JSON for project: storyteller-6deea
2025-06-12 12:26:13,417 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-12 12:26:13,417 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-12 12:26:13,421 - root - INFO - Starting StoryTeller API server...
2025-06-12 12:26:13,421 - root - INFO - Host: 0.0.0.0
2025-06-12 12:26:13,421 - root - INFO - Port: 5001
2025-06-12 12:26:13,422 - root - INFO - Debug mode: True
2025-06-12 12:26:13,425 - werkzeug - WARNING -  * Debugger is active!
2025-06-12 12:26:13,433 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-12 15:40:21,461 - app.services.firebase_service - ERROR - Error parsing FIREBASE_CREDENTIALS JSON: Invalid control character at: line 1 column 162 (char 161)
2025-06-12 15:40:21,462 - app.services.firebase_service - ERROR - Error initializing: Failed to initialize a certificate credential. Caused by: "Unable to load PEM file. See https://cryptography.io/en/latest/faq/#why-can-t-i-import-my-pem-file for more details. InvalidData(InvalidByte(1600, 61))"
2025-06-12 15:40:21,462 - app.services.firebase_service - ERROR - Make sure Firebase Admin SDK is properly configured
2025-06-12 15:40:21,462 - app.services.firebase_service - ERROR - GOOGLE_APPLICATION_CREDENTIALS: ./firebase-service-account.json
2025-06-12 15:40:21,462 - app.services.firebase_service - ERROR - File exists: False
2025-06-12 15:40:28,755 - app.services.firebase_service - ERROR - Error parsing FIREBASE_CREDENTIALS JSON: Invalid control character at: line 1 column 162 (char 161)
2025-06-12 15:40:28,755 - app.services.firebase_service - ERROR - Error initializing: Failed to initialize a certificate credential. Caused by: "Unable to load PEM file. See https://cryptography.io/en/latest/faq/#why-can-t-i-import-my-pem-file for more details. InvalidData(InvalidByte(1600, 61))"
2025-06-12 15:40:28,755 - app.services.firebase_service - ERROR - Make sure Firebase Admin SDK is properly configured
2025-06-12 15:40:28,755 - app.services.firebase_service - ERROR - GOOGLE_APPLICATION_CREDENTIALS: ./firebase-service-account.json
2025-06-12 15:40:28,755 - app.services.firebase_service - ERROR - File exists: False
2025-06-12 16:17:36,322 - app.services.firebase_service - ERROR - Error parsing FIREBASE_CREDENTIALS JSON: Invalid control character at: line 1 column 162 (char 161)
2025-06-12 16:17:36,323 - app.services.firebase_service - ERROR - Error initializing: Failed to initialize a certificate credential. Caused by: "Unable to load PEM file. See https://cryptography.io/en/latest/faq/#why-can-t-i-import-my-pem-file for more details. InvalidData(InvalidByte(1600, 61))"
2025-06-12 16:17:36,323 - app.services.firebase_service - ERROR - Make sure Firebase Admin SDK is properly configured
2025-06-12 16:17:36,323 - app.services.firebase_service - ERROR - GOOGLE_APPLICATION_CREDENTIALS: ./firebase-service-account.json
2025-06-12 16:17:36,323 - app.services.firebase_service - ERROR - File exists: False
2025-06-12 16:21:22,196 - app.services.firebase_service - INFO - Using mock Firebase implementation for testing
2025-06-12 16:21:22,278 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-12 16:21:22,278 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-12 16:21:22,283 - root - INFO - Starting StoryTeller API server...
2025-06-12 16:21:22,283 - root - INFO - Host: 0.0.0.0
2025-06-12 16:21:22,283 - root - INFO - Port: 5001
2025-06-12 16:21:22,283 - root - INFO - Debug mode: True
2025-06-12 16:21:22,294 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5001
 * Running on http://10.0.0.243:5001
2025-06-12 16:21:22,295 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-12 16:21:22,295 - werkzeug - INFO -  * Restarting with stat
2025-06-12 16:21:22,701 - app.services.firebase_service - INFO - Using mock Firebase implementation for testing
2025-06-12 16:21:22,744 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-12 16:21:22,744 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-12 16:21:22,749 - root - INFO - Starting StoryTeller API server...
2025-06-12 16:21:22,749 - root - INFO - Host: 0.0.0.0
2025-06-12 16:21:22,749 - root - INFO - Port: 5001
2025-06-12 16:21:22,749 - root - INFO - Debug mode: True
2025-06-12 16:21:22,750 - werkzeug - WARNING -  * Debugger is active!
2025-06-12 16:21:22,758 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-12 16:22:03,951 - app.services.firebase_service - INFO - Using mock Firebase implementation for testing
2025-06-12 16:22:04,008 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-12 16:22:04,008 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-12 16:22:04,012 - root - INFO - Starting StoryTeller API server...
2025-06-12 16:22:04,012 - root - INFO - Host: 0.0.0.0
2025-06-12 16:22:04,012 - root - INFO - Port: 5001
2025-06-12 16:22:04,012 - root - INFO - Debug mode: True
2025-06-12 16:22:04,018 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5001
 * Running on http://10.0.0.243:5001
2025-06-12 16:22:04,018 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-12 16:22:04,018 - werkzeug - INFO -  * Restarting with stat
2025-06-12 16:22:04,373 - app.services.firebase_service - INFO - Using mock Firebase implementation for testing
2025-06-12 16:22:04,415 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-12 16:22:04,415 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-12 16:22:04,419 - root - INFO - Starting StoryTeller API server...
2025-06-12 16:22:04,419 - root - INFO - Host: 0.0.0.0
2025-06-12 16:22:04,419 - root - INFO - Port: 5001
2025-06-12 16:22:04,419 - root - INFO - Debug mode: True
2025-06-12 16:22:04,421 - werkzeug - WARNING -  * Debugger is active!
2025-06-12 16:22:04,430 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-12 16:48:47,184 - app.services.firebase_service - ERROR - Error initializing: Failed to initialize a certificate credential. Caused by: "Unable to load PEM file. See https://cryptography.io/en/latest/faq/#why-can-t-i-import-my-pem-file for more details. InvalidData(InvalidByte(1600, 61))"
2025-06-12 16:48:47,184 - app.services.firebase_service - ERROR - Make sure Firebase Admin SDK is properly configured
2025-06-12 16:48:47,184 - app.services.firebase_service - ERROR - FIREBASE_PROJECT_ID: storyteller-6deea
2025-06-12 16:48:47,184 - app.services.firebase_service - ERROR - FIREBASE_CLIENT_EMAIL is set: True
2025-06-12 16:48:47,184 - app.services.firebase_service - ERROR - FIREBASE_PRIVATE_KEY is set: True
2025-06-12 16:49:19,287 - app.services.firebase_service - ERROR - Error initializing: Failed to initialize a certificate credential. Caused by: "Unable to load PEM file. See https://cryptography.io/en/latest/faq/#why-can-t-i-import-my-pem-file for more details. InvalidData(InvalidByte(1600, 61))"
2025-06-12 16:49:19,287 - app.services.firebase_service - ERROR - Make sure Firebase Admin SDK is properly configured
2025-06-12 16:49:19,287 - app.services.firebase_service - ERROR - FIREBASE_PROJECT_ID: storyteller-6deea
2025-06-12 16:49:19,287 - app.services.firebase_service - ERROR - FIREBASE_CLIENT_EMAIL is set: True
2025-06-12 16:49:19,287 - app.services.firebase_service - ERROR - FIREBASE_PRIVATE_KEY is set: True
2025-06-12 16:58:04,158 - app.services.firebase_service - ERROR - Error initializing: local variable 'os' referenced before assignment
2025-06-12 16:58:04,159 - app.services.firebase_service - ERROR - Make sure Firebase Admin SDK is properly configured
2025-06-12 16:58:21,849 - app.services.firebase_service - ERROR - Error initializing: local variable 'os' referenced before assignment
2025-06-12 16:58:21,849 - app.services.firebase_service - ERROR - Make sure Firebase Admin SDK is properly configured
2025-06-12 17:05:01,004 - app.services.firebase_service - ERROR - Error creating temporary service account file: Failed to initialize a certificate credential. Caused by: "Unable to load PEM file. See https://cryptography.io/en/latest/faq/#why-can-t-i-import-my-pem-file for more details. InvalidData(InvalidByte(1600, 61))"
2025-06-12 17:05:01,004 - app.services.firebase_service - ERROR - Error initializing: File ./firebase-service-account.json was not found.
2025-06-12 17:05:01,004 - app.services.firebase_service - ERROR - Make sure Firebase Admin SDK is properly configured
2025-06-12 17:05:01,004 - app.services.firebase_service - ERROR - FIREBASE_PROJECT_ID is set: True
2025-06-12 17:05:01,005 - app.services.firebase_service - ERROR - FIREBASE_CLIENT_EMAIL is set: True
2025-06-12 17:05:01,005 - app.services.firebase_service - ERROR - FIREBASE_PRIVATE_KEY is set: True
2025-06-12 17:05:33,588 - app.services.firebase_service - ERROR - Error creating temporary service account file: Failed to initialize a certificate credential. Caused by: "Unable to load PEM file. See https://cryptography.io/en/latest/faq/#why-can-t-i-import-my-pem-file for more details. InvalidData(InvalidByte(1600, 61))"
2025-06-12 17:05:33,588 - app.services.firebase_service - ERROR - Error initializing: File ./firebase-service-account.json was not found.
2025-06-12 17:05:33,588 - app.services.firebase_service - ERROR - Make sure Firebase Admin SDK is properly configured
2025-06-12 17:05:33,588 - app.services.firebase_service - ERROR - FIREBASE_PROJECT_ID is set: True
2025-06-12 17:05:33,588 - app.services.firebase_service - ERROR - FIREBASE_CLIENT_EMAIL is set: True
2025-06-12 17:05:33,588 - app.services.firebase_service - ERROR - FIREBASE_PRIVATE_KEY is set: True
2025-06-12 17:05:37,058 - app.services.firebase_service - ERROR - Error creating temporary service account file: Failed to initialize a certificate credential. Caused by: "Unable to load PEM file. See https://cryptography.io/en/latest/faq/#why-can-t-i-import-my-pem-file for more details. InvalidData(InvalidByte(1600, 61))"
2025-06-12 17:05:37,058 - app.services.firebase_service - ERROR - Error initializing: File ./firebase-service-account.json was not found.
2025-06-12 17:05:37,058 - app.services.firebase_service - ERROR - Make sure Firebase Admin SDK is properly configured
2025-06-12 17:05:37,058 - app.services.firebase_service - ERROR - FIREBASE_PROJECT_ID is set: True
2025-06-12 17:05:37,058 - app.services.firebase_service - ERROR - FIREBASE_CLIENT_EMAIL is set: True
2025-06-12 17:05:37,058 - app.services.firebase_service - ERROR - FIREBASE_PRIVATE_KEY is set: True
2025-06-12 17:07:59,696 - app.services.firebase_service - ERROR - Error creating temporary service account file: Failed to initialize a certificate credential. Caused by: "Unable to load PEM file. See https://cryptography.io/en/latest/faq/#why-can-t-i-import-my-pem-file for more details. InvalidData(InvalidByte(1600, 61))"
2025-06-12 17:07:59,696 - app.services.firebase_service - ERROR - Error initializing: File ./firebase-service-account.json was not found.
2025-06-12 17:07:59,696 - app.services.firebase_service - ERROR - Make sure Firebase Admin SDK is properly configured
2025-06-12 17:07:59,696 - app.services.firebase_service - ERROR - FIREBASE_PROJECT_ID is set: True
2025-06-12 17:07:59,696 - app.services.firebase_service - ERROR - FIREBASE_CLIENT_EMAIL is set: True
2025-06-12 17:07:59,696 - app.services.firebase_service - ERROR - FIREBASE_PRIVATE_KEY is set: True
2025-06-12 17:17:42,388 - app.services.firebase_service - ERROR - Error initializing with direct credentials: Failed to initialize a certificate credential. Caused by: "Unable to load PEM file. See https://cryptography.io/en/latest/faq/#why-can-t-i-import-my-pem-file for more details. InvalidData(InvalidByte(1600, 61))"
2025-06-12 17:17:42,389 - app.services.firebase_service - ERROR - Error creating temporary service account file: Failed to initialize a certificate credential. Caused by: "Unable to load PEM file. See https://cryptography.io/en/latest/faq/#why-can-t-i-import-my-pem-file for more details. InvalidData(InvalidByte(1600, 61))"
2025-06-12 17:17:42,389 - app.services.firebase_service - ERROR - Error initializing with default credentials: File ./firebase-service-account.json was not found.
2025-06-12 17:17:42,389 - app.services.firebase_service - ERROR - Error initializing: Failed to initialize Firebase with any available method
2025-06-12 17:17:42,389 - app.services.firebase_service - ERROR - Make sure Firebase Admin SDK is properly configured
2025-06-12 17:17:42,389 - app.services.firebase_service - ERROR - FIREBASE_PROJECT_ID is set: True
2025-06-12 17:17:42,389 - app.services.firebase_service - ERROR - FIREBASE_CLIENT_EMAIL is set: True
2025-06-12 17:17:42,389 - app.services.firebase_service - ERROR - FIREBASE_PRIVATE_KEY is set: True
2025-06-12 17:19:47,130 - app.services.firebase_service - INFO - Initialized with direct credentials for project: storyteller-6deea
2025-06-12 17:19:47,215 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-12 17:19:47,215 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-12 17:19:47,220 - root - INFO - Starting StoryTeller API server...
2025-06-12 17:19:47,220 - root - INFO - Host: 0.0.0.0
2025-06-12 17:19:47,220 - root - INFO - Port: 5001
2025-06-12 17:19:47,220 - root - INFO - Debug mode: True
2025-06-12 17:19:47,226 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5001
 * Running on http://10.0.0.243:5001
2025-06-12 17:19:47,226 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-12 17:19:47,232 - werkzeug - INFO -  * Restarting with stat
2025-06-12 17:19:47,669 - app.services.firebase_service - INFO - Initialized with direct credentials for project: storyteller-6deea
2025-06-12 17:19:47,716 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-12 17:19:47,716 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-12 17:19:47,721 - root - INFO - Starting StoryTeller API server...
2025-06-12 17:19:47,721 - root - INFO - Host: 0.0.0.0
2025-06-12 17:19:47,721 - root - INFO - Port: 5001
2025-06-12 17:19:47,721 - root - INFO - Debug mode: True
2025-06-12 17:19:47,725 - werkzeug - WARNING -  * Debugger is active!
2025-06-12 17:19:47,738 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-12 17:19:50,320 - app.services.firebase_service - ERROR - Error initializing with direct credentials: Failed to initialize a certificate credential. Caused by: "Unable to load PEM file. See https://cryptography.io/en/latest/faq/#why-can-t-i-import-my-pem-file for more details. InvalidData(InvalidByte(1600, 61))"
2025-06-12 17:19:50,321 - app.services.firebase_service - ERROR - Error creating temporary service account file: Failed to initialize a certificate credential. Caused by: "Unable to load PEM file. See https://cryptography.io/en/latest/faq/#why-can-t-i-import-my-pem-file for more details. InvalidData(InvalidByte(1600, 61))"
2025-06-12 17:19:50,321 - app.services.firebase_service - ERROR - Error initializing with default credentials: File ./firebase-service-account.json was not found.
2025-06-12 17:19:50,321 - app.services.firebase_service - ERROR - Error initializing: Failed to initialize Firebase with any available method
2025-06-12 17:19:50,321 - app.services.firebase_service - ERROR - Make sure Firebase Admin SDK is properly configured
2025-06-12 17:19:50,322 - app.services.firebase_service - ERROR - FIREBASE_PROJECT_ID is set: True
2025-06-12 17:19:50,322 - app.services.firebase_service - ERROR - FIREBASE_CLIENT_EMAIL is set: True
2025-06-12 17:19:50,322 - app.services.firebase_service - ERROR - FIREBASE_PRIVATE_KEY is set: True
2025-06-12 17:26:37,535 - app.services.firebase_service - ERROR - Error initializing with FIREBASE_CREDENTIALS: Invalid control character at: line 1 column 162 (char 161)
2025-06-12 17:26:37,535 - app.services.firebase_service - ERROR - Error initializing with direct credentials: Failed to initialize a certificate credential. Caused by: "Unable to load PEM file. See https://cryptography.io/en/latest/faq/#why-can-t-i-import-my-pem-file for more details. InvalidData(InvalidByte(1600, 61))"
2025-06-12 17:26:37,536 - app.services.firebase_service - ERROR - Error creating temporary service account file: Failed to initialize a certificate credential. Caused by: "Unable to load PEM file. See https://cryptography.io/en/latest/faq/#why-can-t-i-import-my-pem-file for more details. InvalidData(InvalidByte(1600, 61))"
2025-06-12 17:26:37,536 - app.services.firebase_service - ERROR - Error initializing with default credentials: File ./firebase-service-account.json was not found.
2025-06-12 17:26:37,536 - app.services.firebase_service - ERROR - Error initializing: Failed to initialize Firebase with any available method
2025-06-12 17:26:37,536 - app.services.firebase_service - ERROR - Make sure Firebase Admin SDK is properly configured
2025-06-12 17:26:37,536 - app.services.firebase_service - ERROR - FIREBASE_PROJECT_ID is set: True
2025-06-12 17:26:37,536 - app.services.firebase_service - ERROR - FIREBASE_CLIENT_EMAIL is set: True
2025-06-12 17:26:37,536 - app.services.firebase_service - ERROR - FIREBASE_PRIVATE_KEY is set: True
2025-06-12 17:26:37,536 - app.services.firebase_service - ERROR - FIREBASE_CREDENTIALS is set: True
2025-06-12 17:26:58,023 - app.services.firebase_service - ERROR - Error initializing with FIREBASE_CREDENTIALS: Invalid control character at: line 1 column 162 (char 161)
2025-06-12 17:26:58,094 - app.services.firebase_service - INFO - Initialized with direct credentials for project: storyteller-6deea
2025-06-12 17:26:58,160 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-12 17:26:58,160 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-12 17:26:58,165 - root - INFO - Starting StoryTeller API server...
2025-06-12 17:26:58,165 - root - INFO - Host: 0.0.0.0
2025-06-12 17:26:58,165 - root - INFO - Port: 5001
2025-06-12 17:26:58,165 - root - INFO - Debug mode: True
2025-06-12 17:26:58,176 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5001
 * Running on http://10.0.0.243:5001
2025-06-12 17:26:58,176 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-12 17:26:58,176 - werkzeug - INFO -  * Restarting with stat
2025-06-12 17:26:58,542 - app.services.firebase_service - ERROR - Error initializing with FIREBASE_CREDENTIALS: Invalid control character at: line 1 column 162 (char 161)
2025-06-12 17:26:58,605 - app.services.firebase_service - INFO - Initialized with direct credentials for project: storyteller-6deea
2025-06-12 17:26:58,647 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-12 17:26:58,647 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-12 17:26:58,651 - root - INFO - Starting StoryTeller API server...
2025-06-12 17:26:58,651 - root - INFO - Host: 0.0.0.0
2025-06-12 17:26:58,651 - root - INFO - Port: 5001
2025-06-12 17:26:58,651 - root - INFO - Debug mode: True
2025-06-12 17:26:58,653 - werkzeug - WARNING -  * Debugger is active!
2025-06-12 17:26:58,660 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-12 17:27:14,612 - app.services.firebase_service - ERROR - Error initializing with FIREBASE_CREDENTIALS: Invalid control character at: line 1 column 162 (char 161)
2025-06-12 17:27:14,613 - app.services.firebase_service - ERROR - Error initializing with direct credentials: Failed to initialize a certificate credential. Caused by: "Unable to load PEM file. See https://cryptography.io/en/latest/faq/#why-can-t-i-import-my-pem-file for more details. InvalidData(InvalidByte(1600, 61))"
2025-06-12 17:27:14,613 - app.services.firebase_service - ERROR - Error creating temporary service account file: Failed to initialize a certificate credential. Caused by: "Unable to load PEM file. See https://cryptography.io/en/latest/faq/#why-can-t-i-import-my-pem-file for more details. InvalidData(InvalidByte(1600, 61))"
2025-06-12 17:27:14,614 - app.services.firebase_service - ERROR - Error initializing with default credentials: File ./firebase-service-account.json was not found.
2025-06-12 17:27:14,614 - app.services.firebase_service - ERROR - Error initializing: Failed to initialize Firebase with any available method
2025-06-12 17:27:14,614 - app.services.firebase_service - ERROR - Make sure Firebase Admin SDK is properly configured
2025-06-12 17:27:14,614 - app.services.firebase_service - ERROR - FIREBASE_PROJECT_ID is set: True
2025-06-12 17:27:14,614 - app.services.firebase_service - ERROR - FIREBASE_CLIENT_EMAIL is set: True
2025-06-12 17:27:14,614 - app.services.firebase_service - ERROR - FIREBASE_PRIVATE_KEY is set: True
2025-06-12 17:27:14,614 - app.services.firebase_service - ERROR - FIREBASE_CREDENTIALS is set: True
2025-06-12 17:34:06,086 - app.services.firebase_service - ERROR - Error initializing with FIREBASE_CREDENTIALS: Invalid control character at: line 1 column 162 (char 161)
2025-06-12 17:34:06,087 - app.services.firebase_service - ERROR - Error initializing with direct credentials: Failed to initialize a certificate credential. Caused by: "Unable to load PEM file. See https://cryptography.io/en/latest/faq/#why-can-t-i-import-my-pem-file for more details. InvalidData(InvalidByte(1600, 61))"
2025-06-12 17:34:06,088 - app.services.firebase_service - ERROR - Error creating temporary service account file: Failed to initialize a certificate credential. Caused by: "Unable to load PEM file. See https://cryptography.io/en/latest/faq/#why-can-t-i-import-my-pem-file for more details. InvalidData(InvalidByte(1600, 61))"
2025-06-12 17:34:06,153 - app.services.firebase_service - INFO - Initialized with default credentials
2025-06-12 17:34:06,211 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-12 17:34:06,211 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-12 17:34:06,215 - root - INFO - Starting StoryTeller API server...
2025-06-12 17:34:06,215 - root - INFO - Host: 0.0.0.0
2025-06-12 17:34:06,215 - root - INFO - Port: 5001
2025-06-12 17:34:06,215 - root - INFO - Debug mode: True
2025-06-12 17:34:06,222 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5001
 * Running on http://10.0.0.243:5001
2025-06-12 17:34:06,222 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-12 17:34:06,222 - werkzeug - INFO -  * Restarting with stat
2025-06-12 17:34:06,572 - app.services.firebase_service - ERROR - Error initializing with FIREBASE_CREDENTIALS: Invalid control character at: line 1 column 162 (char 161)
2025-06-12 17:34:06,572 - app.services.firebase_service - ERROR - Error initializing with direct credentials: Failed to initialize a certificate credential. Caused by: "Unable to load PEM file. See https://cryptography.io/en/latest/faq/#why-can-t-i-import-my-pem-file for more details. InvalidData(InvalidByte(1600, 61))"
2025-06-12 17:34:06,573 - app.services.firebase_service - ERROR - Error creating temporary service account file: Failed to initialize a certificate credential. Caused by: "Unable to load PEM file. See https://cryptography.io/en/latest/faq/#why-can-t-i-import-my-pem-file for more details. InvalidData(InvalidByte(1600, 61))"
2025-06-12 17:34:06,635 - app.services.firebase_service - INFO - Initialized with default credentials
2025-06-12 17:34:06,676 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-12 17:34:06,676 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-12 17:34:06,680 - root - INFO - Starting StoryTeller API server...
2025-06-12 17:34:06,680 - root - INFO - Host: 0.0.0.0
2025-06-12 17:34:06,680 - root - INFO - Port: 5001
2025-06-12 17:34:06,680 - root - INFO - Debug mode: True
2025-06-12 17:34:06,682 - werkzeug - WARNING -  * Debugger is active!
2025-06-12 17:34:06,689 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-12 17:35:04,884 - app.services.firebase_service - ERROR - Error initializing with FIREBASE_CREDENTIALS: Invalid control character at: line 1 column 162 (char 161)
2025-06-12 17:35:04,884 - app.services.firebase_service - ERROR - Error initializing with direct credentials: Failed to initialize a certificate credential. Caused by: "Unable to load PEM file. See https://cryptography.io/en/latest/faq/#why-can-t-i-import-my-pem-file for more details. InvalidData(InvalidByte(1600, 61))"
2025-06-12 17:35:04,885 - app.services.firebase_service - ERROR - Error creating temporary service account file: Failed to initialize a certificate credential. Caused by: "Unable to load PEM file. See https://cryptography.io/en/latest/faq/#why-can-t-i-import-my-pem-file for more details. InvalidData(InvalidByte(1600, 61))"
2025-06-12 17:35:04,948 - app.services.firebase_service - INFO - Initialized with default credentials
2025-06-12 17:35:04,991 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-12 17:35:04,991 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-12 17:35:04,995 - root - INFO - Starting StoryTeller API server...
2025-06-12 17:35:04,995 - root - INFO - Host: 0.0.0.0
2025-06-12 17:35:04,995 - root - INFO - Port: 5001
2025-06-12 17:35:04,995 - root - INFO - Debug mode: True
2025-06-12 17:35:05,000 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5001
 * Running on http://10.0.0.243:5001
2025-06-12 17:35:05,000 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-12 17:35:05,001 - werkzeug - INFO -  * Restarting with stat
2025-06-12 17:35:05,351 - app.services.firebase_service - ERROR - Error initializing with FIREBASE_CREDENTIALS: Invalid control character at: line 1 column 162 (char 161)
2025-06-12 17:35:05,351 - app.services.firebase_service - ERROR - Error initializing with direct credentials: Failed to initialize a certificate credential. Caused by: "Unable to load PEM file. See https://cryptography.io/en/latest/faq/#why-can-t-i-import-my-pem-file for more details. InvalidData(InvalidByte(1600, 61))"
2025-06-12 17:35:05,352 - app.services.firebase_service - ERROR - Error creating temporary service account file: Failed to initialize a certificate credential. Caused by: "Unable to load PEM file. See https://cryptography.io/en/latest/faq/#why-can-t-i-import-my-pem-file for more details. InvalidData(InvalidByte(1600, 61))"
2025-06-12 17:35:05,421 - app.services.firebase_service - INFO - Initialized with default credentials
2025-06-12 17:35:05,512 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-12 17:35:05,512 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-12 17:35:05,520 - root - INFO - Starting StoryTeller API server...
2025-06-12 17:35:05,520 - root - INFO - Host: 0.0.0.0
2025-06-12 17:35:05,520 - root - INFO - Port: 5001
2025-06-12 17:35:05,532 - root - INFO - Debug mode: True
2025-06-12 17:35:05,562 - werkzeug - WARNING -  * Debugger is active!
2025-06-12 17:35:05,571 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-12 17:35:16,134 - werkzeug - INFO - 127.0.0.1 - - [12/Jun/2025 17:35:16] "OPTIONS /api/status HTTP/1.1" 200 -
2025-06-12 17:35:16,134 - werkzeug - INFO - 127.0.0.1 - - [12/Jun/2025 17:35:16] "OPTIONS /api/status HTTP/1.1" 200 -
2025-06-12 17:35:16,136 - werkzeug - INFO - 127.0.0.1 - - [12/Jun/2025 17:35:16] "GET /api/status HTTP/1.1" 200 -
2025-06-12 17:35:16,138 - werkzeug - INFO - 127.0.0.1 - - [12/Jun/2025 17:35:16] "GET /api/status HTTP/1.1" 200 -
2025-06-12 17:35:39,512 - werkzeug - INFO - 127.0.0.1 - - [12/Jun/2025 17:35:39] "OPTIONS /api/status HTTP/1.1" 200 -
2025-06-12 17:35:39,515 - werkzeug - INFO - 127.0.0.1 - - [12/Jun/2025 17:35:39] "GET /api/status HTTP/1.1" 200 -
2025-06-12 17:35:39,520 - werkzeug - INFO - 127.0.0.1 - - [12/Jun/2025 17:35:39] "GET /api/status HTTP/1.1" 200 -
2025-06-12 17:35:50,870 - werkzeug - INFO - 127.0.0.1 - - [12/Jun/2025 17:35:50] "OPTIONS /api/status HTTP/1.1" 200 -
2025-06-12 17:35:50,871 - werkzeug - INFO - 127.0.0.1 - - [12/Jun/2025 17:35:50] "OPTIONS /api/status HTTP/1.1" 200 -
2025-06-12 17:35:50,874 - werkzeug - INFO - 127.0.0.1 - - [12/Jun/2025 17:35:50] "GET /api/status HTTP/1.1" 200 -
2025-06-12 17:35:50,876 - werkzeug - INFO - 127.0.0.1 - - [12/Jun/2025 17:35:50] "GET /api/status HTTP/1.1" 200 -
2025-06-12 17:48:43,408 - app.services.firebase_service - ERROR - Error initializing with FIREBASE_CREDENTIALS: Invalid control character at: line 1 column 162 (char 161)
2025-06-12 17:48:43,409 - app.services.firebase_service - ERROR - Error initializing with direct credentials: Failed to initialize a certificate credential. Caused by: "Unable to load PEM file. See https://cryptography.io/en/latest/faq/#why-can-t-i-import-my-pem-file for more details. InvalidData(InvalidByte(1600, 61))"
2025-06-12 17:48:43,409 - app.services.firebase_service - ERROR - Error creating temporary service account file: Failed to initialize a certificate credential. Caused by: "Unable to load PEM file. See https://cryptography.io/en/latest/faq/#why-can-t-i-import-my-pem-file for more details. InvalidData(InvalidByte(1600, 61))"
2025-06-12 17:48:43,475 - app.services.firebase_service - INFO - Initialized with default credentials
2025-06-12 17:48:43,538 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-12 17:48:43,538 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-12 17:48:43,542 - root - INFO - Starting StoryTeller API server...
2025-06-12 17:48:43,542 - root - INFO - Host: 0.0.0.0
2025-06-12 17:48:43,542 - root - INFO - Port: 5001
2025-06-12 17:48:43,542 - root - INFO - Debug mode: True
2025-06-12 17:48:43,549 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5001
 * Running on http://10.0.0.243:5001
2025-06-12 17:48:43,550 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-12 17:48:43,550 - werkzeug - INFO -  * Restarting with stat
2025-06-12 17:48:43,915 - app.services.firebase_service - ERROR - Error initializing with FIREBASE_CREDENTIALS: Invalid control character at: line 1 column 162 (char 161)
2025-06-12 17:48:43,915 - app.services.firebase_service - ERROR - Error initializing with direct credentials: Failed to initialize a certificate credential. Caused by: "Unable to load PEM file. See https://cryptography.io/en/latest/faq/#why-can-t-i-import-my-pem-file for more details. InvalidData(InvalidByte(1600, 61))"
2025-06-12 17:48:43,915 - app.services.firebase_service - ERROR - Error creating temporary service account file: Failed to initialize a certificate credential. Caused by: "Unable to load PEM file. See https://cryptography.io/en/latest/faq/#why-can-t-i-import-my-pem-file for more details. InvalidData(InvalidByte(1600, 61))"
2025-06-12 17:48:43,978 - app.services.firebase_service - INFO - Initialized with default credentials
2025-06-12 17:48:44,020 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-12 17:48:44,020 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-12 17:48:44,024 - root - INFO - Starting StoryTeller API server...
2025-06-12 17:48:44,024 - root - INFO - Host: 0.0.0.0
2025-06-12 17:48:44,024 - root - INFO - Port: 5001
2025-06-12 17:48:44,024 - root - INFO - Debug mode: True
2025-06-12 17:48:44,026 - werkzeug - WARNING -  * Debugger is active!
2025-06-12 17:48:44,034 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-12 17:49:25,028 - app.services.firebase_service - ERROR - Error initializing with FIREBASE_CREDENTIALS: Invalid control character at: line 1 column 162 (char 161)
2025-06-12 17:49:25,028 - app.services.firebase_service - ERROR - Error initializing with direct credentials: Failed to initialize a certificate credential. Caused by: "Unable to load PEM file. See https://cryptography.io/en/latest/faq/#why-can-t-i-import-my-pem-file for more details. InvalidData(InvalidByte(1600, 61))"
2025-06-12 17:49:25,029 - app.services.firebase_service - ERROR - Error creating temporary service account file: Failed to initialize a certificate credential. Caused by: "Unable to load PEM file. See https://cryptography.io/en/latest/faq/#why-can-t-i-import-my-pem-file for more details. InvalidData(InvalidByte(1600, 61))"
2025-06-12 17:49:25,090 - app.services.firebase_service - INFO - Initialized with default credentials
2025-06-12 17:49:25,133 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-12 17:49:25,133 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-12 17:49:25,137 - root - INFO - Starting StoryTeller API server...
2025-06-12 17:49:25,137 - root - INFO - Host: 0.0.0.0
2025-06-12 17:49:25,137 - root - INFO - Port: 5001
2025-06-12 17:49:25,137 - root - INFO - Debug mode: True
2025-06-12 17:49:25,142 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5001
 * Running on http://10.0.0.243:5001
2025-06-12 17:49:25,142 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-12 17:49:25,143 - werkzeug - INFO -  * Restarting with stat
2025-06-12 17:49:25,495 - app.services.firebase_service - ERROR - Error initializing with FIREBASE_CREDENTIALS: Invalid control character at: line 1 column 162 (char 161)
2025-06-12 17:49:25,495 - app.services.firebase_service - ERROR - Error initializing with direct credentials: Failed to initialize a certificate credential. Caused by: "Unable to load PEM file. See https://cryptography.io/en/latest/faq/#why-can-t-i-import-my-pem-file for more details. InvalidData(InvalidByte(1600, 61))"
2025-06-12 17:49:25,496 - app.services.firebase_service - ERROR - Error creating temporary service account file: Failed to initialize a certificate credential. Caused by: "Unable to load PEM file. See https://cryptography.io/en/latest/faq/#why-can-t-i-import-my-pem-file for more details. InvalidData(InvalidByte(1600, 61))"
2025-06-12 17:49:25,559 - app.services.firebase_service - INFO - Initialized with default credentials
2025-06-12 17:49:25,602 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-12 17:49:25,602 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-12 17:49:25,606 - root - INFO - Starting StoryTeller API server...
2025-06-12 17:49:25,606 - root - INFO - Host: 0.0.0.0
2025-06-12 17:49:25,606 - root - INFO - Port: 5001
2025-06-12 17:49:25,606 - root - INFO - Debug mode: True
2025-06-12 17:49:25,608 - werkzeug - WARNING -  * Debugger is active!
2025-06-12 17:49:25,615 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-12 17:50:27,806 - werkzeug - INFO - 127.0.0.1 - - [12/Jun/2025 17:50:27] "OPTIONS /api/status HTTP/1.1" 200 -
2025-06-12 17:50:27,807 - werkzeug - INFO - 127.0.0.1 - - [12/Jun/2025 17:50:27] "OPTIONS /api/status HTTP/1.1" 200 -
2025-06-12 17:50:27,810 - werkzeug - INFO - 127.0.0.1 - - [12/Jun/2025 17:50:27] "GET /api/status HTTP/1.1" 200 -
2025-06-12 17:50:27,813 - werkzeug - INFO - 127.0.0.1 - - [12/Jun/2025 17:50:27] "GET /api/status HTTP/1.1" 200 -
2025-06-12 17:50:40,201 - app.services.firebase_service - INFO - Retrieved 1 stories
2025-06-12 17:50:40,201 - app.storage.storage - INFO - Retrieved 1 stories
2025-06-12 17:50:40,203 - werkzeug - INFO - 127.0.0.1 - - [12/Jun/2025 17:50:40] "OPTIONS /api/stories HTTP/1.1" 200 -
2025-06-12 17:50:40,207 - app.auth - INFO - Authentication successful for user: h3GkK3ksTWhz3xeT9h7E4k6Jw7v2
2025-06-12 17:50:40,972 - app.services.firebase_service - INFO - Retrieved 0 stories for user h3GkK3ksTWhz3xeT9h7E4k6Jw7v2
2025-06-12 17:50:40,972 - app.storage.storage - INFO - Retrieved 0 stories for user h3GkK3ksTWhz3xeT9h7E4k6Jw7v2
2025-06-12 17:50:41,531 - app.services.usage_service - INFO - Created new usage record
2025-06-12 17:50:41,532 - app.services.ai_service - INFO - Generated big story goal: Recover a legendary artifact sealed by ancient cultivators to gain its immense power and reshape the world.
2025-06-12 17:50:41,532 - app.services.ai_service - INFO - Using cultivation genre for initial story
2025-06-12 17:50:41,533 - app.services.story_planner - INFO - Calculated number of arcs: 7 based on 50 chapters and 7 chapters per arc
2025-06-12 17:50:41,533 - app.services.story_planner - INFO - Found exact match for goal: 'Recover a legendary artifact sealed by ancient cultivators to gain its immense power and reshape the world.'
2025-06-12 17:50:41,533 - app.services.story_planner - INFO - Generated 7 new arc goals for theme: 'recover_legendary_artifact'
2025-06-12 17:50:41,533 - app.genres.cultivation_setting - INFO - Generated 7 arc goals. Initial arc goal: Unlock the artifact's powers step by step through blood, Qi, or soul.
2025-06-12 17:50:41,533 - app.genres.cultivation_setting - INFO - Generating cultivation progression story for Ali
2025-06-12 17:50:41,534 - app.models.base_genre - INFO - Generating story for Ali
2025-06-12 17:50:48,189 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-12 17:50:48,193 - app.models.base_genre - INFO - ðŸŽ­ GENRE GPT RESPONSE (2529 chars):
2025-06-12 17:50:48,193 - app.models.base_genre - INFO - ============================================================
2025-06-12 17:50:48,194 - app.models.base_genre - INFO - [STORY]
Ali stood at the entrance of the ancient Forbidden Valley, his eyes gleaming with a mix of determination and curiosity. The legends whispered tales of hidden treasures and formidable challenges within its depths, but Ali was undeterred. With knowledge from his past life guiding him, he knew that within this valley lay the key to unlocking the artifact's powers.

---
As Ali ventured deeper into the valley, the air grew thick with a mysterious energy. Wisps of Qi swirled around him, tingling against his skin in a display of raw power. The cultivation technique he had learned, the Thunderous Fist, resonated within him, eager to be unleashed.

---
Suddenly, a massive boulder crashed down from above, blocking Ali's path. With a quick sidestep, he avoided being crushed, his instincts honed from battles long past. As he examined the obstacle, a realization struck him - the boulder was a test, a challenge set by the valley itself to weed out the unworthy.

---
Drawing upon his past experiences, Ali focused his Qi into his palms, unleashing a burst of energy that shattered the boulder into pieces. The valley seemed to hum in approval, the ancient stones resonating with the power of his cultivation.

---
A figure emerged from the shadows, a fellow cultivator intrigued by Ali's display of strength. They introduced themselves as Lin, a disciple of the Valley's renowned Thunder Sect. Impressed by Ali's mastery of the Thunderous Fist, Lin offered to guide him further into the valley, sensing a kindred spirit in the reincarnated warrior.

---
As they journeyed deeper, Ali and Lin encountered a series of traps and trials, each one testing their skills and resolve. Through teamwork and quick thinking, they overcame each challenge, their bond strengthening with every victory.

---
Finally, they reached a chamber bathed in a soft, ethereal light. In the center stood a pedestal, upon which rested a shimmering crystal imbued with pulsating energy. Ali knew instinctively that this crystal held the next step in unlocking the artifact's powers.

---

[NEW CHARACTERS]
Name: Lin
Relationship: Ally
Sect: Thunder Sect
Role: Disciple

[/NEW CHARACTERS]

[CHOICES]
1. Channel your Qi into the crystal, seeking to unlock its secrets and further your cultivation journey.
2. Study the crystal carefully, analyzing its energy patterns to uncover any hidden dangers or traps.
3. Consult with Lin about the best approach to harnessing the crystal's power, combining your knowledge for a more strategic plan.
[/CHOICES]
2025-06-12 17:50:48,194 - app.models.base_genre - INFO - ============================================================
2025-06-12 17:50:48,195 - app.models.base_genre - INFO - Successfully parsed genre response: story=2170 chars, choices=3
2025-06-12 17:50:48,196 - app.storage.storage - INFO - Using provided arc goals: 7 goals
2025-06-12 17:50:48,196 - app.storage.storage - INFO - Using provided arc goal: Unlock the artifact's powers step by step through blood, Qi, or soul.
2025-06-12 17:50:48,196 - app.storage.storage - INFO - Initialized memory with big goal: 'Recover a legendary artifact sealed by ancient cultivators to gain its immense power and reshape the world.' and arc goal: 'Unlock the artifact's powers step by step through blood, Qi, or soul.'
2025-06-12 17:50:48,196 - app.storage.storage - INFO - Arc progression: 1/7, Chapter: 1/7
2025-06-12 17:50:48,196 - app.storage.storage - INFO - Overall story progress: Chapter 1/50 (2%)
2025-06-12 17:50:48,510 - app.services.firebase_service - INFO - Saved story story_1749775848_044a215d: Ali's cultivation shonen
2025-06-12 17:50:48,510 - app.storage.storage - INFO - Saved story story_1749775848_044a215d: Ali's cultivation shonen
2025-06-12 17:50:48,511 - app.storage.storage - INFO - Created new story: story_1749775848_044a215d: Ali's cultivation shonen
2025-06-12 17:50:48,511 - app.services.story_planner - INFO - Found [NEW CHARACTERS] section: Name: Lin
Relationship: Ally
Sect: Thunder Sect
Role: Disciple
2025-06-12 17:50:48,511 - app.services.story_planner - INFO - Extracted character from section: Lin - Ally
2025-06-12 17:50:48,511 - app.services.story_planner - INFO - Adding new character: Lin (Ally)
2025-06-12 17:50:48,511 - app.services.story_planner - INFO - Memory now has 1 characters: Lin
2025-06-12 17:50:48,644 - app.services.firebase_service - INFO - Saved story story_1749775848_044a215d: Ali's cultivation shonen
2025-06-12 17:50:48,645 - app.storage.storage - INFO - Saved story story_1749775848_044a215d: Ali's cultivation shonen
2025-06-12 17:50:48,645 - app.api - INFO - Extracted characters from initial story content for Ali
2025-06-12 17:50:48,968 - app.services.usage_service - INFO - Updated usage for user: h3GkK3ksTWhz3xeT9h7E4k6Jw7v2
2025-06-12 17:50:49,389 - werkzeug - INFO - 127.0.0.1 - - [12/Jun/2025 17:50:49] "POST /api/stories HTTP/1.1" 200 -
2025-06-12 17:50:49,602 - app.services.firebase_service - INFO - Retrieved story story_1749775848_044a215d: Ali's cultivation shonen
2025-06-12 17:50:49,603 - app.storage.storage - INFO - Retrieved story story_1749775848_044a215d: Ali's cultivation shonen
2025-06-12 17:50:49,604 - werkzeug - INFO - 127.0.0.1 - - [12/Jun/2025 17:50:49] "OPTIONS /api/stories/story_1749775848_044a215d HTTP/1.1" 200 -
2025-06-12 17:50:49,615 - app.services.firebase_service - INFO - Retrieved story story_1749775848_044a215d: Ali's cultivation shonen
2025-06-12 17:50:49,616 - app.storage.storage - INFO - Retrieved story story_1749775848_044a215d: Ali's cultivation shonen
2025-06-12 17:50:49,617 - werkzeug - INFO - 127.0.0.1 - - [12/Jun/2025 17:50:49] "OPTIONS /api/stories/story_1749775848_044a215d HTTP/1.1" 200 -
2025-06-12 17:50:49,798 - app.services.firebase_service - INFO - Retrieved story story_1749775848_044a215d: Ali's cultivation shonen
2025-06-12 17:50:49,799 - app.storage.storage - INFO - Retrieved story story_1749775848_044a215d: Ali's cultivation shonen
2025-06-12 17:50:49,800 - werkzeug - INFO - 127.0.0.1 - - [12/Jun/2025 17:50:49] "GET /api/stories/story_1749775848_044a215d HTTP/1.1" 200 -
2025-06-12 17:50:49,928 - app.services.firebase_service - INFO - Retrieved story story_1749775848_044a215d: Ali's cultivation shonen
2025-06-12 17:50:49,929 - app.storage.storage - INFO - Retrieved story story_1749775848_044a215d: Ali's cultivation shonen
2025-06-12 17:50:49,930 - werkzeug - INFO - 127.0.0.1 - - [12/Jun/2025 17:50:49] "GET /api/stories/story_1749775848_044a215d HTTP/1.1" 200 -
2025-06-12 17:51:39,826 - werkzeug - INFO - 127.0.0.1 - - [12/Jun/2025 17:51:39] "OPTIONS /api/stories/story_1749775848_044a215d/choices/1 HTTP/1.1" 200 -
2025-06-12 17:51:39,831 - app.auth - INFO - Authentication successful for user: h3GkK3ksTWhz3xeT9h7E4k6Jw7v2
2025-06-12 17:51:40,126 - app.services.firebase_service - INFO - Retrieved story story_1749775848_044a215d: Ali's cultivation shonen
2025-06-12 17:51:40,127 - app.storage.storage - INFO - Retrieved story story_1749775848_044a215d: Ali's cultivation shonen
2025-06-12 17:51:40,557 - app.services.usage_service - INFO - Updated usage for user: h3GkK3ksTWhz3xeT9h7E4k6Jw7v2
2025-06-12 17:51:40,660 - app.services.firebase_service - INFO - Retrieved story story_1749775848_044a215d: Ali's cultivation shonen
2025-06-12 17:51:40,661 - app.storage.storage - INFO - Retrieved story story_1749775848_044a215d: Ali's cultivation shonen
2025-06-12 17:51:40,853 - app.services.firebase_service - INFO - Saved story story_1749775848_044a215d: Ali's cultivation shonen
2025-06-12 17:51:40,853 - app.storage.storage - INFO - Saved story story_1749775848_044a215d: Ali's cultivation shonen
2025-06-12 17:51:40,854 - app.storage.storage - INFO - Saved choice 1 for node initial in story story_1749775848_044a215d
2025-06-12 17:51:40,854 - app.api - INFO - Generating continuation for story story_1749775848_044a215d, choice 1
2025-06-12 17:51:40,854 - app.api - INFO - Character: Ali, Setting: cultivation
2025-06-12 17:51:40,854 - app.api - INFO - Selected choice: 'Channel your Qi into the crystal, seeking to unlock its secrets and further your cultivation journey.'
2025-06-12 17:51:40,854 - app.services.ai_service - INFO - Memory before processing - chapters_completed: 0, current_arc_index: 0, chapters_per_arc: 7
2025-06-12 17:51:40,854 - app.services.ai_service - INFO - Memory arcs: 7 arcs total
2025-06-12 17:51:40,854 - app.services.ai_service - INFO - Current arc: 'Unlock the artifact's powers step by step through blood, Qi, or soul.'
2025-06-12 17:51:40,854 - app.services.ai_service - INFO - Chapter 1 of arc 'Unlock the artifact's powers step by step through blood, Qi, or soul.' completed
2025-06-12 17:51:40,855 - app.services.ai_service - INFO - Using cultivation genre for story continuation
2025-06-12 17:51:40,855 - app.services.ai_service - INFO - Using big story goal for cultivation continuation: Recover a legendary artifact sealed by ancient cultivators to gain its immense power and reshape the world.
2025-06-12 17:51:40,855 - app.genres.cultivation_setting - INFO - Continuing cultivation progression story for Ali with style: shonen
2025-06-12 17:51:40,855 - app.models.base_genre - INFO - Generating story for Ali
2025-06-12 17:51:44,752 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-12 17:51:44,757 - app.models.base_genre - INFO - ðŸŽ­ GENRE GPT RESPONSE (2416 chars):
2025-06-12 17:51:44,758 - app.models.base_genre - INFO - ============================================================
2025-06-12 17:51:44,758 - app.models.base_genre - INFO - [STORY]
Ali extended his hand towards the shimmering crystal, feeling the hum of energy resonate with his own Qi. As he channeled his cultivation energy into the crystal, a bright light enveloped him, swirling around in intricate patterns that seemed to echo ancient symbols. The crystal pulsed in response, absorbing Ali's Qi like a thirsty plant drinking in water.

---
Visions flashed before Ali's eyes, memories not his own but belonging to the artifact itself. He saw battles fought in ages past, cultivators wielding powers beyond imagination, and a world where the artifact's influence was unmatched. The knowledge flooded his senses, overwhelming yet exhilarating, as if he was tapping into a reservoir of untold power.

---
But with the influx of memories came a surge of emotions - anger, sorrow, and an insatiable hunger for more. Ali struggled to maintain his focus, the conflicting emotions threatening to consume him. The crystal glowed brighter, reacting to his inner turmoil, amplifying the chaos within him.

---
A dark shadow loomed over Ali, a manifestation of the artifact's darker nature. It whispered promises of power beyond measure, of dominion over all who dared to challenge him. The temptation clawed at Ali's mind, testing his resolve and threatening to corrupt his very soul.

---
Through sheer willpower, Ali pushed back against the darkness, his eyes blazing with determination. He called upon the teachings of his past life, the wisdom of his ancestors, and the bond he shared with Lin. With a fierce cry, he unleashed a wave of pure Qi, shattering the darkness and purifying the crystal with his resolve.

---
As the light faded, Ali fell to his knees, drained but triumphant. The crystal now glowed with a steady, calming light, its pulsations in harmony with Ali's own Qi. He had unlocked a fraction of its powers, but the journey ahead promised even greater challenges and revelations.

[/STORY]

[CHOICES]
1. Meditate and reflect on the visions and emotions experienced, seeking to gain deeper insight into the artifact's nature and purpose.
2. Share the details of his experience with Lin, discussing the dangers and temptations he faced during the channeling process.
3. Investigate the chamber further, searching for clues or hidden mechanisms that might reveal the artifact's next challenge or step in unlocking its powers.
[/CHOICES]

[NEW CHARACTERS]
None
[/NEW CHARACTERS]
2025-06-12 17:51:44,758 - app.models.base_genre - INFO - ============================================================
2025-06-12 17:51:44,758 - app.models.base_genre - INFO - Successfully parsed genre response: story=1913 chars, choices=3
2025-06-12 17:51:44,759 - app.services.story_planner - INFO - No [NEW CHARACTERS] section found, using simplified detection
2025-06-12 17:51:44,759 - app.genres.cultivation_setting - INFO - Extracted characters from story content for Ali
2025-06-12 17:51:44,759 - app.api - ERROR - Error generating story continuation: type object 'AIService' has no attribute 'get_genre_instance'
2025-06-12 17:51:44,760 - app.api - ERROR - Generated fallback content due to AI error: type object 'AIService' has no attribute 'get_genre_instance'
2025-06-12 17:51:44,863 - app.services.firebase_service - INFO - Retrieved story story_1749775848_044a215d: Ali's cultivation shonen
2025-06-12 17:51:44,863 - app.storage.storage - INFO - Retrieved story story_1749775848_044a215d: Ali's cultivation shonen
2025-06-12 17:51:44,864 - app.storage.storage - INFO - Updated story memory with node node_2891603198
2025-06-12 17:51:44,972 - app.services.firebase_service - INFO - Saved story story_1749775848_044a215d: Ali's cultivation shonen
2025-06-12 17:51:44,973 - app.storage.storage - INFO - Saved story story_1749775848_044a215d: Ali's cultivation shonen
2025-06-12 17:51:44,973 - app.storage.storage - INFO - Added node node_2891603198 to story story_1749775848_044a215d
2025-06-12 17:51:45,354 - werkzeug - INFO - 127.0.0.1 - - [12/Jun/2025 17:51:45] "POST /api/stories/story_1749775848_044a215d/choices/1 HTTP/1.1" 200 -
2025-06-12 19:08:40,713 - app.services.firebase_service - ERROR - Error initializing with FIREBASE_CREDENTIALS: Invalid control character at: line 1 column 162 (char 161)
2025-06-12 19:08:40,714 - app.services.firebase_service - ERROR - Error initializing with direct credentials: Failed to initialize a certificate credential. Caused by: "Unable to load PEM file. See https://cryptography.io/en/latest/faq/#why-can-t-i-import-my-pem-file for more details. InvalidData(InvalidByte(1600, 61))"
2025-06-12 19:08:40,715 - app.services.firebase_service - ERROR - Error creating temporary service account file: Failed to initialize a certificate credential. Caused by: "Unable to load PEM file. See https://cryptography.io/en/latest/faq/#why-can-t-i-import-my-pem-file for more details. InvalidData(InvalidByte(1600, 61))"
2025-06-12 19:08:40,779 - app.services.firebase_service - INFO - Initialized with default credentials
2025-06-12 19:08:40,843 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-12 19:08:40,843 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-12 19:08:40,847 - root - INFO - Starting StoryTeller API server...
2025-06-12 19:08:40,847 - root - INFO - Host: 0.0.0.0
2025-06-12 19:08:40,847 - root - INFO - Port: 5001
2025-06-12 19:08:40,847 - root - INFO - Debug mode: True
2025-06-12 19:08:40,853 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5001
 * Running on http://10.0.0.243:5001
2025-06-12 19:08:40,854 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-12 19:08:40,854 - werkzeug - INFO -  * Restarting with stat
2025-06-12 19:08:41,209 - app.services.firebase_service - ERROR - Error initializing with FIREBASE_CREDENTIALS: Invalid control character at: line 1 column 162 (char 161)
2025-06-12 19:08:41,209 - app.services.firebase_service - ERROR - Error initializing with direct credentials: Failed to initialize a certificate credential. Caused by: "Unable to load PEM file. See https://cryptography.io/en/latest/faq/#why-can-t-i-import-my-pem-file for more details. InvalidData(InvalidByte(1600, 61))"
2025-06-12 19:08:41,210 - app.services.firebase_service - ERROR - Error creating temporary service account file: Failed to initialize a certificate credential. Caused by: "Unable to load PEM file. See https://cryptography.io/en/latest/faq/#why-can-t-i-import-my-pem-file for more details. InvalidData(InvalidByte(1600, 61))"
2025-06-12 19:08:41,272 - app.services.firebase_service - INFO - Initialized with default credentials
2025-06-12 19:08:41,313 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-12 19:08:41,313 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-12 19:08:41,317 - root - INFO - Starting StoryTeller API server...
2025-06-12 19:08:41,317 - root - INFO - Host: 0.0.0.0
2025-06-12 19:08:41,317 - root - INFO - Port: 5001
2025-06-12 19:08:41,317 - root - INFO - Debug mode: True
2025-06-12 19:08:41,319 - werkzeug - WARNING -  * Debugger is active!
2025-06-12 19:08:41,326 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-12 19:08:50,445 - app.services.firebase_service - INFO - Retrieved story story_1749775848_044a215d: Ali's cultivation shonen
2025-06-12 19:08:50,446 - app.services.firebase_service - INFO - Retrieved story story_1749775848_044a215d: Ali's cultivation shonen
2025-06-12 19:08:50,446 - app.storage.storage - INFO - Retrieved story story_1749775848_044a215d: Ali's cultivation shonen
2025-06-12 19:08:50,446 - app.storage.storage - INFO - Retrieved story story_1749775848_044a215d: Ali's cultivation shonen
2025-06-12 19:08:50,448 - werkzeug - INFO - 127.0.0.1 - - [12/Jun/2025 19:08:50] "OPTIONS /api/stories/story_1749775848_044a215d HTTP/1.1" 200 -
2025-06-12 19:08:50,449 - werkzeug - INFO - 127.0.0.1 - - [12/Jun/2025 19:08:50] "OPTIONS /api/stories/story_1749775848_044a215d HTTP/1.1" 200 -
2025-06-12 19:08:50,603 - app.services.firebase_service - INFO - Retrieved story story_1749775848_044a215d: Ali's cultivation shonen
2025-06-12 19:08:50,604 - app.storage.storage - INFO - Retrieved story story_1749775848_044a215d: Ali's cultivation shonen
2025-06-12 19:08:50,605 - werkzeug - INFO - 127.0.0.1 - - [12/Jun/2025 19:08:50] "GET /api/stories/story_1749775848_044a215d HTTP/1.1" 200 -
2025-06-12 19:08:50,745 - app.services.firebase_service - INFO - Retrieved story story_1749775848_044a215d: Ali's cultivation shonen
2025-06-12 19:08:50,745 - app.storage.storage - INFO - Retrieved story story_1749775848_044a215d: Ali's cultivation shonen
2025-06-12 19:08:50,747 - werkzeug - INFO - 127.0.0.1 - - [12/Jun/2025 19:08:50] "GET /api/stories/story_1749775848_044a215d HTTP/1.1" 200 -
2025-06-12 19:08:52,927 - werkzeug - INFO - 127.0.0.1 - - [12/Jun/2025 19:08:52] "OPTIONS /api/status HTTP/1.1" 200 -
2025-06-12 19:08:52,928 - werkzeug - INFO - 127.0.0.1 - - [12/Jun/2025 19:08:52] "OPTIONS /api/status HTTP/1.1" 200 -
2025-06-12 19:08:52,930 - werkzeug - INFO - 127.0.0.1 - - [12/Jun/2025 19:08:52] "GET /api/status HTTP/1.1" 200 -
2025-06-12 19:08:52,931 - werkzeug - INFO - 127.0.0.1 - - [12/Jun/2025 19:08:52] "GET /api/status HTTP/1.1" 200 -
2025-06-12 19:08:53,723 - werkzeug - INFO - 127.0.0.1 - - [12/Jun/2025 19:08:53] "GET /api/status HTTP/1.1" 200 -
2025-06-12 19:08:53,726 - werkzeug - INFO - 127.0.0.1 - - [12/Jun/2025 19:08:53] "GET /api/status HTTP/1.1" 200 -
2025-06-12 19:09:08,947 - app.services.firebase_service - INFO - Retrieved 2 stories
2025-06-12 19:09:08,948 - app.storage.storage - INFO - Retrieved 2 stories
2025-06-12 19:09:08,949 - werkzeug - INFO - 127.0.0.1 - - [12/Jun/2025 19:09:08] "OPTIONS /api/stories HTTP/1.1" 200 -
2025-06-12 19:09:08,950 - app.auth - INFO - Authentication successful for user: h3GkK3ksTWhz3xeT9h7E4k6Jw7v2
2025-06-12 19:09:09,155 - app.services.firebase_service - INFO - Retrieved 1 stories for user h3GkK3ksTWhz3xeT9h7E4k6Jw7v2
2025-06-12 19:09:09,155 - app.storage.storage - INFO - Retrieved 1 stories for user h3GkK3ksTWhz3xeT9h7E4k6Jw7v2
2025-06-12 19:09:09,473 - app.services.ai_service - INFO - Generated big story goal: Use your knowledge of a tragic future life to change fate, protect your loved ones, and prevent the fall of your world.
2025-06-12 19:09:09,473 - app.services.ai_service - INFO - Using cultivation genre for initial story
2025-06-12 19:09:09,474 - app.services.story_planner - INFO - Calculated number of arcs: 7 based on 50 chapters and 7 chapters per arc
2025-06-12 19:09:09,474 - app.services.story_planner - INFO - Found exact match for goal: 'Use your knowledge of a tragic future life to change fate, protect your loved ones, and prevent the fall of your world.'
2025-06-12 19:09:09,474 - app.services.story_planner - INFO - Generated 7 new arc goals for theme: 'past_life'
2025-06-12 19:09:09,474 - app.genres.cultivation_setting - INFO - Generated 7 arc goals. Initial arc goal: Recruit young talents to form a powerful alliance early.
2025-06-12 19:09:09,474 - app.genres.cultivation_setting - INFO - Generating cultivation progression story for Ali
2025-06-12 19:09:09,475 - app.models.base_genre - INFO - Generating story for Ali
2025-06-12 19:09:15,900 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-12 19:09:15,905 - app.models.base_genre - INFO - ðŸŽ­ GENRE GPT RESPONSE (3096 chars):
2025-06-12 19:09:15,905 - app.models.base_genre - INFO - ============================================================
2025-06-12 19:09:15,906 - app.models.base_genre - INFO - [STORY]
Ali stood at the edge of the Misty Peak, a renowned cultivation site, with ancient ruins shrouded in mystery and potential. The sun cast a warm glow, heralding a new day ripe for adventure. His eyes, a reflection of wisdom beyond his years, sparkled with determination as he surveyed the landscape, his past knowledge guiding his every move.

---
As Ali ventured deeper into the ruins, the air thickened with potent qi, a tangible energy that resonated with his soul. His memories whispered of the Windwalk technique, a rare cultivation skill that could harness the wind's power for unparalleled speed and agility.

---
Suddenly, a group of disciples from the Thunderclap Sect emerged, their leader, Jin, a formidable cultivator known for his lightning-fast strikes and fierce loyalty to his sect. Jin's eyes locked onto Ali, a mix of curiosity and challenge burning within them.

---
"An outsider in the Misty Peak ruins? You must be lost," Jin taunted, his voice laced with skepticism. Ali remained composed, his past life's experiences teaching him the value of patience and strategic thinking in the face of adversity.

---
With a cryptic smile, Ali responded, "Perhaps fate brought me here for a reason. The Misty Peak holds secrets that could benefit us all if we work together." His words hung in the air, a subtle invitation for collaboration in a world rife with competition and hidden agendas.

---
Jin's expression softened slightly, intrigue mingling with his pride as a sect disciple. "Prove your worth then, outsider. Show us what you're made of." The challenge was clear, a test of Ali's abilities and intentions in a realm where strength dictated respect.

---
As Ali prepared to demonstrate his cultivation skills, a sudden tremor shook the ruins, threatening to collapse the ancient structures around them. Jin's disciples scrambled for safety, but Ali stood firm, his instincts guiding him to a solution that could turn the tide in his favor.

---
With a swift motion, Ali channeled his qi into the earth, stabilizing the foundations and protecting the disciples from harm. Jin's eyes widened in astonishment, a newfound respect blooming within him for the outsider who wielded power beyond their expectations.

---
The ruins settled, the danger averted, and Ali turned to Jin with a knowing gaze. "We have much to gain from each other, Jin. Together, we can forge an alliance that transcends sect boundaries and reshapes the future of cultivation."

---

[NEW CHARACTERS]
Name: Jin
Relationship: Potential Ally/Trial
Sect: Thunderclap Sect
Role: Disciple Leader

[/NEW CHARACTERS]

[CHOICES]
1. Offer Jin and his disciples your guidance in exploring the Misty Peak's secrets, showcasing your knowledge and fostering trust for a potential alliance.
2. Challenge Jin to a friendly spar, showcasing your cultivation skills and earning his respect through a display of strength and technique.
3. Propose a joint investigation into the origin of the tremors in the ruins, using your past insights to uncover a hidden danger that could threaten both your sects. 

[/CHOICES]
2025-06-12 19:09:15,906 - app.models.base_genre - INFO - ============================================================
2025-06-12 19:09:15,908 - app.models.base_genre - INFO - Successfully parsed genre response: story=2607 chars, choices=3
2025-06-12 19:09:15,909 - app.storage.storage - INFO - Using provided arc goals: 7 goals
2025-06-12 19:09:15,909 - app.storage.storage - INFO - Using provided arc goal: Recruit young talents to form a powerful alliance early.
2025-06-12 19:09:15,909 - app.storage.storage - INFO - Initialized memory with big goal: 'Use your knowledge of a tragic future life to change fate, protect your loved ones, and prevent the fall of your world.' and arc goal: 'Recruit young talents to form a powerful alliance early.'
2025-06-12 19:09:15,909 - app.storage.storage - INFO - Arc progression: 1/7, Chapter: 1/7
2025-06-12 19:09:15,909 - app.storage.storage - INFO - Overall story progress: Chapter 1/50 (2%)
2025-06-12 19:09:16,057 - app.services.firebase_service - INFO - Saved story story_1749780555_e2a8fcc8: Ali's cultivation shonen
2025-06-12 19:09:16,057 - app.storage.storage - INFO - Saved story story_1749780555_e2a8fcc8: Ali's cultivation shonen
2025-06-12 19:09:16,058 - app.storage.storage - INFO - Created new story: story_1749780555_e2a8fcc8: Ali's cultivation shonen
2025-06-12 19:09:16,058 - app.services.story_planner - INFO - Found [NEW CHARACTERS] section: Name: Jin
Relationship: Potential Ally/Trial
Sect: Thunderclap Sect
Role: Disciple Leader
2025-06-12 19:09:16,059 - app.services.story_planner - INFO - Extracted character from section: Jin - Potential Ally/Trial
2025-06-12 19:09:16,060 - app.services.story_planner - INFO - Adding new character: Jin (Potential Ally/Trial)
2025-06-12 19:09:16,060 - app.services.story_planner - INFO - Memory now has 1 characters: Jin
2025-06-12 19:09:16,207 - app.services.firebase_service - INFO - Saved story story_1749780555_e2a8fcc8: Ali's cultivation shonen
2025-06-12 19:09:16,207 - app.storage.storage - INFO - Saved story story_1749780555_e2a8fcc8: Ali's cultivation shonen
2025-06-12 19:09:16,208 - app.api - INFO - Extracted characters from initial story content for Ali
2025-06-12 19:09:16,533 - app.services.usage_service - INFO - Updated usage for user: h3GkK3ksTWhz3xeT9h7E4k6Jw7v2
2025-06-12 19:09:16,943 - werkzeug - INFO - 127.0.0.1 - - [12/Jun/2025 19:09:16] "POST /api/stories HTTP/1.1" 200 -
2025-06-12 19:09:17,162 - app.services.firebase_service - ERROR - Error retrieving story: 1 validation error for Story
memory
  Input should be a valid dictionary or instance of StoryMemory [type=model_type, input_value=[{'locations': {}, 'culti...on."\n---\n\n[CHOICES]'], input_type=list]
    For further information visit https://errors.pydantic.dev/2.5/v/model_type
2025-06-12 19:09:17,163 - app.storage.storage - INFO - Story not found: story_1749780555_e2a8fcc8
2025-06-12 19:09:17,163 - werkzeug - INFO - 127.0.0.1 - - [12/Jun/2025 19:09:17] "[33mOPTIONS /api/stories/story_1749780555_e2a8fcc8 HTTP/1.1[0m" 404 -
2025-06-12 19:09:17,166 - app.services.firebase_service - ERROR - Error retrieving story: 1 validation error for Story
memory
  Input should be a valid dictionary or instance of StoryMemory [type=model_type, input_value=[{'locations': {}, 'culti...on."\n---\n\n[CHOICES]'], input_type=list]
    For further information visit https://errors.pydantic.dev/2.5/v/model_type
2025-06-12 19:09:17,166 - app.storage.storage - INFO - Story not found: story_1749780555_e2a8fcc8
2025-06-12 19:09:17,166 - werkzeug - INFO - 127.0.0.1 - - [12/Jun/2025 19:09:17] "[33mOPTIONS /api/stories/story_1749780555_e2a8fcc8 HTTP/1.1[0m" 404 -
2025-06-12 19:09:25,764 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_setting.py', reloading
2025-06-12 19:09:27,872 - werkzeug - INFO -  * Restarting with stat
2025-06-12 19:09:28,356 - app.services.firebase_service - ERROR - Error initializing with FIREBASE_CREDENTIALS: Invalid control character at: line 1 column 162 (char 161)
2025-06-12 19:09:28,356 - app.services.firebase_service - ERROR - Error initializing with direct credentials: Failed to initialize a certificate credential. Caused by: "Unable to load PEM file. See https://cryptography.io/en/latest/faq/#why-can-t-i-import-my-pem-file for more details. InvalidData(InvalidByte(1600, 61))"
2025-06-12 19:09:28,357 - app.services.firebase_service - ERROR - Error creating temporary service account file: Failed to initialize a certificate credential. Caused by: "Unable to load PEM file. See https://cryptography.io/en/latest/faq/#why-can-t-i-import-my-pem-file for more details. InvalidData(InvalidByte(1600, 61))"
2025-06-12 19:09:28,418 - app.services.firebase_service - INFO - Initialized with default credentials
2025-06-12 19:09:28,476 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-12 19:09:28,476 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-12 19:09:28,480 - root - INFO - Starting StoryTeller API server...
2025-06-12 19:09:28,480 - root - INFO - Host: 0.0.0.0
2025-06-12 19:09:28,480 - root - INFO - Port: 5001
2025-06-12 19:09:28,480 - root - INFO - Debug mode: True
2025-06-12 19:09:28,483 - werkzeug - WARNING -  * Debugger is active!
2025-06-12 19:09:28,488 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-12 19:09:30,726 - werkzeug - INFO - 127.0.0.1 - - [12/Jun/2025 19:09:30] "OPTIONS /api/status HTTP/1.1" 200 -
2025-06-12 19:09:30,728 - werkzeug - INFO - 127.0.0.1 - - [12/Jun/2025 19:09:30] "OPTIONS /api/status HTTP/1.1" 200 -
2025-06-12 19:09:30,730 - werkzeug - INFO - 127.0.0.1 - - [12/Jun/2025 19:09:30] "GET /api/status HTTP/1.1" 200 -
2025-06-12 19:09:30,731 - werkzeug - INFO - 127.0.0.1 - - [12/Jun/2025 19:09:30] "GET /api/status HTTP/1.1" 200 -
2025-06-12 19:09:40,872 - app.services.firebase_service - INFO - Retrieved 3 stories
2025-06-12 19:09:40,874 - app.storage.storage - INFO - Retrieved 3 stories
2025-06-12 19:09:40,875 - werkzeug - INFO - 127.0.0.1 - - [12/Jun/2025 19:09:40] "OPTIONS /api/stories HTTP/1.1" 200 -
2025-06-12 19:09:40,879 - app.auth - INFO - Authentication successful for user: h3GkK3ksTWhz3xeT9h7E4k6Jw7v2
2025-06-12 19:09:41,057 - app.services.firebase_service - INFO - Retrieved 2 stories for user h3GkK3ksTWhz3xeT9h7E4k6Jw7v2
2025-06-12 19:09:41,058 - app.storage.storage - INFO - Retrieved 2 stories for user h3GkK3ksTWhz3xeT9h7E4k6Jw7v2
2025-06-12 19:09:41,441 - app.services.ai_service - INFO - Generated big story goal: Use your knowledge of a tragic future life to change fate, protect your loved ones, and prevent the fall of your world.
2025-06-12 19:09:41,441 - app.services.ai_service - INFO - Using cultivation genre for initial story
2025-06-12 19:09:41,441 - app.services.story_planner - INFO - Calculated number of arcs: 7 based on 50 chapters and 7 chapters per arc
2025-06-12 19:09:41,442 - app.services.story_planner - INFO - Found exact match for goal: 'Use your knowledge of a tragic future life to change fate, protect your loved ones, and prevent the fall of your world.'
2025-06-12 19:09:41,442 - app.services.story_planner - INFO - Generated 7 new arc goals for theme: 'past_life'
2025-06-12 19:09:41,442 - app.genres.cultivation_setting - INFO - Generated 7 arc goals. Initial arc goal: Break the cycle of destruction and lead your realm into a new era.
2025-06-12 19:09:41,442 - app.genres.cultivation_setting - INFO - Generating cultivation progression story for Ali
2025-06-12 19:09:41,442 - app.models.base_genre - INFO - Generating story for Ali
2025-06-12 19:09:50,346 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-12 19:09:50,350 - app.models.base_genre - INFO - ðŸŽ­ GENRE GPT RESPONSE (2300 chars):
2025-06-12 19:09:50,350 - app.models.base_genre - INFO - ============================================================
2025-06-12 19:09:50,351 - app.models.base_genre - INFO - [STORY]
Ali stood at the entrance of the Celestial Peaks Sect, the wind carrying the whispers of martial arts techniques practiced within. Memories of his past life flooded his mind, guiding him towards his goal. As he stepped forward, determined to change the fate of this world, a voice interrupted his thoughts.

---
A young disciple, Lei, approached Ali with a challenging gaze. "You must prove your worth to enter the Sect. Show us your strength, outsider."

---
Ali smiled, acknowledging the test. He raised his hand, gathering the essence of the surrounding nature, forming a swirling vortex of azure qi. With a swift movement, he unleashed the technique, creating a mesmerizing display of power that reverberated through the air.

---
Impressed by the display, Lei's demeanor shifted. "Your control of qi is exceptional. Follow me, I will take you to the Sect Leader."

---
As Ali followed Lei through the Sect, he noticed the intricate cultivation chambers and the dedication of the disciples. The knowledge from his past life resonated with each practice he witnessed, providing insights and strategies beyond the ordinary cultivator.

---
Finally, Ali stood before the Sect Leader, a wise cultivator named Master Jin. "You seek to break the cycle of destruction, Ali. Prove your dedication to our cause, and you shall find allies here."

---
Master Jin handed Ali a scroll, containing the ancient technique of "Celestial Harmony," a cultivation method lost to time. "Master this technique, and you will take the first step towards leading our realm into a new era."

---
As Ali left to begin his training, a shadowy figure watched from a distance, their eyes filled with curiosity and hidden intentions.

---

[NEW CHARACTERS]
Name: Lei
Relationship: Disciple of the Celestial Peaks Sect
Sect: Celestial Peaks Sect
Role: Test challenger and guide for Ali

Name: Master Jin
Relationship: Sect Leader
Sect: Celestial Peaks Sect
Role: Wise cultivator and mentor to Ali
[/NEW CHARACTERS]

[CHOICES]
1. Study the "Celestial Harmony" technique diligently, seeking mastery to impress the Sect.
2. Approach Lei for insights into the Sect's inner workings and potential allies.
3. Investigate the shadowy figure to uncover their motives and potential threats to the Celestial Peaks Sect.
[/CHOICES]
2025-06-12 19:09:50,351 - app.models.base_genre - INFO - ============================================================
2025-06-12 19:09:50,352 - app.models.base_genre - INFO - Successfully parsed genre response: story=1994 chars, choices=3
2025-06-12 19:09:50,353 - app.storage.storage - INFO - Using provided arc goals: 7 goals
2025-06-12 19:09:50,354 - app.storage.storage - INFO - Using provided arc goal: Break the cycle of destruction and lead your realm into a new era.
2025-06-12 19:09:50,354 - app.storage.storage - INFO - Initialized memory with big goal: 'Use your knowledge of a tragic future life to change fate, protect your loved ones, and prevent the fall of your world.' and arc goal: 'Break the cycle of destruction and lead your realm into a new era.'
2025-06-12 19:09:50,354 - app.storage.storage - INFO - Arc progression: 1/7, Chapter: 1/7
2025-06-12 19:09:50,354 - app.storage.storage - INFO - Overall story progress: Chapter 1/50 (2%)
2025-06-12 19:09:50,508 - app.services.firebase_service - INFO - Saved story story_1749780590_a1da02c3: Ali's cultivation shonen
2025-06-12 19:09:50,508 - app.storage.storage - INFO - Saved story story_1749780590_a1da02c3: Ali's cultivation shonen
2025-06-12 19:09:50,508 - app.storage.storage - INFO - Created new story: story_1749780590_a1da02c3: Ali's cultivation shonen
2025-06-12 19:09:50,509 - app.services.story_planner - INFO - Found [NEW CHARACTERS] section: Name: Lei
Relationship: Disciple of the Celestial Peaks Sect
Sect: Celestial Peaks Sect
Role: Test challenger and guide for Ali
Name: Master Jin
Relationship: Sect Leader
Sect: Celestial Peaks Sect
Role: Wise cultivator and mentor to Ali
2025-06-12 19:09:50,509 - app.services.story_planner - INFO - Extracted character from section: Lei - Disciple of the Celestial Peaks Sect
2025-06-12 19:09:50,509 - app.services.story_planner - INFO - Adding new character: Lei (Disciple of the Celestial Peaks Sect)
2025-06-12 19:09:50,510 - app.services.story_planner - INFO - Memory now has 1 characters: Lei
2025-06-12 19:09:50,742 - app.services.firebase_service - INFO - Saved story story_1749780590_a1da02c3: Ali's cultivation shonen
2025-06-12 19:09:50,743 - app.storage.storage - INFO - Saved story story_1749780590_a1da02c3: Ali's cultivation shonen
2025-06-12 19:09:50,743 - app.api - INFO - Extracted characters from initial story content for Ali
2025-06-12 19:09:51,091 - app.services.usage_service - INFO - Updated usage for user: h3GkK3ksTWhz3xeT9h7E4k6Jw7v2
2025-06-12 19:09:51,542 - werkzeug - INFO - 127.0.0.1 - - [12/Jun/2025 19:09:51] "POST /api/stories HTTP/1.1" 200 -
2025-06-12 19:09:51,832 - app.services.firebase_service - ERROR - Error retrieving story: 1 validation error for Story
memory
  Input should be a valid dictionary or instance of StoryMemory [type=model_type, input_value=[{'important_items': {}, ...ons.\n---\n\n[CHOICES]'], input_type=list]
    For further information visit https://errors.pydantic.dev/2.5/v/model_type
2025-06-12 19:09:51,832 - app.storage.storage - INFO - Story not found: story_1749780590_a1da02c3
2025-06-12 19:09:51,833 - werkzeug - INFO - 127.0.0.1 - - [12/Jun/2025 19:09:51] "[33mOPTIONS /api/stories/story_1749780590_a1da02c3 HTTP/1.1[0m" 404 -
2025-06-12 19:09:51,965 - app.services.firebase_service - ERROR - Error retrieving story: 1 validation error for Story
memory
  Input should be a valid dictionary or instance of StoryMemory [type=model_type, input_value=[{'important_items': {}, ...ons.\n---\n\n[CHOICES]'], input_type=list]
    For further information visit https://errors.pydantic.dev/2.5/v/model_type
2025-06-12 19:09:51,965 - app.storage.storage - INFO - Story not found: story_1749780590_a1da02c3
2025-06-12 19:09:51,965 - werkzeug - INFO - 127.0.0.1 - - [12/Jun/2025 19:09:51] "[33mOPTIONS /api/stories/story_1749780590_a1da02c3 HTTP/1.1[0m" 404 -
2025-06-12 19:17:00,752 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/services/story_planner.py', reloading
2025-06-12 19:17:02,864 - werkzeug - INFO -  * Restarting with stat
2025-06-12 19:17:03,377 - app.services.firebase_service - ERROR - Error initializing with FIREBASE_CREDENTIALS: Invalid control character at: line 1 column 162 (char 161)
2025-06-12 19:17:03,377 - app.services.firebase_service - ERROR - Error initializing with direct credentials: Failed to initialize a certificate credential. Caused by: "Unable to load PEM file. See https://cryptography.io/en/latest/faq/#why-can-t-i-import-my-pem-file for more details. InvalidData(InvalidByte(1600, 61))"
2025-06-12 19:17:03,378 - app.services.firebase_service - ERROR - Error creating temporary service account file: Failed to initialize a certificate credential. Caused by: "Unable to load PEM file. See https://cryptography.io/en/latest/faq/#why-can-t-i-import-my-pem-file for more details. InvalidData(InvalidByte(1600, 61))"
2025-06-12 19:17:03,440 - app.services.firebase_service - INFO - Initialized with default credentials
2025-06-12 19:17:03,496 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-12 19:17:03,497 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-12 19:17:03,501 - root - INFO - Starting StoryTeller API server...
2025-06-12 19:17:03,501 - root - INFO - Host: 0.0.0.0
2025-06-12 19:17:03,501 - root - INFO - Port: 5001
2025-06-12 19:17:03,501 - root - INFO - Debug mode: True
2025-06-12 19:17:03,503 - werkzeug - WARNING -  * Debugger is active!
2025-06-12 19:17:03,509 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-12 19:17:17,654 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_setting.py', reloading
2025-06-12 19:17:17,721 - werkzeug - INFO -  * Restarting with stat
2025-06-12 19:17:18,084 - app.services.firebase_service - ERROR - Error initializing with FIREBASE_CREDENTIALS: Invalid control character at: line 1 column 162 (char 161)
2025-06-12 19:17:18,084 - app.services.firebase_service - ERROR - Error initializing with direct credentials: Failed to initialize a certificate credential. Caused by: "Unable to load PEM file. See https://cryptography.io/en/latest/faq/#why-can-t-i-import-my-pem-file for more details. InvalidData(InvalidByte(1600, 61))"
2025-06-12 19:17:18,085 - app.services.firebase_service - ERROR - Error creating temporary service account file: Failed to initialize a certificate credential. Caused by: "Unable to load PEM file. See https://cryptography.io/en/latest/faq/#why-can-t-i-import-my-pem-file for more details. InvalidData(InvalidByte(1600, 61))"
2025-06-12 19:17:18,145 - app.services.firebase_service - INFO - Initialized with default credentials
2025-06-12 19:17:18,186 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-12 19:17:18,186 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-12 19:17:18,190 - root - INFO - Starting StoryTeller API server...
2025-06-12 19:17:18,190 - root - INFO - Host: 0.0.0.0
2025-06-12 19:17:18,190 - root - INFO - Port: 5001
2025-06-12 19:17:18,190 - root - INFO - Debug mode: True
2025-06-12 19:17:18,192 - werkzeug - WARNING -  * Debugger is active!
2025-06-12 19:17:18,197 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-12 19:17:35,366 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_setting.py', reloading
2025-06-12 19:17:35,434 - werkzeug - INFO -  * Restarting with stat
2025-06-12 19:17:35,801 - app.services.firebase_service - ERROR - Error initializing with FIREBASE_CREDENTIALS: Invalid control character at: line 1 column 162 (char 161)
2025-06-12 19:17:35,801 - app.services.firebase_service - ERROR - Error initializing with direct credentials: Failed to initialize a certificate credential. Caused by: "Unable to load PEM file. See https://cryptography.io/en/latest/faq/#why-can-t-i-import-my-pem-file for more details. InvalidData(InvalidByte(1600, 61))"
2025-06-12 19:17:35,802 - app.services.firebase_service - ERROR - Error creating temporary service account file: Failed to initialize a certificate credential. Caused by: "Unable to load PEM file. See https://cryptography.io/en/latest/faq/#why-can-t-i-import-my-pem-file for more details. InvalidData(InvalidByte(1600, 61))"
2025-06-12 19:17:35,863 - app.services.firebase_service - INFO - Initialized with default credentials
2025-06-12 19:17:35,904 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-12 19:17:35,904 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-12 19:17:35,908 - root - INFO - Starting StoryTeller API server...
2025-06-12 19:17:35,908 - root - INFO - Host: 0.0.0.0
2025-06-12 19:17:35,908 - root - INFO - Port: 5001
2025-06-12 19:17:35,908 - root - INFO - Debug mode: True
2025-06-12 19:17:35,910 - werkzeug - WARNING -  * Debugger is active!
2025-06-12 19:17:35,915 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-12 19:17:53,067 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/api.py', reloading
2025-06-12 19:17:53,148 - werkzeug - INFO -  * Restarting with stat
2025-06-12 19:17:53,499 - app.services.firebase_service - ERROR - Error initializing with FIREBASE_CREDENTIALS: Invalid control character at: line 1 column 162 (char 161)
2025-06-12 19:17:53,499 - app.services.firebase_service - ERROR - Error initializing with direct credentials: Failed to initialize a certificate credential. Caused by: "Unable to load PEM file. See https://cryptography.io/en/latest/faq/#why-can-t-i-import-my-pem-file for more details. InvalidData(InvalidByte(1600, 61))"
2025-06-12 19:17:53,500 - app.services.firebase_service - ERROR - Error creating temporary service account file: Failed to initialize a certificate credential. Caused by: "Unable to load PEM file. See https://cryptography.io/en/latest/faq/#why-can-t-i-import-my-pem-file for more details. InvalidData(InvalidByte(1600, 61))"
2025-06-12 19:17:53,560 - app.services.firebase_service - INFO - Initialized with default credentials
2025-06-12 19:17:53,602 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-12 19:17:53,602 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-12 19:17:53,606 - root - INFO - Starting StoryTeller API server...
2025-06-12 19:17:53,606 - root - INFO - Host: 0.0.0.0
2025-06-12 19:17:53,606 - root - INFO - Port: 5001
2025-06-12 19:17:53,606 - root - INFO - Debug mode: True
2025-06-12 19:17:53,608 - werkzeug - WARNING -  * Debugger is active!
2025-06-12 19:17:53,614 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-12 19:18:06,747 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/api.py', reloading
2025-06-12 19:18:06,827 - werkzeug - INFO -  * Restarting with stat
2025-06-12 19:18:07,183 - app.services.firebase_service - ERROR - Error initializing with FIREBASE_CREDENTIALS: Invalid control character at: line 1 column 162 (char 161)
2025-06-12 19:18:07,183 - app.services.firebase_service - ERROR - Error initializing with direct credentials: Failed to initialize a certificate credential. Caused by: "Unable to load PEM file. See https://cryptography.io/en/latest/faq/#why-can-t-i-import-my-pem-file for more details. InvalidData(InvalidByte(1600, 61))"
2025-06-12 19:18:07,184 - app.services.firebase_service - ERROR - Error creating temporary service account file: Failed to initialize a certificate credential. Caused by: "Unable to load PEM file. See https://cryptography.io/en/latest/faq/#why-can-t-i-import-my-pem-file for more details. InvalidData(InvalidByte(1600, 61))"
2025-06-12 19:18:07,245 - app.services.firebase_service - INFO - Initialized with default credentials
2025-06-12 19:18:07,286 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-12 19:18:07,287 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-12 19:18:07,290 - root - INFO - Starting StoryTeller API server...
2025-06-12 19:18:07,290 - root - INFO - Host: 0.0.0.0
2025-06-12 19:18:07,291 - root - INFO - Port: 5001
2025-06-12 19:18:07,291 - root - INFO - Debug mode: True
2025-06-12 19:18:07,292 - werkzeug - WARNING -  * Debugger is active!
2025-06-12 19:18:07,298 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-12 19:18:31,512 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/api.py', reloading
2025-06-12 19:18:31,590 - werkzeug - INFO -  * Restarting with stat
2025-06-12 19:18:31,940 - app.services.firebase_service - ERROR - Error initializing with FIREBASE_CREDENTIALS: Invalid control character at: line 1 column 162 (char 161)
2025-06-12 19:18:31,940 - app.services.firebase_service - ERROR - Error initializing with direct credentials: Failed to initialize a certificate credential. Caused by: "Unable to load PEM file. See https://cryptography.io/en/latest/faq/#why-can-t-i-import-my-pem-file for more details. InvalidData(InvalidByte(1600, 61))"
2025-06-12 19:18:31,941 - app.services.firebase_service - ERROR - Error creating temporary service account file: Failed to initialize a certificate credential. Caused by: "Unable to load PEM file. See https://cryptography.io/en/latest/faq/#why-can-t-i-import-my-pem-file for more details. InvalidData(InvalidByte(1600, 61))"
2025-06-12 19:18:32,003 - app.services.firebase_service - INFO - Initialized with default credentials
2025-06-12 19:18:32,046 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-12 19:18:32,046 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-12 19:18:32,050 - root - INFO - Starting StoryTeller API server...
2025-06-12 19:18:32,050 - root - INFO - Host: 0.0.0.0
2025-06-12 19:18:32,050 - root - INFO - Port: 5001
2025-06-12 19:18:32,050 - root - INFO - Debug mode: True
2025-06-12 19:18:32,052 - werkzeug - WARNING -  * Debugger is active!
2025-06-12 19:18:32,057 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-12 19:19:00,322 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/services/ai_service.py', reloading
2025-06-12 19:19:00,409 - werkzeug - INFO -  * Restarting with stat
2025-06-12 19:19:00,761 - app.services.firebase_service - ERROR - Error initializing with FIREBASE_CREDENTIALS: Invalid control character at: line 1 column 162 (char 161)
2025-06-12 19:19:00,761 - app.services.firebase_service - ERROR - Error initializing with direct credentials: Failed to initialize a certificate credential. Caused by: "Unable to load PEM file. See https://cryptography.io/en/latest/faq/#why-can-t-i-import-my-pem-file for more details. InvalidData(InvalidByte(1600, 61))"
2025-06-12 19:19:00,762 - app.services.firebase_service - ERROR - Error creating temporary service account file: Failed to initialize a certificate credential. Caused by: "Unable to load PEM file. See https://cryptography.io/en/latest/faq/#why-can-t-i-import-my-pem-file for more details. InvalidData(InvalidByte(1600, 61))"
2025-06-12 19:19:00,824 - app.services.firebase_service - INFO - Initialized with default credentials
2025-06-12 19:19:00,867 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-12 19:19:00,867 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-12 19:19:00,874 - root - INFO - Starting StoryTeller API server...
2025-06-12 19:19:00,875 - root - INFO - Host: 0.0.0.0
2025-06-12 19:19:00,875 - root - INFO - Port: 5001
2025-06-12 19:19:00,875 - root - INFO - Debug mode: True
2025-06-12 19:19:00,877 - werkzeug - WARNING -  * Debugger is active!
2025-06-12 19:19:00,882 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-12 19:19:33,149 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/genres/cultivation_setting.py', reloading
2025-06-12 19:19:33,216 - werkzeug - INFO -  * Restarting with stat
2025-06-12 19:19:33,598 - app.services.firebase_service - ERROR - Error initializing with FIREBASE_CREDENTIALS: Invalid control character at: line 1 column 162 (char 161)
2025-06-12 19:19:33,598 - app.services.firebase_service - ERROR - Error initializing with direct credentials: Failed to initialize a certificate credential. Caused by: "Unable to load PEM file. See https://cryptography.io/en/latest/faq/#why-can-t-i-import-my-pem-file for more details. InvalidData(InvalidByte(1600, 61))"
2025-06-12 19:19:33,599 - app.services.firebase_service - ERROR - Error creating temporary service account file: Failed to initialize a certificate credential. Caused by: "Unable to load PEM file. See https://cryptography.io/en/latest/faq/#why-can-t-i-import-my-pem-file for more details. InvalidData(InvalidByte(1600, 61))"
2025-06-12 19:19:33,664 - app.services.firebase_service - INFO - Initialized with default credentials
2025-06-12 19:19:33,714 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-12 19:19:33,714 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-12 19:19:33,719 - root - INFO - Starting StoryTeller API server...
2025-06-12 19:19:33,719 - root - INFO - Host: 0.0.0.0
2025-06-12 19:19:33,719 - root - INFO - Port: 5001
2025-06-12 19:19:33,719 - root - INFO - Debug mode: True
2025-06-12 19:19:33,721 - werkzeug - WARNING -  * Debugger is active!
2025-06-12 19:19:33,728 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-12 19:19:48,855 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/services/story_planner.py', reloading
2025-06-12 19:19:48,931 - werkzeug - INFO -  * Restarting with stat
2025-06-12 19:19:49,300 - app.services.firebase_service - ERROR - Error initializing with FIREBASE_CREDENTIALS: Invalid control character at: line 1 column 162 (char 161)
2025-06-12 19:19:49,301 - app.services.firebase_service - ERROR - Error initializing with direct credentials: Failed to initialize a certificate credential. Caused by: "Unable to load PEM file. See https://cryptography.io/en/latest/faq/#why-can-t-i-import-my-pem-file for more details. InvalidData(InvalidByte(1600, 61))"
2025-06-12 19:19:49,301 - app.services.firebase_service - ERROR - Error creating temporary service account file: Failed to initialize a certificate credential. Caused by: "Unable to load PEM file. See https://cryptography.io/en/latest/faq/#why-can-t-i-import-my-pem-file for more details. InvalidData(InvalidByte(1600, 61))"
2025-06-12 19:19:49,363 - app.services.firebase_service - INFO - Initialized with default credentials
2025-06-12 19:19:49,408 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-12 19:19:49,409 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-12 19:19:49,413 - root - INFO - Starting StoryTeller API server...
2025-06-12 19:19:49,413 - root - INFO - Host: 0.0.0.0
2025-06-12 19:19:49,413 - root - INFO - Port: 5001
2025-06-12 19:19:49,413 - root - INFO - Debug mode: True
2025-06-12 19:19:49,415 - werkzeug - WARNING -  * Debugger is active!
2025-06-12 19:19:49,421 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-12 19:20:53,959 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/api.py', reloading
2025-06-12 19:20:54,046 - werkzeug - INFO -  * Restarting with stat
2025-06-12 19:20:54,426 - app.services.firebase_service - ERROR - Error initializing with FIREBASE_CREDENTIALS: Invalid control character at: line 1 column 162 (char 161)
2025-06-12 19:20:54,426 - app.services.firebase_service - ERROR - Error initializing with direct credentials: Failed to initialize a certificate credential. Caused by: "Unable to load PEM file. See https://cryptography.io/en/latest/faq/#why-can-t-i-import-my-pem-file for more details. InvalidData(InvalidByte(1600, 61))"
2025-06-12 19:20:54,427 - app.services.firebase_service - ERROR - Error creating temporary service account file: Failed to initialize a certificate credential. Caused by: "Unable to load PEM file. See https://cryptography.io/en/latest/faq/#why-can-t-i-import-my-pem-file for more details. InvalidData(InvalidByte(1600, 61))"
2025-06-12 19:20:54,488 - app.services.firebase_service - INFO - Initialized with default credentials
2025-06-12 19:20:54,533 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-12 19:20:54,533 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-12 19:20:54,537 - root - INFO - Starting StoryTeller API server...
2025-06-12 19:20:54,537 - root - INFO - Host: 0.0.0.0
2025-06-12 19:20:54,537 - root - INFO - Port: 5001
2025-06-12 19:20:54,537 - root - INFO - Debug mode: True
2025-06-12 19:20:54,539 - werkzeug - WARNING -  * Debugger is active!
2025-06-12 19:20:54,545 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-12 19:20:59,589 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/api.py', reloading
2025-06-12 19:20:59,660 - werkzeug - INFO -  * Restarting with stat
2025-06-12 19:21:00,031 - app.services.firebase_service - ERROR - Error initializing with FIREBASE_CREDENTIALS: Invalid control character at: line 1 column 162 (char 161)
2025-06-12 19:21:00,032 - app.services.firebase_service - ERROR - Error initializing with direct credentials: Failed to initialize a certificate credential. Caused by: "Unable to load PEM file. See https://cryptography.io/en/latest/faq/#why-can-t-i-import-my-pem-file for more details. InvalidData(InvalidByte(1600, 61))"
2025-06-12 19:21:00,032 - app.services.firebase_service - ERROR - Error creating temporary service account file: Failed to initialize a certificate credential. Caused by: "Unable to load PEM file. See https://cryptography.io/en/latest/faq/#why-can-t-i-import-my-pem-file for more details. InvalidData(InvalidByte(1600, 61))"
2025-06-12 19:21:00,095 - app.services.firebase_service - INFO - Initialized with default credentials
2025-06-12 19:21:00,141 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-12 19:21:00,141 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-12 19:21:00,145 - root - INFO - Starting StoryTeller API server...
2025-06-12 19:21:00,145 - root - INFO - Host: 0.0.0.0
2025-06-12 19:21:00,145 - root - INFO - Port: 5001
2025-06-12 19:21:00,145 - root - INFO - Debug mode: True
2025-06-12 19:21:00,147 - werkzeug - WARNING -  * Debugger is active!
2025-06-12 19:21:00,154 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-12 19:21:11,255 - werkzeug - INFO -  * Detected change in '/Users/alibabaei/Projects/storyTeller/storyteller-python/app/services/ai_service.py', reloading
2025-06-12 19:21:11,316 - werkzeug - INFO -  * Restarting with stat
2025-06-12 19:21:11,688 - app.services.firebase_service - ERROR - Error initializing with FIREBASE_CREDENTIALS: Invalid control character at: line 1 column 162 (char 161)
2025-06-12 19:21:11,688 - app.services.firebase_service - ERROR - Error initializing with direct credentials: Failed to initialize a certificate credential. Caused by: "Unable to load PEM file. See https://cryptography.io/en/latest/faq/#why-can-t-i-import-my-pem-file for more details. InvalidData(InvalidByte(1600, 61))"
2025-06-12 19:21:11,689 - app.services.firebase_service - ERROR - Error creating temporary service account file: Failed to initialize a certificate credential. Caused by: "Unable to load PEM file. See https://cryptography.io/en/latest/faq/#why-can-t-i-import-my-pem-file for more details. InvalidData(InvalidByte(1600, 61))"
2025-06-12 19:21:11,753 - app.services.firebase_service - INFO - Initialized with default credentials
2025-06-12 19:21:11,798 - app.auth - INFO - Using Firebase Project ID: storyteller-6deea
2025-06-12 19:21:11,798 - app.auth - WARNING - DEVELOPMENT MODE: Using simplified token validation
2025-06-12 19:21:11,802 - root - INFO - Starting StoryTeller API server...
2025-06-12 19:21:11,802 - root - INFO - Host: 0.0.0.0
2025-06-12 19:21:11,802 - root - INFO - Port: 5001
2025-06-12 19:21:11,802 - root - INFO - Debug mode: True
2025-06-12 19:21:11,804 - werkzeug - WARNING -  * Debugger is active!
2025-06-12 19:21:11,810 - werkzeug - INFO -  * Debugger PIN: 143-601-283
2025-06-12 19:21:14,346 - werkzeug - INFO - 127.0.0.1 - - [12/Jun/2025 19:21:14] "OPTIONS /api/status HTTP/1.1" 200 -
2025-06-12 19:21:14,348 - werkzeug - INFO - 127.0.0.1 - - [12/Jun/2025 19:21:14] "GET /api/status HTTP/1.1" 200 -
2025-06-12 19:21:14,349 - werkzeug - INFO - 127.0.0.1 - - [12/Jun/2025 19:21:14] "GET /api/status HTTP/1.1" 200 -
2025-06-12 19:21:25,348 - app.services.firebase_service - INFO - Retrieved 4 stories
2025-06-12 19:21:25,349 - app.storage.storage - INFO - Retrieved 4 stories
2025-06-12 19:21:25,350 - werkzeug - INFO - 127.0.0.1 - - [12/Jun/2025 19:21:25] "OPTIONS /api/stories HTTP/1.1" 200 -
2025-06-12 19:21:25,353 - app.auth - INFO - Authentication successful for user: h3GkK3ksTWhz3xeT9h7E4k6Jw7v2
2025-06-12 19:21:25,535 - app.services.firebase_service - INFO - Retrieved 3 stories for user h3GkK3ksTWhz3xeT9h7E4k6Jw7v2
2025-06-12 19:21:25,535 - app.storage.storage - INFO - Retrieved 3 stories for user h3GkK3ksTWhz3xeT9h7E4k6Jw7v2
2025-06-12 19:21:25,795 - app.services.ai_service - INFO - Generated big story goal: Climb from the weakest rank to the peak of cultivation in order to defeat the powerful enemies who destroyed your family and bring justice to those who wronged you.
2025-06-12 19:21:25,796 - app.services.ai_service - INFO - Using cultivation genre for initial story
2025-06-12 19:21:25,796 - app.services.story_planner - INFO - Calculated number of arcs: 7 based on 50 chapters and 7 chapters per arc
2025-06-12 19:21:25,796 - app.services.story_planner - INFO - Found exact match for goal: 'Climb from the weakest rank to the peak of cultivation in order to defeat the powerful enemies who destroyed your family and bring justice to those who wronged you.'
2025-06-12 19:21:25,797 - app.services.story_planner - INFO - Generated 7 new arc goals for theme: 'revenge'
2025-06-12 19:21:25,797 - app.genres.cultivation_setting - INFO - Generated 7 arc goals. Initial arc goal: Join a prestigious academy or sect and prove yourself through deadly tournaments.
2025-06-12 19:21:25,798 - app.genres.cultivation_setting - INFO - Generating cultivation progression story for Ali
2025-06-12 19:21:25,798 - app.models.base_genre - INFO - Generating story for Ali
2025-06-12 19:21:36,357 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-12 19:21:36,372 - app.models.base_genre - INFO - ðŸŽ­ GENRE GPT RESPONSE (2617 chars):
2025-06-12 19:21:36,372 - app.models.base_genre - INFO - ============================================================
2025-06-12 19:21:36,372 - app.models.base_genre - INFO - [STORY]
Ali, a reincarnated soul with knowledge from a past life, gazes at the towering gates of the prestigious Starfall Sect. Determination gleams in his eyes as he takes the first step towards his goal of vengeance and justice. The bustling sect grounds hum with the energy of cultivators in training, their auras vibrant with different qi colors swirling around them. 
---
In the courtyard, Ali encounters a group of senior disciples practicing a unique cultivation technique called "Starfire Palm." Each strike emits fiery qi, lighting up the surroundings with its intense glow. Watching closely, Ali recognizes the technique's flaws and envisions subtle adjustments to enhance its power.
---
As dusk falls, the Sect Elder announces the upcoming Deadly Starfall Tournament, where disciples will compete to prove their strength and worth. Ali's eyes gleam with anticipation, seeing this as his chance to showcase his skills and rise through the ranks.
---
During a chance encounter at the sect library, Ali stumbles upon an ancient tome detailing the "Celestial Phoenix Form," a legendary technique lost to history. The illustrations depict graceful movements that resonate with Ali's soul, hinting at a connection from his past life.
---
In a training session, Ali faces off against a fellow disciple, Lei, known for his lightning-fast strikes. As the battle unfolds, Ali's strategic insights from his previous life guide him, allowing him to anticipate Lei's moves and counter with precision, showcasing his exceptional combat skills.
---
As the duel concludes, Lei, impressed by Ali's prowess, extends a hand in friendship, recognizing Ali's potential despite his humble beginnings. The camaraderie sparks a newfound sense of belonging in Ali, strengthening his resolve to excel in the Deadly Starfall Tournament.
---

[CHOICES]
1. Study the ancient tome further to unlock the secrets of the Celestial Phoenix Form, aiming to incorporate its elegance into your cultivation style.
2. Seek out Lei for guidance and training, hoping to learn from his lightning-fast techniques and build a strong alliance within the sect.
3. Approach the Sect Elder with a proposal to introduce a new cultivation technique to the tournament, showcasing your innovative thinking and earning recognition from the higher-ups.
[/CHOICES]

[NEW CHARACTERS]
Name: Lei
Relationship: Potential Ally/Friend
Sect: Starfall Sect
Role: Skilled disciple known for lightning-fast strikes
Name: Sect Elder (Name undisclosed)
Relationship: Authority Figure
Sect: Starfall Sect
Role: Elder overseeing sect affairs and tournaments
[/NEW CHARACTERS]
2025-06-12 19:21:36,372 - app.models.base_genre - INFO - ============================================================
2025-06-12 19:21:36,374 - app.models.base_genre - INFO - Successfully parsed genre response: story=1834 chars, choices=3
2025-06-12 19:21:36,374 - app.storage.storage - INFO - Using provided arc goals: 7 goals
2025-06-12 19:21:36,375 - app.storage.storage - INFO - Using provided arc goal: Join a prestigious academy or sect and prove yourself through deadly tournaments.
2025-06-12 19:21:36,375 - app.storage.storage - INFO - Initialized memory with big goal: 'Climb from the weakest rank to the peak of cultivation in order to defeat the powerful enemies who destroyed your family and bring justice to those who wronged you.' and arc goal: 'Join a prestigious academy or sect and prove yourself through deadly tournaments.'
2025-06-12 19:21:36,375 - app.storage.storage - INFO - Arc progression: 1/7, Chapter: 1/7
2025-06-12 19:21:36,375 - app.storage.storage - INFO - Overall story progress: Chapter 1/50 (2%)
2025-06-12 19:21:36,514 - app.services.firebase_service - INFO - Saved story story_1749781296_ef391443: Ali's cultivation shonen
2025-06-12 19:21:36,515 - app.storage.storage - INFO - Saved story story_1749781296_ef391443: Ali's cultivation shonen
2025-06-12 19:21:36,515 - app.storage.storage - INFO - Created new story: story_1749781296_ef391443: Ali's cultivation shonen
2025-06-12 19:21:36,517 - app.services.story_planner - INFO - No [NEW CHARACTERS] section found, using simplified detection
2025-06-12 19:21:36,641 - app.services.firebase_service - INFO - Saved story story_1749781296_ef391443: Ali's cultivation shonen
2025-06-12 19:21:36,641 - app.storage.storage - INFO - Saved story story_1749781296_ef391443: Ali's cultivation shonen
2025-06-12 19:21:36,641 - app.api - INFO - Extracted characters from initial story content for Ali
2025-06-12 19:21:36,916 - app.services.usage_service - INFO - Updated usage for user: h3GkK3ksTWhz3xeT9h7E4k6Jw7v2
2025-06-12 19:21:37,300 - werkzeug - INFO - 127.0.0.1 - - [12/Jun/2025 19:21:37] "POST /api/stories HTTP/1.1" 200 -
2025-06-12 19:21:37,498 - app.services.firebase_service - INFO - Retrieved story story_1749781296_ef391443: Ali's cultivation shonen
2025-06-12 19:21:37,498 - app.storage.storage - INFO - Retrieved story story_1749781296_ef391443: Ali's cultivation shonen
2025-06-12 19:21:37,499 - werkzeug - INFO - 127.0.0.1 - - [12/Jun/2025 19:21:37] "OPTIONS /api/stories/story_1749781296_ef391443 HTTP/1.1" 200 -
2025-06-12 19:21:37,609 - app.services.firebase_service - INFO - Retrieved story story_1749781296_ef391443: Ali's cultivation shonen
2025-06-12 19:21:37,609 - app.storage.storage - INFO - Retrieved story story_1749781296_ef391443: Ali's cultivation shonen
2025-06-12 19:21:37,611 - werkzeug - INFO - 127.0.0.1 - - [12/Jun/2025 19:21:37] "GET /api/stories/story_1749781296_ef391443 HTTP/1.1" 200 -
2025-06-12 19:21:37,645 - app.services.firebase_service - INFO - Retrieved story story_1749781296_ef391443: Ali's cultivation shonen
2025-06-12 19:21:37,645 - app.storage.storage - INFO - Retrieved story story_1749781296_ef391443: Ali's cultivation shonen
2025-06-12 19:21:37,646 - werkzeug - INFO - 127.0.0.1 - - [12/Jun/2025 19:21:37] "OPTIONS /api/stories/story_1749781296_ef391443 HTTP/1.1" 200 -
2025-06-12 19:21:37,828 - app.services.firebase_service - INFO - Retrieved story story_1749781296_ef391443: Ali's cultivation shonen
2025-06-12 19:21:37,828 - app.storage.storage - INFO - Retrieved story story_1749781296_ef391443: Ali's cultivation shonen
2025-06-12 19:21:37,829 - werkzeug - INFO - 127.0.0.1 - - [12/Jun/2025 19:21:37] "GET /api/stories/story_1749781296_ef391443 HTTP/1.1" 200 -
2025-06-12 19:22:44,737 - werkzeug - INFO - 127.0.0.1 - - [12/Jun/2025 19:22:44] "OPTIONS /api/stories/story_1749781296_ef391443/choices/1 HTTP/1.1" 200 -
2025-06-12 19:22:44,741 - app.auth - INFO - Authentication successful for user: h3GkK3ksTWhz3xeT9h7E4k6Jw7v2
2025-06-12 19:22:44,929 - app.services.firebase_service - INFO - Retrieved story story_1749781296_ef391443: Ali's cultivation shonen
2025-06-12 19:22:44,930 - app.storage.storage - INFO - Retrieved story story_1749781296_ef391443: Ali's cultivation shonen
2025-06-12 19:22:45,288 - app.services.usage_service - INFO - Updated usage for user: h3GkK3ksTWhz3xeT9h7E4k6Jw7v2
2025-06-12 19:22:45,476 - app.services.firebase_service - INFO - Retrieved story story_1749781296_ef391443: Ali's cultivation shonen
2025-06-12 19:22:45,476 - app.storage.storage - INFO - Retrieved story story_1749781296_ef391443: Ali's cultivation shonen
2025-06-12 19:22:45,606 - app.services.firebase_service - INFO - Saved story story_1749781296_ef391443: Ali's cultivation shonen
2025-06-12 19:22:45,607 - app.storage.storage - INFO - Saved story story_1749781296_ef391443: Ali's cultivation shonen
2025-06-12 19:22:45,607 - app.storage.storage - INFO - Saved choice 1 for node initial in story story_1749781296_ef391443
2025-06-12 19:22:45,608 - app.api - INFO - Generating continuation for story story_1749781296_ef391443, choice 1
2025-06-12 19:22:45,608 - app.api - INFO - Character: Ali, Setting: cultivation
2025-06-12 19:22:45,608 - app.api - INFO - Selected choice: 'Study the ancient tome further to unlock the secrets of the Celestial Phoenix Form, aiming to incorporate its elegance into your cultivation style.'
2025-06-12 19:22:45,609 - app.services.ai_service - INFO - Memory before processing - chapters_completed: 0, current_arc_index: 0, chapters_per_arc: 7
2025-06-12 19:22:45,609 - app.services.ai_service - INFO - Memory arcs: 7 arcs total
2025-06-12 19:22:45,609 - app.services.ai_service - INFO - Current arc: 'Join a prestigious academy or sect and prove yourself through deadly tournaments.'
2025-06-12 19:22:45,609 - app.services.ai_service - INFO - Chapter 1 of arc 'Join a prestigious academy or sect and prove yourself through deadly tournaments.' completed
2025-06-12 19:22:45,609 - app.services.ai_service - INFO - Using cultivation genre for story continuation
2025-06-12 19:22:45,609 - app.services.ai_service - INFO - Using big story goal for cultivation continuation: Climb from the weakest rank to the peak of cultivation in order to defeat the powerful enemies who destroyed your family and bring justice to those who wronged you.
2025-06-12 19:22:45,610 - app.genres.cultivation_setting - INFO - Continuing cultivation progression story for Ali with style: shonen
2025-06-12 19:22:45,610 - app.models.base_genre - INFO - Generating story for Ali
2025-06-12 19:22:53,954 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-12 19:22:53,959 - app.models.base_genre - INFO - ðŸŽ­ GENRE GPT RESPONSE (3063 chars):
2025-06-12 19:22:53,960 - app.models.base_genre - INFO - ============================================================
2025-06-12 19:22:53,963 - app.models.base_genre - INFO - [STORY]
Ali immerses himself in the ancient tome detailing the Celestial Phoenix Form, studying the intricate illustrations that depict the graceful movements of the legendary technique. As he delves deeper, the words seem to come alive, resonating with his soul and stirring memories from his past life. The vibrant colors of the qi described in the book swirl around him, igniting a newfound determination within him.

---
In the quiet of his chamber, Ali begins to mimic the movements of the Celestial Phoenix Form. Each motion flows with elegance and power, his qi responding to the ancient technique's call. As he practices, a gentle warmth spreads through him, a tangible connection forming between his cultivation and the legendary form he seeks to master.

---
Hours turn into days as Ali tirelessly refines his technique, incorporating the subtle adjustments he envisioned to enhance its power. The fiery qi around him intensifies, taking on the hues of the Celestial Phoenix as he draws closer to unlocking its secrets. Despite the physical strain, a sense of fulfillment and purpose fills Ali's heart, driving him to push further beyond his limits.

---
One evening, as Ali practices in the moonlight, a sudden surge of energy courses through him, enveloping him in a brilliant aura of shimmering gold. The Celestial Phoenix Form manifests around him, a breathtaking display of beauty and strength that leaves Ali in awe of the ancient art he now wields.

---
In the midst of his breakthrough, the Sect Elder, drawn by the radiant glow, appears at Ali's chamber. Astonishment flickers in the elder's eyes as he witnesses the Celestial Phoenix Form in action, a technique long thought lost to the annals of history. A smile graces the elder's face, recognizing the potential within Ali and the unique path he treads.

---
"Ali, your talent shines brightly, like the phoenix reborn from the ashes," the Sect Elder commends, his voice filled with pride. "May this newfound power bring you closer to your goals and illuminate your path in the Deadly Starfall Tournament."

---
Ali bows in gratitude, a sense of validation and purpose swelling within him. The Celestial Phoenix Form has become not just a technique but a symbol of his resilience and determination, propelling him forward on his journey of vengeance and justice.

---

[NEW CHARACTERS]
- None introduced in this chapter.

[/NEW CHARACTERS]

[CHOICES]
1. Seek out Lei, the fellow disciple, to spar and showcase your mastered Celestial Phoenix Form, cementing your newfound friendship through mutual respect and admiration.
2. Approach the Sect Elder for guidance on how to further refine and integrate the Celestial Phoenix Form into your cultivation, aiming to unlock its full potential under his experienced mentorship.
3. Venture into the sect's forbidden chambers under the cover of night, drawn by a mysterious aura that resonates with the Celestial Phoenix Form, risking discovery for a chance at unlocking hidden secrets that could aid you in the Deadly Starfall Tournament.
[/CHOICES]
2025-06-12 19:22:53,964 - app.models.base_genre - INFO - ============================================================
2025-06-12 19:22:53,965 - app.models.base_genre - INFO - Successfully parsed genre response: story=2412 chars, choices=3
2025-06-12 19:22:53,965 - app.services.story_planner - INFO - Found [NEW CHARACTERS] section: - None introduced in this chapter.
2025-06-12 19:22:53,965 - app.services.story_planner - INFO - Memory now has 0 characters: 
2025-06-12 19:22:53,965 - app.genres.cultivation_setting - INFO - Extracted characters from story content for Ali
2025-06-12 19:22:53,965 - app.services.story_planner - INFO - Found [NEW CHARACTERS] section: - None introduced in this chapter.
2025-06-12 19:22:53,965 - app.services.story_planner - INFO - Memory now has 0 characters: 
2025-06-12 19:22:53,966 - app.genres.cultivation_setting - INFO - Extracted characters from story content for Ali
2025-06-12 19:22:54,073 - app.services.firebase_service - INFO - Retrieved story story_1749781296_ef391443: Ali's cultivation shonen
2025-06-12 19:22:54,074 - app.storage.storage - INFO - Retrieved story story_1749781296_ef391443: Ali's cultivation shonen
2025-06-12 19:22:54,074 - app.storage.storage - INFO - Updated story memory with node node_1568628456
2025-06-12 19:22:54,219 - app.services.firebase_service - INFO - Saved story story_1749781296_ef391443: Ali's cultivation shonen
2025-06-12 19:22:54,219 - app.storage.storage - INFO - Saved story story_1749781296_ef391443: Ali's cultivation shonen
2025-06-12 19:22:54,219 - app.storage.storage - INFO - Added node node_1568628456 to story story_1749781296_ef391443
2025-06-12 19:22:54,426 - werkzeug - INFO - 127.0.0.1 - - [12/Jun/2025 19:22:54] "POST /api/stories/story_1749781296_ef391443/choices/1 HTTP/1.1" 200 -
